webpackJsonp([0],{"+ABx":function(t,e,n){"use strict";function r(t){n("mgt0")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("Xv6o"),o=n.n(i),a=n("sv1C"),s=n("VU/8"),l=r,u=s(o.a,a.a,l,"data-v-3f3180a4",null);e.default=u.exports},"/WSL":function(t,e,n){e=t.exports=n("FZ+f")(void 0),e.push([t.i,".modal-title[data-v-037dd9e4]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}",""])},"/aob":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("RUmD"),i=n.n(r),o=n("HqYp"),a=n("VU/8"),s=a(i.a,o.a,null,null,null);e.default=s.exports},"/ePw":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("9/zo"),i=n.n(r),o=n("Kxr1"),a=n("VU/8"),s=a(i.a,o.a,null,null,null);e.default=s.exports},"1XML":function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),n("F8S1");var i=n("0iPh"),o=r(i),a=n("5U11"),s=r(a),l=n("TTNq"),u=r(l),c=n("JkFl"),f=r(c),d=n("PJh5"),v=r(d);e.default={props:{size:{type:String,default:""},fade:{type:Boolean,default:!1}},data:function(){var t=this;return{tabName:"status",chartColors:["#337ab7","#7FFFD4"],streamLogSettings:{area:!0,labelMap:{OutBytes:"发送",InBytes:"接收"}},streamLogExtend:{legend:{formatter:function(e){switch(e){case"接收":return"接收("+(0,s.default)(t.streamLogs.sumInBytes)+")";case"发送":return"发送("+(0,s.default)(t.streamLogs.sumOutBytes)+")"}return e}},tooltip:{formatter:function(e){e[0].name;return("today"==t.streamLogType||"yesterday"==t.streamLogType?(0,v.default)(e[0].name,"YYYY-MM-DD HH:mm:ss").format("HH"):(0,v.default)(e[0].name,"YYYY-MM-DD HH:mm:ss").format("MM-DD"))+"<br>"+e[0].seriesName+" "+(0,s.default)(e[0].value)+"<br>"+e[1].seriesName+" "+(0,s.default)(e[1].value)}},yAxis:{axisLabel:{formatter:function(t,e){return""+(0,s.default)(t)}}},xAxis:{axisLabel:{formatter:function(e,n){return"today"==t.streamLogType||"yesterday"==t.streamLogType?""+(0,v.default)(e,"YYYY-MM-DD HH:mm:ss").format("HH"):""+(0,v.default)(e,"YYYY-MM-DD HH:mm:ss").format("MM-DD")}}}},title:"状态记录",serial:"",code:"",limit:20,statusLogs:[],statusDays:0,bStatusLogLoading:!1,positionLogs:[],positionDays:0,bPositionLogLoading:!1,streamLogType:"today",streamLogs:{columns:["Time","OutBytes","InBytes"],rows:[],sumInBytes:0,sumOutBytes:0},bStreamLogLoading:!1}},components:{ElTimeline:u.default,ElTimelineItem:f.default},mounted:function(){var t=this;(0,o.default)(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),(0,o.default)(this.$el).on("shown.bs.modal",function(){t.$emit("show")}).on("hidden.bs.modal",function(){t.reset(),t.$emit("hide")})},methods:{getStatusLogs:function(){var t=this;this.serial&&(this.bStatusLogLoading=!0,this.statusLogs=[],o.default.get("/api/v1/device/statuslog",{serial:this.serial,code:this.code,limit:this.limit}).then(function(e){e&&(t.statusLogs=e.LogList||[],t.statusDays=e.LogReserveDays||0)}).always(function(){t.$nextTick(function(){t.bStatusLogLoading=!1})}))},getPositionLogs:function(){var t=this;this.serial&&(this.bPositionLogLoading=!0,this.positionLogs=[],o.default.get("/api/v1/device/positionlog",{serial:this.serial,code:this.code,limit:this.limit}).then(function(e){e&&(t.positionLogs=e.LogList||[],t.positionDays=e.LogReserveDays||0)}).always(function(){t.$nextTick(function(){t.bPositionLogLoading=!1})}))},getStreamLogs:function(){var t=this;this.serial&&(this.bStreamLogLoading=!0,this.streamLogs.rows=[],this.streamLogs.sumInBytes=0,this.streamLogs.sumOutBytes=0,o.default.get("/api/v1/device/streamlog",{serial:this.serial,code:this.code,type:this.streamLogType}).then(function(e){if(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e.List[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.streamLogs.sumInBytes+=s.InBytes,t.streamLogs.sumOutBytes+=s.OutBytes}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}t.streamLogs.rows=e.List||[]}}).always(function(){t.$nextTick(function(){t.bStreamLogLoading=!1})}))},statusTimeLineType:function(t){var e="primary";if(!t)return e;switch(t.Status){case"ON":e="primary";break;case"OFF":e="warning";break;case"DEL":e="danger";break;default:e="info"}return e},positionTimeLineType:function(t){var e="primary";if(!t)return e;switch(t.Method){case"移动位置上报":case"通道通知":case"通道检索":e="primary";break;case"接口设置":e="warning";break;case"报警位置上报":e="danger";break;default:e="info"}return e},tabClick:function(t){var e=this;"stream"==t.name&&this.$nextTick(function(){e.$refs.streamChart.resize()})},changeStreamLogType:function(){this.getStreamLogs()},reset:function(){this.title="状态记录",this.serial="",this.code="",this.statusLogs=[],this.statusDays=0,this.positionLogs=[],this.positionDays=0,this.streamLogs.rows=[],this.streamLogs.sumInBytes=0,this.streamLogs.sumOutBytes=0,this.streamLogType="today",this.limit=20},show:function(t,e,n,r){this.title=t||this.title,this.serial=e||"",this.code=n||"",this.limit=r||20,(0,o.default)(this.$el).modal("show"),this.getStatusLogs(),this.getPositionLogs(),this.getStreamLogs()},showStatusLog:function(t,e,n,r){this.tabName="status",this.title=t||this.title,this.serial=e||"",this.code=n||"",this.limit=r||20,(0,o.default)(this.$el).modal("show"),this.getStatusLogs(),this.getPositionLogs(),this.getStreamLogs()},showStreamLog:function(t,e,n){var r=this;this.tabName="stream",this.title=t||this.title,this.serial=e||"",this.code=n||"",(0,o.default)(this.$el).modal("show"),this.getStatusLogs(),this.getPositionLogs(),this.getStreamLogs(),this.$nextTick(function(){r.$refs.streamChart.resize()})},hide:function(){(0,o.default)(this.$el).modal("hide")}}}},"1h83":function(t,e,n){e=t.exports=n("FZ+f")(void 0),e.push([t.i,"label.el-switch[data-v-339212b6]{margin-bottom:-10px}.modal-content[data-v-339212b6]{overflow:hidden}@media screen and (min-width:992px){.modal-dialog.modal-lgg[data-v-339212b6]{width:90%}}@media screen and (min-width:1200px){.modal-dialog.modal-lgg[data-v-339212b6]{width:1200px}}",""])},"2xaA":function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var o=n("A9K1"),a=r(o),s=n("0iPh"),l=r(s);e.default={data:function(){return{form:this.defForm()}},components:{FormDlg:a.default},methods:{defForm:function(){return{serial:"",code:"",name:"",custom:!1,longitude:"",latitude:"",customLongitude:"",customLatitude:""}},onHide:function(){this.form=this.defForm(),this.$emit("hide")},onShow:function(){this.errors.clear(),this.$emit("show")},onSubmit:function(){var t=this;return i(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$validator.validateAll();case 2:if(n=e.sent){e.next=8;break}return r=t.errors.items[0],t.$message({type:"error",message:r.msg}),(0,l.default)("[name="+r.field+"]").focus(),e.abrupt("return");case 8:l.default.get("/api/v1/device/setchannelposition",{serial:t.form.serial,code:t.form.code,longitude:t.form.customLongitude,latitude:t.form.customLatitude}).then(function(e){t.$refs.dlg.hide(),t.$emit("submit")});case 9:case"end":return e.stop()}},e,t)}))()},show:function(t){var e=this;this.errors.clear(),t&&(this.form.serial=t.serial,this.form.code=t.code,this.form.name=t.name,this.form.longitude=t.longitude||"",this.form.latitude=t.latitude||"",this.form.customLongitude=t.customLongitude||"",this.form.customLatitude=t.customLatitude||""),this.$nextTick(function(){e.$refs.dlg.show()})}}}},"3f1d":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n("F8S1");var i=n("eAMf"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=n("NYxO");e.default={data:function(){return{videoUrl:"",videoTitle:"",snapUrl:"",serial:"",code:"",streamID:"",timer:0,bShow:!1,bLoading:!1}},props:{live:{type:Boolean,default:!1},fade:{type:Boolean,default:!1}},computed:r({},(0,a.mapState)(["userInfo","serverInfo"])),beforeDestroy:function(){t(window).off("beforeunload",this.beforeUnload),this.stop()},mounted:function(){var e=this;t(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),t(this.$el).on("hide.bs.modal",function(){e.bShow=!1,e.stop()}).on("show.bs.modal",function(){e.bShow=!0}),t(window).on("beforeunload",this.beforeUnload)},components:{LivePlayer:o.default},methods:{play:function(e,n,r,i,o,a){this.serial=i||"",this.code=o||"",this.streamID=a||"",this.videoTitle=n||"",this.snapUrl=r||"",this.videoUrl=e||"",t(this.$el).modal("show")},stop:function(){this.snapUrl="",this.videoUrl="",this.timer&&(clearInterval(this.timer),this.timer=0),this.streamID&&(t.get("/api/v1/playback/stop",{streamid:this.streamID}),this.streamID="")},scale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t.get("/api/v1/playback/control",{streamid:this.streamID,command:"scale",scale:e})},beforeUnload:function(t){this.stop(),t.preventDefault(),t.returnValue=""}}}}).call(e,n("0iPh"))},"49HP":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n("PJh5"),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{flags:{},defaultFlags:"0000000000000000000000000000000"}},props:{placeholder:{default:"选择日期"},clearBtn:{type:Boolean,default:!1},day:{default:""}},mounted:function(){var e=this;t(this.$el).datepicker({language:"zh-CN",autoclose:!0,clearBtn:this.clearBtn,format:"yyyy-mm-dd",todayHighlight:!0}).on("changeDate",function(t){t.date?e.$emit("update:day",(0,i.default)(t.date).format("YYYYMMDD")):e.$emit("update:day","")}).on("change",function(){e.$el.value||e.$emit("update:day","")}),this.day&&t(this.$el).datepicker("setDate",(0,i.default)(this.day,"YYYYMMDD").toDate()),this.update()},watch:{day:function(e){if(e){var n=t(this.$el).datepicker("getDate");e!=(0,i.default)(n).format("YYYYMMDD")&&t(this.$el).datepicker("setDate",(0,i.default)(e,"YYYYMMDD").toDate())}}},computed:{},methods:{update:function(){t(this.$el).datepicker("update")}}}}).call(e,n("0iPh"))},"5U11":function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=["B","kB","MB","GB","TB","PB","EB","ZB","YB"];t.exports=function(t){if(!Number.isFinite(t))throw new TypeError("Expected a finite number, got "+(void 0===t?"undefined":r(t))+": "+t);var e=t<0;if(e&&(t=-t),t<1)return(e?"-":"")+t+" B";var n=Math.min(Math.floor(Math.log(t)/Math.log(1e3)),i.length-1),o=Number((t/Math.pow(1e3,n)).toPrecision(3)),a=i[n];return(e?"-":"")+o+" "+a}},"5aEn":function(t,e,n){"use strict";function r(t){n("Pxhv")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("3f1d"),o=n.n(i),a=n("aV5U"),s=n("VU/8"),l=r,u=s(o.a,a.a,l,"data-v-037dd9e4",null);e.default=u.exports},"5gxX":function(t,e,n){"use strict";function r(t){n("mLC9")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("qb8i"),o=n.n(i),a=n("jlJA"),s=n("VU/8"),l=r,u=s(o.a,a.a,l,null,null);e.default=u.exports},"7fJx":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["modal",{fade:t.fade}],attrs:{"data-backdrop":"static","data-disable":"false","data-keyboard":"true",tabindex:"-1"}},[n("div",{class:["modal-dialog",t.size]},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),n("h4",{staticClass:"modal-title text-center text-primary"},[n("span",[t._v(t._s(t.title))])])]),t._v(" "),n("div",{staticClass:"modal-body"},[n("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},[n("div",{staticClass:"form-group form-group-sm"},[n("label",[t._v("搜索")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:t.q},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault()},input:function(e){e.target.composing||(t.q=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),n("span",{staticClass:"hidden-xs"},[t._v("  ")]),t._v(" "),n("div",{staticClass:"form-group form-group-sm"},[n("label",[t._v("通道类型")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.channel_type,expression:"channel_type",modifiers:{trim:!0}}],staticClass:"form-control",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.channel_type=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[t._v("全部")]),t._v(" "),n("option",{attrs:{value:"device"}},[t._v("设备")]),t._v(" "),n("option",{attrs:{value:"dir"}},[t._v("子目录")])])]),t._v(" "),n("span",{staticClass:"hidden-xs"},[t._v("  ")]),t._v(" "),n("div",{staticClass:"form-group form-group-sm"},[n("div",{staticClass:"checkbox"},[n("el-checkbox",{staticStyle:{"margin-top":"-5px","padding-left":"0"},attrs:{size:"small",name:"Related"},model:{value:t.related,callback:function(e){t.related="string"==typeof e?e.trim():e},expression:"related"}},[t._v("\n                                只看已选("+t._s(t.relateCnt)+")\n                            ")])],1)])]),t._v(" "),n("br"),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"channelTable",attrs:{data:t.channels,stripe:"","max-height":500,"element-loading-text":"加载中..."},on:{"sort-change":t.sortChange,select:t.select,"select-all":t.selectAll}},[n("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",selectable:t.selectable}}),t._v(" "),n("el-table-column",{attrs:{prop:"DeviceID",label:"设备国标编号","min-width":"200","show-overflow-tooltip":"",sortable:"custom"}}),t._v(" "),n("el-table-column",{attrs:{prop:"ID",label:"通道国标编号","min-width":"200","show-overflow-tooltip":"",sortable:"custom"}}),t._v(" "),n("el-table-column",{attrs:{prop:"Name",label:"通道名称","min-width":"120",formatter:t.formatName,"show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"Manufacturer",label:"厂家","min-width":"120",formatter:t.formatManufacturer,"show-overflow-tooltip":""}})],1),t._v(" "),t.total>0?n("el-pagination",{staticClass:"pull-right",attrs:{layout:"total,prev,pager,next,sizes","pager-count":t.isMobile()?3:5,total:t.total,"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:pageSize":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e}}}):t._e(),t._v(" "),n("div",{staticClass:"clearfix"})],1),t._v(" "),t._m(1)])])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")])])}],o={render:r,staticRenderFns:i};e.a=o},"81Pc":function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){var r=n(2)(n(1),n(3),null,null,null);r.options.__file="/Users/benzhao/Sites/@xunlei/vue-context-menu/src/VueContextMenu.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] VueContextMenu.vue: functional components are not supported with templates, they should use render functions."),t.exports=r.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"context-menu",data:function(){return{triggerShowFn:function(){},triggerHideFn:function(){},x:null,y:null,style:{},binded:!1}},props:{target:null,show:Boolean},mounted:function(){this.bindEvents()},watch:{show:function(t){t?this.bindHideEvents():this.unbindHideEvents()},target:function(t){this.bindEvents()}},methods:{bindEvents:function(){var t=this;this.$nextTick(function(){t.target&&!t.binded&&(t.triggerShowFn=t.contextMenuHandler.bind(t),t.target.addEventListener("contextmenu",t.triggerShowFn),t.binded=!0)})},unbindEvents:function(){this.target&&this.target.removeEventListener("contextmenu",this.triggerShowFn)},bindHideEvents:function(){this.triggerHideFn=this.clickDocumentHandler.bind(this),document.addEventListener("mousedown",this.triggerHideFn),document.addEventListener("mousewheel",this.triggerHideFn)},unbindHideEvents:function(){document.removeEventListener("mousedown",this.triggerHideFn),document.removeEventListener("mousewheel",this.triggerHideFn)},clickDocumentHandler:function(t){this.$emit("update:show",!1)},contextMenuHandler:function(t){this.x=t.clientX,this.y=t.clientY,this.layout(),this.$emit("update:show",!0),t.preventDefault()},layout:function(){this.style={left:this.x+"px",top:this.y+"px"}}}}},function(t,e){t.exports=function(t,e,n,r,i){var o,a=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(o=t,a=t.default);var l="function"==typeof a?a.options:a;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns),r&&(l._scopeId=r);var u;if(i?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},l._ssrRegister=u):n&&(u=n),u){var c=l.functional,f=c?l.render:l.beforeCreate;c?l.render=function(t,e){return u.call(e),f(t,e)}:l.beforeCreate=f?[].concat(f,u):[u]}return{esModule:o,exports:a,options:l}}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticStyle:{display:"block"},style:t.style,on:{mousedown:function(t){t.stopPropagation()},contextmenu:function(t){t.preventDefault()}}},[t._t("default")],2)},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){const r=n(0),i={};i.install=function(t,e){t.component(r.name,r)},i.component=r,"undefined"!=typeof window&&window.Vue&&window.Vue.use(i),t.exports=i}])})},"8Xyl":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{attrs:{type:"text",placeholder:t.placeholder}})},i=[],o={render:r,staticRenderFns:i};e.a=o},"9/zo":function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n("M4fF"),a=r(o),s=n("5gxX"),l=r(s),u=n("KToh"),c=r(u),f=n("MR46"),d=r(f),v=n("NYxO");e.default={props:{},data:function(){return{q:"",online:"",total:0,pageSize:10,currentPage:1,sort:"ID",order:"asc",devices:[],loading:!1,timer:0,statusLogs:[],bStatusLogLoading:!1,removeDlg:!1,removeUACheck:!1,forbidUACheck:!1,removeID:"",removeName:"",removeUA:""}},components:{UploadDlg:l.default,DeviceEditDlg:c.default,DeviceLogDlg:d.default},computed:i({},(0,v.mapState)(["userInfo","serverInfo"])),mounted:function(){},beforeDestroy:function(){this.timer&&(clearInterval(this.timer),this.timer=0)},methods:{ready:function(){var t=this;this.$watch("q",function(t,e){this.doDelaySearch()}),this.$watch("online",function(t,e){this.doSearch()}),this.$watch("currentPage",function(t,e){this.doSearch(t)}),this.timer=setInterval(function(){t.getDeviceList(!1)},3e3)},isMobile:function(){return videojs.browser.IS_IOS||videojs.browser.IS_ANDROID},doSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e={};this.q&&(e.q=this.q),this.online&&(e.online=this.online),this.$router.replace({path:"/devices/"+t,query:e})},doDelaySearch:a.default.debounce(function(){this.doSearch()},800),getDeviceList:function(){var e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n&&(this.loading=!0),t.ajax({method:"GET",url:"/api/v1/device/list",global:n,data:{q:this.q,start:(this.currentPage-1)*this.pageSize,limit:this.pageSize,online:this.online,sort:this.sort,order:this.order}}).then(function(t){e.total=t.DeviceCount,e.devices=t.DeviceList}).always(function(){n&&e.$nextTick(function(){e.loading=!1})})},sortChange:function(t){this.sort=t.prop,this.order="ascending"==t.order?"asc":"desc",this.getDeviceList()},fetchCatalog:function(e){var n=this;t.ajax({method:"GET",url:"/api/v1/device/fetchcatalog",global:!1,data:{serial:e.ID}}).then(function(){n.$message({type:"success",message:"更新通道信息成功"})}).fail(function(t){t&&console.log("fetch catalog ajax error: "+t.status+" "+t.responseText)})},download:function(){window.open("/api/v1/device/export")},uploaded:function(){this.$message({type:"success",message:"上传成功！"}),this.getDeviceList(),this.$refs.uploadDlg.hide()},removeBatch:function(){var e=this;this.removeDlg=!1;var n={serial:this.removeID};this.removeUACheck&&(n.ua=this.removeUA,this.forbidUACheck&&(n.forbid=!0)),t.get("/api/v1/device/remove",n).always(function(){e.getDeviceList()})},removeDevice:function(e){var n=this;if(!e.Online&&!e.ChannelCount&&"0001-01-01 00:00:00"===e.LastKeepaliveAt&&e.Manufacturer&&e.ID&&e.ID.length<10)return this.removeID=e.ID,this.removeName=e.Name,this.removeUA=e.Manufacturer,this.removeUACheck=!1,this.forbidUACheck=!1,void(this.removeDlg=!0);this.$confirm("确认删除 "+(e.Name||e.ID)+" ?","提示").then(function(){t.get("/api/v1/device/remove",{serial:e.ID}).always(function(){n.getDeviceList()})}).catch(function(){})},editDevice:function(t){this.$refs.deviceEditDlg.show({serial:t.ID,name:t.Name,media_transport:t.MediaTransport,media_transport_mode:t.MediaTransportMode,stream_mode:t.StreamMode,recv_stream_ip:t.RecvStreamIP,contact_ip:t.ContactIP,sms_id:t.SMSID,sms_group_id:t.SMSGroupID,charset:t.Charset,catalog_interval:t.CatalogInterval,subscribe_interval:t.SubscribeInterval,catalog_subscribe:t.CatalogSubscribe,alarm_subscribe:t.AlarmSubscribe,position_subscribe:t.PositionSubscribe,password:t.Password,record_center:t.RecordCenter,record_indistinct:t.RecordIndistinct,civil_code_first:t.CivilCodeFirst,drop_channel_type:t.DropChannelType,longitude:t.Longitude,latitude:t.Latitude})},formatName:function(t,e,n){return n||"-"},formatTransport:function(t,e,n){var r=String(t.MediaTransport).toUpperCase();return"TCP"==r&&(r+="active"==t.MediaTransportMode?" 主动":" 被动"),r},setMediaTransport:function(e){var n=this,r=e.MediaTransport||e.row.MediaTransport,i=e.MediaTransportMode||e.row.MediaTransportMode;t.get("/api/v1/device/setmediatransport",{serial:e.row.ID,media_transport:r,media_transport_mode:i}).then(function(){n.$set(e.row,"MediaTransport",r),n.$set(e.row,"MediaTransportMode",i)})},showDeviceLog:function(t){this.$refs.deviceLogDlg.show("设备("+t.ID+")",t.ID)},showStatusLog:function(t){this.$refs.deviceLogDlg.showStatusLog("设备("+t.ID+")",t.ID)},showStreamLog:function(t){this.$refs.deviceLogDlg.showStreamLog("设备("+t.ID+")",t.ID)}},beforeRouteEnter:function(t,e,n){n(function(e){e.q=t.query.q||"",e.online=t.query.online||"",e.currentPage=parseInt(t.params.page)||1,e.ready()})},beforeRouteLeave:function(t,e,n){this.timer&&(clearInterval(this.timer),this.timer=0),n()},beforeRouteUpdate:function(t,e,n){var r=this;n(),this.$nextTick(function(){r.q=t.query.q||"",r.online=t.query.online||"",r.currentPage=parseInt(t.params.page)||1,r.devices=[],r.total=0,r.getDeviceList()})}}}).call(e,n("0iPh"))},AU86:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var o=n("A9K1"),a=r(o),s=n("0iPh"),l=r(s);e.default={data:function(){return{ctrl:!1,alt:!1,devid:"",start:0,limit:1e4,downloadThisDev:!1}},components:{FormDlg:a.default},beforeDestroy:function(){(0,l.default)(this.$el).off("keydown",this.keyDown).off("keyup",this.keyUp)},computed:{showPage:function(){return this.ctrl&&this.alt||this.start||1e4!=this.limit},downloadURL:function(){return this.downloadThisDev&&this.devid?"/api/v1/channel/export?serial="+this.devid+"&start="+this.start+"&limit="+this.limit:"/api/v1/channel/export?start="+this.start+"&limit="+this.limit}},methods:{onHide:function(){this.ctrl=!1,this.alt=!1,this.devid="",this.downloadThisDev=!1,this.start=0,this.limit=1e4,this.$emit("hide"),(0,l.default)(this.$el).off("keydown",this.keyDown).off("keyup",this.keyUp)},onShow:function(){this.errors.clear(),this.$emit("show"),(0,l.default)(this.$el).on("keydown",this.keyDown).on("keyup",this.keyUp)},keyDown:function(t){17==t.keyCode&&(this.ctrl=!0),18==t.keyCode&&(this.alt=!0)},keyUp:function(t){},onSubmit:function(){var t=this;return i(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$validator.validateAll();case 2:if(n=e.sent){e.next=8;break}return r=t.errors.items[0],t.$message({type:"error",message:r.msg}),(0,l.default)("[name="+r.field+"]").focus(),e.abrupt("return");case 8:window.open(t.downloadURL),t.$refs.dlg.hide(),t.$emit("submit");case 11:case"end":return e.stop()}},e,t)}))()},show:function(t){var e=this;this.errors.clear(),this.devid=t,this.$nextTick(function(){e.$refs.dlg.show()})}}}},BgxG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ElTimelineItem",inject:["timeline"],props:{timestamp:String,hideTimestamp:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},type:String,color:String,size:{type:String,default:"normal"},icon:String}}},Cml9:function(t,e,n){e=t.exports=n("FZ+f")(void 0),e.push([t.i,".right-menu[data-v-68785699]{position:fixed;background:#fff;border:1px solid rgba(0,0,0,.2);border-radius:3px;z-index:999;display:none}.right-menu a[data-v-68785699]{width:100px;height:28px;line-height:28px;text-align:center;display:block;color:#1a1a1a}.right-menu a[data-v-68785699]:hover{background:#eee;color:#fff}.right-menu[data-v-68785699]{border:1px solid #eee;box-shadow:0 .5em 1em 0 rgba(0,0,0,.1);border-radius:1px}a[data-v-68785699]{text-decoration:none}.right-menu a[data-v-68785699]{padding:2px}.right-menu a[data-v-68785699]:hover{background:#42b983}.video[data-v-68785699]{position:relative}.video .video-close[data-v-68785699]{position:absolute;top:5px;right:5px;color:#fff;font-size:12px;background-color:hsla(0,0%,50%,.5);padding:2px 5px;cursor:pointer;border-radius:2px;max-width:120px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.ptz-block[data-v-68785699]{width:150px;height:180px;margin:0 auto;text-align:center;position:relative;font-size:24px}.ptz-cell[data-v-68785699]{width:50px;height:50px;line-height:50px;position:absolute}.ptz-cell.active[data-v-68785699]{color:#ccc;font-size:26px}.ptz-cell.readonly[data-v-68785699]{color:#ddd}.fa-microphone.active[data-v-68785699]{color:#fff}.fa-microphone-slash.readonly[data-v-68785699],.fa-microphone.readonly[data-v-68785699]{color:#ddd}.ptz-center[data-v-68785699]{top:50px;left:50px;border-radius:25px;background-color:#ccc}.ptz-up[data-v-68785699]{top:0;left:50px}.ptz-left[data-v-68785699]{top:50px;left:0}.ptz-right[data-v-68785699]{top:50px;left:100px}.ptz-down[data-v-68785699]{top:100px;left:50px}.ptz-zoomin[data-v-68785699]{top:150px;left:20px}.ptz-zoomout[data-v-68785699]{top:150px;left:80px}.ptz-center>.fa-microphone[data-v-68785699],.ptz-down[data-v-68785699],.ptz-left[data-v-68785699],.ptz-right[data-v-68785699],.ptz-up[data-v-68785699],.ptz-zoomin[data-v-68785699],.ptz-zoomout[data-v-68785699]{cursor:pointer}.ptz-center>.fa-microphone.readonly[data-v-68785699],.ptz-down.readonly[data-v-68785699],.ptz-left.readonly[data-v-68785699],.ptz-right.readonly[data-v-68785699],.ptz-up.readonly[data-v-68785699],.ptz-zoomin.readonly[data-v-68785699],.ptz-zoomout.readonly[data-v-68785699]{cursor:auto}",""])},Dwyu:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var o=n("A9K1"),a=r(o),s=n("0iPh"),l=r(s);e.default={data:function(){return{form:this.defForm()}},components:{FormDlg:a.default},methods:{defForm:function(){return{serial:"",code:"",name:"",customName:""}},onHide:function(){this.form=this.defForm(),this.$emit("hide")},onShow:function(){this.errors.clear(),this.$emit("show"),this.$el.querySelector("#input-name").focus()},onSubmit:function(){var t=this;return i(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$validator.validateAll();case 2:if(n=e.sent){e.next=8;break}return r=t.errors.items[0],t.$message({type:"error",message:r.msg}),(0,l.default)("[name="+r.field+"]").focus(),e.abrupt("return");case 8:l.default.get("/api/v1/device/setchannelname",{serial:t.form.serial,code:t.form.code,name:t.form.customName}).then(function(e){t.$refs.dlg.hide(),t.$emit("submit")});case 9:case"end":return e.stop()}},e,t)}))()},show:function(t){var e=this;this.errors.clear(),t&&(this.form.serial=t.serial,this.form.code=t.code,this.form.name=t.name,this.form.customName=t.customName,t.custom&&(this.form.customName=t.name,this.form.name="")),this.$nextTick(function(){e.$refs.dlg.show()})}}}},"ENv+":function(t,e,n){"use strict";function r(t){n("wQCP")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("lgdx"),o=n.n(i),a=n("vy5B"),s=n("VU/8"),l=r,u=s(o.a,a.a,l,"data-v-721c7667",null);e.default=u.exports},GXnK:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box box-primary"},[t._m(0),t._v(" "),n("div",{staticClass:"box-body"},[n("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},[n("div",{staticClass:"form-group form-group-sm"},[n("label",[t._v("搜索")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:t.q},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault()},input:function(e){e.target.composing||(t.q=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),n("span",{staticClass:"hidden-xs"},[t._v("  ")]),t._v(" "),n("div",{staticClass:"form-group pull-right"},[n("router-link",{staticClass:"btn btn-default btn-sm",attrs:{to:"/devices/1"}},[n("i",{staticClass:"fa fa-table"}),t._v(" 列表视图\n        ")])],1)]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"clearfix"}),t._v(" "),n("div",{staticClass:"content"},[n("div",{class:[{"col-md-3":t.hasAnyRole(t.serverInfo,t.userInfo,"管理员","操作员"),"col-md-4":!t.hasAnyRole(t.serverInfo,t.userInfo,"管理员","操作员")}]},[t._m(1),t._v(" "),n("div",{staticClass:"tab-content",staticStyle:{margin:"10px 0"},attrs:{id:"tab-tree-wrapper"}},[n("div",{ref:"devTreeWrapper",staticClass:"tab-pane active",attrs:{id:"dev-tree-wrapper"}},[t.showTree?n("el-tree",{ref:"devTree",style:(t.isMobile()?"max-height:200px;":"")+";min-height:200px;overflow:auto;",attrs:{id:"dev-tree","node-key":"key",props:t.treeProps,load:t.treeLoad,"filter-node-method":t.treeFilter,lazy:""},on:{"node-click":t.treeNodeClick,"node-contextmenu":t.treeNodeRightClick},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.node,i=e.data;return n("span",{staticClass:"custom-tree-node"},[n("span",{class:{"text-green":t.treeLeaf(i)&&"ON"===i.status}},[n("i",{class:["fa",{"fa-sitemap":!t.treeLeaf(i),"fa-camera":t.treeLeaf(i)}]}),t._v(" "),n("span",{staticClass:"ellipsis",attrs:{title:r.label}},[t._v(t._s(r.label))])])])}}])}):t._e()],1),t._v(" "),n("div",{ref:"groupTreeWrapper",staticClass:"tab-pane",attrs:{id:"group-tree-wrapper"}},[t.showGroupTree?n("el-tree",{ref:"groupTree",style:(t.isMobile()?"max-height:200px;":"")+";min-height:200px;overflow:auto;",attrs:{id:"group-tree","node-key":"key",props:t.treeProps,load:t.groupTreeLoad,"filter-node-method":t.treeFilter,lazy:""},on:{"node-click":t.treeNodeClick,"node-contextmenu":t.treeNodeRightClick},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.node,i=e.data;return n("span",{staticClass:"custom-tree-node"},[n("span",{class:{"text-green":"ON"===i.status&&0===i.subCount&&i.code&&i.serial&&!i.custom}},[n("i",{class:["fa",{"fa-home":!i.code,"fa-sitemap":i.code&&!t.treeLeaf(i),"fa-camera":t.treeLeaf(i)}]}),t._v(" "),n("span",{staticClass:"ellipsis",attrs:{title:r.label}},[t._v(t._s(r.label))])])])}}])}):t._e()],1)])]),t._v(" "),n("VueContextMenu",{staticClass:"right-menu",attrs:{target:t.contextMenuTarget,show:t.contextMenuVisible},on:{"update:show":function(e){return t.contextMenuVisible=e}}},[n("a",{directives:[{name:"show",rawName:"v-show",value:t.contextMenuNodeData,expression:"contextMenuNodeData"}],attrs:{href:"javascript:;"},on:{click:t.treeRefresh}},[n("i",{staticClass:"fa fa-refresh"}),t._v(" 刷新节点\n        ")]),t._v(" "),n("a",{directives:[{name:"show",rawName:"v-show",value:t.contextMenuNodeData&&t.contextMenuNodeData.custom,expression:"contextMenuNodeData && contextMenuNodeData.custom"}],attrs:{href:"javascript:;"},on:{click:t.showNodeAddDlg}},[n("i",{staticClass:"fa fa-plus"}),t._v(" 新建节点\n        ")]),t._v(" "),n("a",{directives:[{name:"show",rawName:"v-show",value:t.contextMenuNodeData&&t.contextMenuNodeData.custom&&t.contextMenuNodeData.code,expression:"contextMenuNodeData && contextMenuNodeData.custom && contextMenuNodeData.code"}],attrs:{href:"javascript:;"},on:{click:t.showCustomListDlg}},[n("i",{staticClass:"fa fa-check"}),t._v(" 选择通道\n        ")]),t._v(" "),n("a",{directives:[{name:"show",rawName:"v-show",value:t.contextMenuNodeData&&!(t.contextMenuNodeData.custom&&!t.contextMenuNodeData.code),expression:"contextMenuNodeData && !(contextMenuNodeData.custom && !contextMenuNodeData.code)"}],attrs:{href:"javascript:;"},on:{click:t.showNodeEditDlg}},[n("i",{staticClass:"fa fa-edit"}),t._v(" 编辑节点\n        ")]),t._v(" "),n("a",{directives:[{name:"show",rawName:"v-show",value:t.contextMenuNodeData&&t.contextMenuNodeData.custom&&t.contextMenuNodeData.code,expression:"contextMenuNodeData && contextMenuNodeData.custom && contextMenuNodeData.code"}],attrs:{href:"javascript:;"},on:{click:t.removeCustomNode}},[n("i",{staticClass:"fa fa-remove"}),t._v(" 删除节点\n        ")])]),t._v(" "),n("div",{class:["row",{"col-md-9":t.hasAnyRole(t.serverInfo,t.userInfo,"管理员","操作员"),"col-md-8":!t.hasAnyRole(t.serverInfo,t.userInfo,"管理员","操作员")}],attrs:{id:"dev-tree-right","data-sticky-wrap":"","data-sticky-for":"1000","data-sticky-class":"sticky"}},[n("div",{staticClass:"col-md-9 col-lg-10",attrs:{id:"dev-tree-player"}},[n("div",{staticClass:"view-list row"},[n("div",{staticClass:"video-show"},[n("div",t._l(t.players,function(e,r){return n("div",{key:r,staticClass:"no-margin no-padding video col-sm-6",class:{active:r==t.playerIdx,"col-sm-12":1==t.playersLength,"col-sm-6":4==t.playersLength,"col-sm-4":9==t.playersLength,"col-sm-3":16==t.playersLength},on:{click:function(n){t.clickPlayer(e,r,n)},mousemove:function(n){t.resetCloseTimer(e)},touchstart:function(n){t.resetCloseTimer(e)}}},[n("LivePlayer",{directives:[{name:"loading",rawName:"v-loading",value:e.bLoading,expression:"player.bLoading"}],attrs:{hideBigPlayButton:!!t.serverInfo.HideBigPlayButton,videoUrl:e.url,poster:e.poster,live:"",muted:"",stretch:"","element-loading-text":"加载中...","element-loading-background":"#000",loading:e.bLoading},on:{"update:loading":function(n){t.$set(e,"bLoading",n)},message:t.$message}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.url&&e.bCloseShow,expression:"player.url && player.bCloseShow"}],staticClass:"video-close",on:{click:function(n){t.closeVideo(e)}}},[t._v("关闭")])],1)}))])]),t._v(" "),n("br"),t._v(" "),n("br")]),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员","操作员")?n("div",{staticClass:"col-md-3 col-lg-2",attrs:{id:"dev-tree-ptz"}},[n("div",{staticClass:"ptz-block"},[n("div",{staticClass:"ptz-cell ptz-up",class:{readonly:!t.playing},attrs:{command:"up",title:"上"},on:{mousedown:function(e){e.preventDefault(),t.ptzControl(e)}}},[n("i",{staticClass:"fa fa-chevron-up"})]),t._v(" "),n("div",{staticClass:"ptz-cell ptz-left",class:{readonly:!t.playing},attrs:{command:"left",title:"左"},on:{mousedown:function(e){e.preventDefault(),t.ptzControl(e)}}},[n("i",{staticClass:"fa fa-chevron-left"})]),t._v(" "),n("div",{staticClass:"ptz-cell ptz-center",attrs:{title:"云台控制"}},[t.canTalk()&&"标准版"!=t.serverInfo.VersionType?n("i",{staticClass:"fa fa-microphone",class:{readonly:!t.playing},attrs:{title:"按住喊话"},on:{mousedown:function(e){e.preventDefault(),t.talkStart(e)}}}):t._e(),t._v(" "),t.canTalk()||"标准版"==t.serverInfo.VersionType?t._e():n("i",{staticClass:"fa fa-microphone-slash",class:{readonly:!t.playing},attrs:{title:"由于浏览器安全策略, 非 HTTPS 或 localhost 访问, 对讲不可用"}})]),t._v(" "),n("div",{staticClass:"ptz-cell ptz-right",class:{readonly:!t.playing},attrs:{command:"right",title:"右"},on:{mousedown:function(e){e.preventDefault(),t.ptzControl(e)}}},[n("i",{staticClass:"fa fa-chevron-right"})]),t._v(" "),n("div",{staticClass:"ptz-cell ptz-down",class:{readonly:!t.playing},attrs:{command:"down",title:"下"},on:{mousedown:function(e){e.preventDefault(),t.ptzControl(e)}}},[n("i",{staticClass:"fa fa-chevron-down"})]),t._v(" "),n("div",{staticClass:"ptz-cell ptz-zoomin",class:{readonly:!t.playing},attrs:{command:"zoomin",title:"放大"},on:{mousedown:function(e){e.preventDefault(),t.ptzControl(e)}}},[n("i",{staticClass:"fa fa-plus"})]),t._v(" "),n("div",{staticClass:"ptz-cell ptz-zoomout",class:{readonly:!t.playing},attrs:{command:"zoomout",title:"缩小"},on:{mousedown:function(e){e.preventDefault(),t.ptzControl(e)}}},[n("i",{staticClass:"fa fa-minus"})])])]):t._e()]),t._v(" "),n("div",{staticClass:"clearfix"}),t._v(" "),t.isDemoUser(t.serverInfo,t.userInfo)?n("div",{staticClass:"text-center text-gray"},[n("br"),t._v("\n        提示: 演示系统限制匿名登录播放时间, 若需测试长时间播放, 请"),n("a",{attrs:{target:"_blank",href:"//www.liveqing.com/docs/download/LiveGBS.html"}},[t._v("下载使用")])]):t._e(),t._v(" "),n("br")],1)]),t._v(" "),n("DeviceTreeNodeEditDlg",{ref:"nodeEditDlg",staticStyle:{"z-index":"2001"},on:{submit:t.treeRefresh}}),t._v(" "),n("ChannelCustomListDlg",{ref:"customListDlg",staticStyle:{"z-index":"2001"},attrs:{size:"modal-lg",title:t.customListDlgTitle},on:{hide:t.treeRefresh}})],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box-header"},[n("h4",{staticClass:"text-primary text-center"},[t._v("设备树")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"nav nav-tabs"},[n("li",{staticClass:"active"},[n("a",{attrs:{href:"#dev-tree-wrapper","data-toggle":"tab"}},[t._v("设备树")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#group-tree-wrapper","data-toggle":"tab"}},[t._v("分 组")])])])}],o={render:r,staticRenderFns:i};e.a=o},Gbjb:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"box box-primary"},[n("div",{staticClass:"box-header"},[n("h4",{staticClass:"text-primary text-center"},[t._v("通道列表("+t._s(t.name||t.devid)),t.dir_serial?n("span",[t._v(":"+t._s(t.dir_serial))]):t._e(),t._v(")")])]),t._v(" "),n("div",{staticClass:"box-body"},[n("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},["no"!=t.$getQueryString("menu")?n("div",{staticClass:"form-group form-group-sm"},[n("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.$router.go(-1)}}},[n("i",{staticClass:"fa fa-chevron-left"}),t._v(" 返回\n            ")])]):t._e(),t._v(" "),n("span",{staticClass:"hidden-xs"},[t._v("  ")]),t._v(" "),n("div",{staticClass:"form-group form-group-sm"},[n("label",[t._v("搜索")]),t._v(" "),!t.isMobile()&&t.hasAnyRole(t.serverInfo,t.userInfo,"超级管理员")?n("div",{staticClass:"input-group input-group-sm"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:t.q},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault()},input:function(e){e.target.composing||(t.q=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),n("div",{staticClass:"input-group-btn"},[n("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"导出通道列表"},on:{click:function(e){e.preventDefault(),t.$refs.downloadDlg.show(t.devid)}}},[n("i",{staticClass:"fa fa-download"})]),t._v(" "),n("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"导入通道列表"},on:{click:function(e){e.preventDefault(),t.$refs.uploadDlg.show()}}},[n("i",{staticClass:"fa fa-upload"})])])]):n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:t.q},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault()},input:function(e){e.target.composing||(t.q=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),n("span",{staticClass:"hidden-xs"},[t._v("  ")]),t._v(" "),n("div",{staticClass:"form-group form-group-sm"},[n("label",[t._v("通道类型")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.channel_type,expression:"channel_type",modifiers:{trim:!0}}],staticClass:"form-control",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.channel_type=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[t._v("全部")]),t._v(" "),n("option",{attrs:{value:"device"}},[t._v("设备")]),t._v(" "),n("option",{attrs:{value:"dir"}},[t._v("子目录")])])]),t._v(" "),n("span",{staticClass:"hidden-xs"},[t._v("  ")]),t._v(" "),n("div",{staticClass:"form-group form-group-sm"},[n("label",[t._v("在线状态")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.online,expression:"online",modifiers:{trim:!0}}],staticClass:"form-control",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.online=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[t._v("全部")]),t._v(" "),n("option",{attrs:{value:"true"}},[t._v("在线")]),t._v(" "),n("option",{attrs:{value:"false"}},[t._v("离线")])])])]),t._v(" "),n("br"),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.channels,stripe:"","default-sort":{prop:"Channel",order:"ascending"},"element-loading-text":"加载中..."},on:{"sort-change":t.sortChange}},[n("el-table-column",{attrs:{prop:"Channel",label:"通道号","min-width":"100","show-overflow-tooltip":"",sortable:"custom"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作","min-width":"260",fixed:!t.isMobile()&&"right","class-name":"opt-group"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"btn-group btn-group-xs"},[t.canPlay(e.row)?n("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:e.row.Locked},on:{click:function(n){n.preventDefault(),t.playStream(e.row)}}},[n("i",{staticClass:"fa fa-play-circle"}),t._v(" 播放\n                    ")]):t._e(),t._v(" "),e.row.StreamID&&t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(n){n.preventDefault(),t.stopStream(e.row)}}},[n("i",{staticClass:"fa fa-stop"}),t._v(" 停止\n                    ")]):t._e(),t._v(" "),t.canPlay(e.row)&&(e.row.Shared||!t.serverInfo.APIAuth||t.serverInfo.GlobalChannelShared)?n("a",{staticClass:"btn btn-warning",attrs:{href:"/play.html?serial="+e.row.DeviceID+"&code="+e.row.ID,target:"_blank"}},[n("i",{staticClass:"fa fa-share"}),t._v(" 分享页\n                    ")]):t._e(),t._v(" "),t.canPlayback(e.row)?n("router-link",{staticClass:"btn btn-info",attrs:{to:"/devices/playback/timebox/"+t.devid+"/"+e.row.ID}},[n("i",{staticClass:"fa fa-file-video-o"}),t._v(" 设备录像\n                    ")]):t._e(),t._v(" "),t.isDir(e.row)?n("router-link",{staticClass:"btn btn-info",attrs:{to:"/devices/channels/"+t.devid+"/1?dir_serial="+e.row.ID}},[n("i",{staticClass:"fa fa-info"}),t._v(" 查看子目录\n                    ")]):t._e(),t._v(" "),t.canFetchCatalog(e.row)&&t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){n.preventDefault(),t.fetchCatalog(e.row)}}},[n("i",{staticClass:"fa fa-refresh"}),t._v(" 更新通道\n                    ")]):t._e(),t._v(" "),"virtual"==e.row.Manufacturer&&t.hasAnyRole(t.serverInfo,t.userInfo,"超级管理员")?n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(n){n.preventDefault(),t.removeVirtual(e.row)}}},[n("i",{staticClass:"fa fa-remove"}),t._v(" 删除\n                    ")]):t._e()],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"ID",label:"通道国标编号","min-width":"200","show-overflow-tooltip":"",sortable:"custom"}}),t._v(" "),n("el-table-column",{attrs:{prop:"Name",label:"通道名称","min-width":"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("a",{class:{"text-orange":!!e.row.CustomName},attrs:{href:"javascript:;"},on:{click:function(n){n.preventDefault(),t.editChannelName(e.row)}}},[t._v("\n                "+t._s(e.row.CustomName||e.row.Name||"-")+"\n              ")]):n("span",[t._v("\n                "+t._s(e.row.CustomName||e.row.Name||"-")+"\n              ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{"min-width":"100",label:"快照"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isDir(e.row)?n("span",[n("i",{staticClass:"fa fa-sitemap"})]):n("el-popover",{attrs:{"open-delay":1e3,"close-delay":10,placement:"left",title:e.row.ID,width:"400",trigger:"hover"}},[n("img",{staticStyle:{width:"100%",height:"100%"},attrs:{onerror:'this.src="/images/default_snap.png"',src:e.row.SnapURL}}),t._v(" "),n("img",{staticStyle:{height:"30px",width:"50px"},attrs:{slot:"reference",onerror:'this.src="/images/default_snap.png"',src:e.row.SnapURL},slot:"reference"})])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"Status",label:"在线状态","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isDir(e.row)?n("span",[t._v("-")]):t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("span",[n("a",{class:[{"text-success":"ON"==e.row.Status,"text-orange":!!e.row.CustomStatus,"text-gray":"ON"!=(e.row.CustomStatus||e.row.Status)}],attrs:{href:"javascript:;",title:"点击查看通道状态记录"},on:{click:function(n){n.preventDefault(),t.showStatusLog(e.row)}}},[t._v("\n                  "+t._s("ON"==(e.row.CustomStatus||e.row.Status)?"在线":"离线")+"\n                ")]),t._v(" "),n("a",{class:{"text-success":"ON"==e.row.Status,"text-orange":!!e.row.CustomStatus,"text-gray":"ON"!=(e.row.CustomStatus||e.row.Status)},attrs:{href:"javascript:;",title:"点击查看通道流量统计"},on:{click:function(n){n.preventDefault(),t.showStreamLog(e.row)}}},[n("i",{staticClass:"fa fa-bar-chart"})])]):"ON"==(e.row.CustomStatus||e.row.Status)?n("span",{class:[{"text-success":"ON"==e.row.Status,"text-orange":!!e.row.CustomStatus}]},[t._v("\n                在线\n              ")]):n("span",{staticClass:"text-gray"},[t._v("\n                离线\n              ")])]}}])}),t._v(" "),!t.serverInfo.GlobalChannelAudio&&t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"AudioEnable",label:"开启音频","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{value:e.row.AudioEnable,disabled:t.isDir(e.row)},on:{change:function(n){t.toggleAudio(e.row)}}})]}}])}):t._e(),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"Ondemand",label:"按需直播","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{value:e.row.Ondemand,disabled:t.isDir(e.row)},on:{change:function(n){t.toggleOndemand(e.row)}}})]}}])}):t._e(),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")&&"标准版"!=t.serverInfo.VersionType?n("el-table-column",{attrs:{prop:"CloudRecord",label:"云端录像","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{value:e.row.CloudRecord,disabled:t.isDir(e.row)},on:{change:function(n){t.toggleCloudRecord(e.row)}}})]}}])}):t._e(),t._v(" "),!t.serverInfo.GlobalChannelShared&&t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"Shared",label:"开启分享","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{value:e.row.Shared,disabled:t.isDir(e.row)},on:{change:function(n){t.toggleShared(e.row)}}})]}}])}):t._e(),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"NumOutputs",label:"在线人数","min-width":"100"}}):t._e(),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"SubCount",label:"子节点数","min-width":"100"}}):t._e(),t._v(" "),n("el-table-column",{attrs:{prop:"Manufacturer",label:"厂家","min-width":"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{class:{"text-orange":!!e.row.CustomManufacturer}},[t._v("\n                "+t._s(e.row.CustomManufacturer||e.row.Manufacturer||"-")+"\n              ")])]}}])}),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员","操作员")?n("el-table-column",{attrs:{prop:"PTZType",label:"云台类型","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-dropdown",{attrs:{size:"small",trigger:"click"},on:{command:t.setPTZType}},[n("span",{class:["el-dropdown-link",{"text-orange":e.row.CustomPTZType}]},[t._v("\n                  "+t._s(t.formatPTZType(e.row))+" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:{row:e.row,PTZType:0}}},[t._v("0-未知")]),t._v(" "),n("el-dropdown-item",{attrs:{command:{row:e.row,PTZType:1}}},[t._v("1-球机")]),t._v(" "),n("el-dropdown-item",{attrs:{command:{row:e.row,PTZType:2}}},[t._v("2-半球机")]),t._v(" "),n("el-dropdown-item",{attrs:{command:{row:e.row,PTZType:3}}},[t._v("3-固定枪机")]),t._v(" "),n("el-dropdown-item",{attrs:{command:{row:e.row,PTZType:4}}},[t._v("4-遥控枪机")])],1)],1):n("span",{class:{"text-orange":e.row.CustumPTZType}},[t._v(t._s(t.formatPTZType(e.row)))])]}}])}):t._e(),t._v(" "),n("el-table-column",{attrs:{prop:"Longitude",label:"位置","min-width":"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("a",{class:{"text-orange":e.row.CustomLongitude||e.row.CustomLatitude},attrs:{href:"javascript:;"},on:{click:function(n){n.preventDefault(),t.editChannelPosition(e.row)}}},[t._v("\n                "+t._s(t.formatPosition(e.row))+"\n              ")]):n("span",{class:{"text-orange":e.row.CustomLongitude||e.row.CustomLatitude}},[t._v(t._s(t.formatPosition(e.row)))])]}}])}),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"UpdatedAt",label:"更新时间","min-width":"160",sortable:"custom"}}):t._e(),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"CreatedAt",label:"创建时间","min-width":"160",sortable:"custom"}}):t._e()],1)],1),t._v(" "),t.total>0?n("div",{staticClass:"box-footer"},[n("el-pagination",{staticClass:"pull-right",attrs:{layout:"total,prev,pager,next","pager-count":t.isMobile()?3:5,total:t.total,"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:pageSize":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e}}})],1):t._e()]),t._v(" "),n("ChannelExportDlg",{ref:"downloadDlg"}),t._v(" "),n("UploadDlg",{ref:"uploadDlg",attrs:{title:"上传通道列表",url:t.uploadURL},on:{uploaded:t.uploaded,hide:function(e){t.uploadThisDev=!1}}},[n("template",{attrs:{slot:"header"},slot:"header"},[t.devid?n("div",{staticClass:"checkbox text-center"},[n("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},model:{value:t.uploadThisDev,callback:function(e){t.uploadThisDev="string"==typeof e?e.trim():e},expression:"uploadThisDev"}},[t._v("\n              只导入当前设备("+t._s(t.devid)+")的通道\n          ")]),t._v(" "),n("br"),t._v(" "),n("br")],1):t._e()])],2),t._v(" "),n("ChannelNameEditDlg",{ref:"channelNameEditDlg",on:{submit:t.getChannels}}),t._v(" "),n("ChannelPositionEditDlg",{ref:"channelPositionEditDlg",on:{submit:t.getChannels}}),t._v(" "),n("VideoDlg",{ref:"videoDlg",attrs:{live:"",ptz:""}}),t._v(" "),n("DeviceLogDlg",{ref:"deviceLogDlg"})],1)},i=[],o={render:r,staticRenderFns:i};e.a=o},GiIX:function(t,e,n){var r=n("UFy2");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("6faf1056",r,!0)},GxIr:function(t,e,n){var r=n("pVOQ");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("2e0f04d7",r,!0)},HqYp:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormDlg",{ref:"dlg",attrs:{title:t.title,disabled:t.errors.any()},on:{hide:t.onHide,show:t.onShow,submit:t.onSubmit}},[n("div",{class:{"form-group":!0,"has-error":t.errors.has("parentid")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-parentid"}},[t._v("父节点\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.parent_id,expression:"form.parent_id",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"input-parentid","data-vv-as":"父节点",disabled:"disabled"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"parent_id",e.target.multiple?n:n[0])}}},[n("option",{domProps:{value:t.form.parent_id}},[t._v(t._s(t.form.parent_name))])])])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("serial")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-serial"}},[t._v("设备编号\n            "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{staticClass:"form-control",attrs:{type:"text",readonly:"readonly",id:"input-serial",name:"serial","data-vv-as":"设备编号"},domProps:{value:t.form.serial}})])]),t._v(" "),t.bImport?n("div",{class:{"form-group":!0,"has-error":t.errors.has("import_serial")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-serial"}},[t._v("导入设备\n            "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("el-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"selectDevice",staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",remote:"","remote-method":t.loadDevice,loading:t.bLoading,id:"input-import-serial",name:"import_serial","data-vv-as":"导入设备",placeholder:"搜索",size:"small"},on:{change:t.changeDevice,clear:t.clearDevice},model:{value:t.form.import_serial,callback:function(e){t.$set(t.form,"import_serial",e)},expression:"form.import_serial"}},t._l(t.devices,function(t){return n("el-option",{key:t.ID,attrs:{label:t.Name||t.ID,value:t.ID}})}))],1)]):t._e(),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("code")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-code"}},[t._v("节点编号\n            "),t.form.add?n("span",{staticClass:"text-red"},[t._v("*")]):t._e()]),t._v(" "),n("div",{staticClass:"col-sm-7"},[t.form.add?n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.code,expression:"form.code",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required|regex:^[0-9]+$",expression:"'required|regex:^[0-9]+$'"}],staticClass:"form-control",attrs:{type:"text",id:"input-code",name:"code",placeholder:t.codePlaceholder,"data-vv-as":"通道编号"},domProps:{value:t.form.code},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.$el.querySelector("#input-name").focus()},input:function(e){e.target.composing||t.$set(t.form,"code",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}):n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.code,expression:"form.code",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",readonly:"readonly",id:"input-code",name:"code","data-vv-as":"通道编号"},domProps:{value:t.form.code},on:{input:function(e){e.target.composing||t.$set(t.form,"code",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("name")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-name"}},[t._v("节点名称\n        ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.custom_name,expression:"form.custom_name",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"input-name",name:"name",placeholder:t.form.name||t.form.id,"data-vv-as":"节点名称"},domProps:{value:t.form.custom_name},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.onSubmit(e)},input:function(e){e.target.composing||t.$set(t.form,"custom_name",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])])])},i=[],o={render:r,staticRenderFns:i};e.a=o},"IaS+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Dwyu"),i=n.n(r),o=n("kyfW"),a=n("VU/8"),s=a(i.a,o.a,null,null,null);e.default=s.exports},Igbz:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("div",{staticClass:"box box-primary"},[n("div",{staticClass:"box-header"},[n("h4",{staticClass:"text-primary text-center"},[t._v("设备录像列表("+t._s(t.devid)+"-"+t._s(t.channel)+")")])]),t._v(" "),n("div",{staticClass:"box-body"},[n("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},[n("div",{staticClass:"form-group form-group-sm"},["no"!=t.$getQueryString("menu")?n("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.$router.go(-1)}}},[n("i",{staticClass:"fa fa-chevron-left"}),t._v(" 返回\n            ")]):t._e()]),t._v(" "),n("div",{staticClass:"form-group pull-right"},[n("div",{staticClass:"input-group input-group-sm"},[n("DatePicker",{ref:"datePicker",staticClass:"form-control",attrs:{day:t.day},on:{"update:day":t.updateDay}}),t._v(" "),n("div",{staticClass:"input-group-btn"},[n("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.showDatePicker(e)}}},[n("i",{staticClass:"fa fa-calendar"})]),t._v(" "),n("button",{staticClass:"btn btn-default btn-sm",on:{click:function(e){e.preventDefault(),t.toTimeView(e)}}},[n("i",{staticClass:"fa fa-hand-o-right"}),t._v(" 时间轴视图\n                      ")])])],1)])]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"clearfix"}),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.records,stripe:"","element-loading-text":"加载中..."}},[n("el-table-column",{attrs:{prop:"DeviceID",label:"通道国标编号","min-width":"200","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"操作","min-width":"190",fixed:!t.isMobile()&&"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"btn-group btn-group-xs"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:e.row.Starting},on:{click:function(n){n.preventDefault(),t.startPlayback(e.row)}}},[n("i",{staticClass:"fa fa-play-circle"}),t._v(" 播放")]),t._v(" "),n("button",{staticClass:"btn btn-info",attrs:{type:"button",disabled:e.row.Starting},on:{click:function(n){n.preventDefault(),t.downloadPlayback(e.row)}}},[n("i",{staticClass:"fa fa-download"},[t._v(" 下载")])]),t._v(" "),n("a",{staticClass:"btn btn-warning",attrs:{href:"/play.html?type=playback&ptz=no&serial="+t.devid+"&code="+e.row.DeviceID+"&starttime="+e.row.StartTime+"&endtime="+e.row.EndTime,role:"button",target:"_blank"}},[n("i",{staticClass:"fa fa-share"}),t._v(" 分享页")])])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"Name",label:"通道名称","min-width":"120",formatter:t.formatName,"show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"StartTime",label:"开始时间","min-width":"160",formatter:t.formatName}}),t._v(" "),n("el-table-column",{attrs:{prop:"EndTime",label:"结束时间","min-width":"160",formatter:t.formatName}})],1)],1)]),t._v(" "),n("PlaybackVideoDlg",{ref:"playbackVideoDlg",attrs:{live:""}}),t._v(" "),n("PlaybackDownloadDlg",{ref:"playbackDownloadDlg"})],1)},i=[],o={render:r,staticRenderFns:i};e.a=o},JkFl:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("BgxG"),i=n.n(r),o=n("kW5H"),a=n("VU/8"),s=a(i.a,o.a,null,null,null);e.default=s.exports},KToh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("tviW"),i=n.n(r),o=n("UKht"),a=n("VU/8"),s=a(i.a,o.a,null,null,null);e.default=s.exports},KWIQ:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormDlg",{ref:"dlg",attrs:{title:"编辑通道位置",disabled:t.errors.any()||t.form.custom},on:{hide:t.onHide,show:t.onShow,submit:t.onSubmit}},[n("div",{class:{"form-group":!0,"has-error":t.errors.has("serial")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-position-serial"}},[t._v("设备编号\n            "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{staticClass:"form-control",attrs:{type:"text",readonly:"readonly",id:"input-position-serial",name:"serial","data-vv-as":"设备编号"},domProps:{value:t.form.serial}})])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("code")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-position-code"}},[t._v("通道编号\n            "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{staticClass:"form-control",attrs:{type:"text",readonly:"readonly",id:"input-position-code",name:"code","data-vv-as":"通道编号"},domProps:{value:t.form.code}})])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("name")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-position-name"}},[t._v("通道名称\n        ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{staticClass:"form-control",attrs:{type:"text",readonly:"readonly",id:"input-position-name",name:"name","data-vv-as":"通道名称"},domProps:{value:t.form.name||"-"}})])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("longitude")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-position-longitude"}},[t._v("位置经度\n        ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"validate",rawName:"v-validate",value:"decimal",expression:"'decimal'"},{name:"model",rawName:"v-model.trim",value:t.form.customLongitude,expression:"form.customLongitude",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"input-position-longitude",name:"longitude",placeholder:t.form.longitude||"-","data-vv-as":"经度"},domProps:{value:t.form.customLongitude},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.$el.querySelector("#input-position-latitude").focus()},input:function(e){e.target.composing||t.$set(t.form,"customLongitude",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("latitude")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-position-latitude"}},[t._v("位置纬度\n        ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"validate",rawName:"v-validate",value:"decimal",expression:"'decimal'"},{name:"model",rawName:"v-model.trim",value:t.form.customLatitude,expression:"form.customLatitude",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"input-position-latitude",name:"latitude",placeholder:t.form.latitude||"-","data-vv-as":"纬度"},domProps:{value:t.form.customLatitude},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.onSubmit(e)},input:function(e){e.target.composing||t.$set(t.form,"customLatitude",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])])])},i=[],o={render:r,staticRenderFns:i};e.a=o},Kxr1:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"box box-primary"},[t._m(0),t._v(" "),n("div",{staticClass:"box-body"},[n("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},[n("div",{staticClass:"form-group form-group-sm"},[n("label",[t._v("搜索")]),t._v(" "),!t.isMobile()&&t.hasAnyRole(t.serverInfo,t.userInfo,"超级管理员")?n("div",{staticClass:"input-group input-group-sm"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:t.q},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault()},input:function(e){e.target.composing||(t.q=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),n("div",{staticClass:"input-group-btn"},[n("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"导出设备列表"},on:{click:function(e){e.preventDefault(),t.download(e)}}},[n("i",{staticClass:"fa fa-download"})]),t._v(" "),n("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"导入设备列表"},on:{click:function(e){e.preventDefault(),t.$refs.uploadDlg.show()}}},[n("i",{staticClass:"fa fa-upload"})])])]):n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:t.q},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault()},input:function(e){e.target.composing||(t.q=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),n("span",{staticClass:"hidden-xs"},[t._v("  ")]),t._v(" "),n("div",{staticClass:"form-group form-group-sm"},[n("label",[t._v("在线状态")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.online,expression:"online",modifiers:{trim:!0}}],staticClass:"form-control",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.online=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[t._v("全部")]),t._v(" "),n("option",{attrs:{value:"true"}},[t._v("在线")]),t._v(" "),n("option",{attrs:{value:"false"}},[t._v("离线")])])])]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"clearfix"}),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.devices,stripe:"","default-sort":{prop:"ID",order:"ascending"},"element-loading-text":"加载中..."},on:{"sort-change":t.sortChange}},[n("el-table-column",{attrs:{prop:"ID",label:"设备国标编号","min-width":"200",sortable:"custom","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"操作","min-width":t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?240:120,fixed:!t.isMobile()&&"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"btn-group btn-group-xs"},[n("router-link",{staticClass:"btn btn-info",attrs:{to:"/devices/channels/"+e.row.ID+"/1"}},[n("i",{staticClass:"fa fa-info"}),t._v(" 查看通道\n                  ")]),t._v(" "),e.row.Online&&t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){n.preventDefault(),t.fetchCatalog(e.row)}}},[n("i",{staticClass:"fa fa-refresh"}),t._v(" 更新通道\n                  ")]):t._e(),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(n){n.preventDefault(),t.editDevice(e.row)}}},[n("i",{staticClass:"fa fa-edit"}),t._v(" 编辑\n                  ")]):t._e(),t._v(" "),!e.row.Online&&t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(n){n.preventDefault(),t.removeDevice(e.row)}}},[n("i",{staticClass:"fa fa-remove"}),t._v(" 删除\n                  ")]):t._e()],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"Name",label:"名称","min-width":"140",formatter:t.formatName,"show-overflow-tooltip":""}}),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"CommandTransport",label:"信令传输","min-width":"120",formatter:t.formatName,"show-overflow-tooltip":""}}):t._e(),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"MediaTransport",label:"流传输模式","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-dropdown",{attrs:{size:"small",trigger:"click"},on:{command:t.setMediaTransport}},[n("span",{staticClass:"el-dropdown-link"},[t._v("\n                "+t._s(t.formatTransport(e.row))+" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:{row:e.row,MediaTransport:"UDP",MediaTransportMode:"passive"}}},[t._v("UDP")]),t._v(" "),n("el-dropdown-item",{attrs:{command:{row:e.row,MediaTransport:"TCP",MediaTransportMode:"passive"}}},[t._v("TCP 被动")]),t._v(" "),n("el-dropdown-item",{attrs:{command:{row:e.row,MediaTransport:"TCP",MediaTransportMode:"active"}}},[t._v("TCP 主动")])],1)],1):n("span",[t._v(t._s(t.formatTransport(e.row)))])]}}])}):t._e(),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"ChannelCount",label:"通道数","min-width":"100",sortable:"custom","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.ChannelOverLoad?n("span",{staticClass:"text-red"},[t._v("\n              "+t._s(e.row.ChannelCount)+" (授权满)\n            ")]):n("span",[t._v(t._s(e.row.ChannelCount))])]}}])}):t._e(),t._v(" "),n("el-table-column",{attrs:{prop:"Online",label:"在线状态","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("span",[n("a",{class:[{"text-success":e.row.Online,"text-gray":!e.row.Online}],attrs:{href:"javascript:;",title:"点击查看设备状态记录"},on:{click:function(n){n.preventDefault(),t.showStatusLog(e.row)}}},[t._v("\n                "+t._s(e.row.Online?"在线":"离线")+"\n              ")]),t._v(" "),n("a",{class:[{"text-success":e.row.Online,"text-gray":!e.row.Online}],attrs:{href:"javascript:;",title:"点击查看设备流量统计"},on:{click:function(n){n.preventDefault(),t.showStreamLog(e.row)}}},[n("i",{staticClass:"fa fa-bar-chart"})])]):e.row.Online?n("span",{staticClass:"text-success"},[t._v("\n              在线\n            ")]):n("span",{staticClass:"text-gray"},[t._v("\n              离线\n            ")])]}}])}),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"RemoteIP",label:"出口IP","min-width":"140","show-overflow-tooltip":""}}):t._e(),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"RemotePort",label:"端口","min-width":"100"}}):t._e(),t._v(" "),n("el-table-column",{attrs:{prop:"Manufacturer",label:"厂家","min-width":"120",formatter:t.formatName,"show-overflow-tooltip":""}}),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"LastKeepaliveAt",label:"最近心跳","min-width":"160",sortable:"custom"}}):t._e(),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"LastRegisterAt",label:"最近注册","min-width":"160",sortable:"custom"}}):t._e(),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"UpdatedAt",label:"更新时间","min-width":"160",sortable:"custom"}}):t._e(),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?n("el-table-column",{attrs:{prop:"CreatedAt",label:"创建时间","min-width":"160",sortable:"custom"}}):t._e()],1)],1),t._v(" "),t.total>0?n("div",{staticClass:"box-footer"},[n("el-pagination",{staticClass:"pull-right",attrs:{layout:"total,prev,pager,next","pager-count":t.isMobile()?3:5,total:t.total,"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:pageSize":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e}}})],1):t._e()]),t._v(" "),t.serverInfo.DemoUser?n("div",{staticClass:"alert text-center"},[t._m(1)]):t._e(),t._v(" "),n("UploadDlg",{ref:"uploadDlg",attrs:{title:"上传设备列表",url:"/api/v1/device/import"},on:{uploaded:t.uploaded}}),t._v(" "),n("DeviceEditDlg",{ref:"deviceEditDlg",attrs:{useSeparateDevicePassword:!0===t.serverInfo.UseSeparateDevicePassword},on:{submit:t.getDeviceList}}),t._v(" "),n("DeviceLogDlg",{ref:"deviceLogDlg"}),t._v(" "),n("el-dialog",{attrs:{title:"提示",visible:t.removeDlg},on:{"update:visible":function(e){t.removeDlg=e}}},[n("p",[t._v("确认删除 "+t._s(t.removeName||t.removeID)+" ?")]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"checkbox"},[n("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},model:{value:t.removeUACheck,callback:function(e){t.removeUACheck="string"==typeof e?e.trim():e},expression:"removeUACheck"}},[t._v("\n          批量删除 "),n("strong",[t._v(t._s(t.removeUA))])]),t._v(" "),n("br"),n("br"),t._v(" "),n("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.removeUACheck,expression:"removeUACheck"}],staticStyle:{"margin-left":"-19px","margin-top":"-5px"},model:{value:t.forbidUACheck,callback:function(e){t.forbidUACheck="string"==typeof e?e.trim():e},expression:"forbidUACheck"}},[t._v("\n          禁止 "),n("strong",[t._v(t._s(t.removeUA))]),t._v(" 接入\n      ")])],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.removeDlg=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.removeBatch}},[t._v("确 定")])],1)])],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box-header"},[n("h4",{staticClass:"text-primary text-center"},[t._v("设备列表")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("small",[n("strong",[n("i",{staticClass:"fa fa-info-circle"}),t._v(" 提示 : ")]),t._v('\n        可向 Redis 订阅 device 消息以获取设备实时状态 > SUBSCRIBE device; 消息内容为 "设备国标编号 ON/OFF"\n    ')])}],o={render:r,staticRenderFns:i};e.a=o},M4fF:function(t,e,n){(function(t,r){var i;(function(){function o(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function a(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function s(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function l(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function u(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function c(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function f(t,e){return!!(null==t?0:t.length)&&x(t,e,0)>-1}function d(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function v(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function p(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function h(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function m(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function g(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function _(t){return t.split("")}function y(t){return t.match(ze)||[]}function b(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function w(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function x(t,e,n){return e===e?G(t,e,n):w(t,k,n)}function C(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function k(t){return t!==t}function D(t,e){var n=null==t?0:t.length;return n?P(t,e)/n:Et}function S(t){return function(e){return null==e?it:e[t]}}function I(t){return function(e){return null==t?it:t[e]}}function T(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function L(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function P(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==it&&(n=n===it?o:n+o)}return n}function M(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function $(t,e){return v(e,function(e){return[e,t[e]]})}function N(t){return t?t.slice(0,tt(t)+1).replace(Re,""):t}function R(t){return function(e){return t(e)}}function O(t,e){return v(e,function(e){return t[e]})}function E(t,e){return t.has(e)}function A(t,e){for(var n=-1,r=t.length;++n<r&&x(e,t[n],0)>-1;);return n}function j(t,e){for(var n=t.length;n--&&x(e,t[n],0)>-1;);return n}function z(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function U(t){return"\\"+Tn[t]}function Y(t,e){return null==t?it:t[e]}function F(t){return yn.test(t)}function q(t){return bn.test(t)}function B(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function V(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function W(t,e){return function(n){return t(e(n))}}function H(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==ft||(t[n]=ft,o[i++]=n)}return o}function X(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Z(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function G(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function K(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function Q(t){return F(t)?et(t):Vn(t)}function J(t){return F(t)?nt(t):_(t)}function tt(t){for(var e=t.length;e--&&Oe.test(t.charAt(e)););return e}function et(t){for(var e=gn.lastIndex=0;gn.test(t);)++e;return e}function nt(t){return t.match(gn)||[]}function rt(t){return t.match(_n)||[]}var it,ot=200,at="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",st="Expected a function",lt="Invalid `variable` option passed into `_.template`",ut="__lodash_hash_undefined__",ct=500,ft="__lodash_placeholder__",dt=1,vt=2,pt=4,ht=1,mt=2,gt=1,_t=2,yt=4,bt=8,wt=16,xt=32,Ct=64,kt=128,Dt=256,St=512,It=30,Tt="...",Lt=800,Pt=16,Mt=1,$t=2,Nt=1/0,Rt=9007199254740991,Ot=1.7976931348623157e308,Et=NaN,At=4294967295,jt=At-1,zt=At>>>1,Ut=[["ary",kt],["bind",gt],["bindKey",_t],["curry",bt],["curryRight",wt],["flip",St],["partial",xt],["partialRight",Ct],["rearg",Dt]],Yt="[object Arguments]",Ft="[object Array]",qt="[object AsyncFunction]",Bt="[object Boolean]",Vt="[object Date]",Wt="[object DOMException]",Ht="[object Error]",Xt="[object Function]",Zt="[object GeneratorFunction]",Gt="[object Map]",Kt="[object Number]",Qt="[object Null]",Jt="[object Object]",te="[object Proxy]",ee="[object RegExp]",ne="[object Set]",re="[object String]",ie="[object Symbol]",oe="[object Undefined]",ae="[object WeakMap]",se="[object WeakSet]",le="[object ArrayBuffer]",ue="[object DataView]",ce="[object Float32Array]",fe="[object Float64Array]",de="[object Int8Array]",ve="[object Int16Array]",pe="[object Int32Array]",he="[object Uint8Array]",me="[object Uint8ClampedArray]",ge="[object Uint16Array]",_e="[object Uint32Array]",ye=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,we=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xe=/&(?:amp|lt|gt|quot|#39);/g,Ce=/[&<>"']/g,ke=RegExp(xe.source),De=RegExp(Ce.source),Se=/<%-([\s\S]+?)%>/g,Ie=/<%([\s\S]+?)%>/g,Te=/<%=([\s\S]+?)%>/g,Le=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,Me=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$e=/[\\^$.*+?()[\]{}|]/g,Ne=RegExp($e.source),Re=/^\s+/,Oe=/\s/,Ee=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ae=/\{\n\/\* \[wrapped with (.+)\] \*/,je=/,? & /,ze=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ue=/[()=,{}\[\]\/\s]/,Ye=/\\(\\)?/g,Fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qe=/\w*$/,Be=/^[-+]0x[0-9a-f]+$/i,Ve=/^0b[01]+$/i,We=/^\[object .+?Constructor\]$/,He=/^0o[0-7]+$/i,Xe=/^(?:0|[1-9]\d*)$/,Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ge=/($^)/,Ke=/['\n\r\u2028\u2029\\]/g,Qe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Je="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tn="["+Je+"]",en="["+Qe+"]",nn="[a-z\\xdf-\\xf6\\xf8-\\xff]",rn="[^\\ud800-\\udfff"+Je+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",on="\\ud83c[\\udffb-\\udfff]",an="(?:\\ud83c[\\udde6-\\uddff]){2}",sn="[\\ud800-\\udbff][\\udc00-\\udfff]",ln="[A-Z\\xc0-\\xd6\\xd8-\\xde]",un="(?:"+nn+"|"+rn+")",cn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",fn="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",an,sn].join("|")+")[\\ufe0e\\ufe0f]?"+cn+")*",dn="[\\ufe0e\\ufe0f]?"+cn+fn,vn="(?:"+["[\\u2700-\\u27bf]",an,sn].join("|")+")"+dn,pn="(?:"+["[^\\ud800-\\udfff]"+en+"?",en,an,sn,"[\\ud800-\\udfff]"].join("|")+")",hn=RegExp("['’]","g"),mn=RegExp(en,"g"),gn=RegExp(on+"(?="+on+")|"+pn+dn,"g"),_n=RegExp([ln+"?"+nn+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[tn,ln,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[tn,ln+un,"$"].join("|")+")",ln+"?"+un+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ln+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",vn].join("|"),"g"),yn=RegExp("[\\u200d\\ud800-\\udfff"+Qe+"\\ufe0e\\ufe0f]"),bn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xn=-1,Cn={};Cn[ce]=Cn[fe]=Cn[de]=Cn[ve]=Cn[pe]=Cn[he]=Cn[me]=Cn[ge]=Cn[_e]=!0,Cn[Yt]=Cn[Ft]=Cn[le]=Cn[Bt]=Cn[ue]=Cn[Vt]=Cn[Ht]=Cn[Xt]=Cn[Gt]=Cn[Kt]=Cn[Jt]=Cn[ee]=Cn[ne]=Cn[re]=Cn[ae]=!1;var kn={};kn[Yt]=kn[Ft]=kn[le]=kn[ue]=kn[Bt]=kn[Vt]=kn[ce]=kn[fe]=kn[de]=kn[ve]=kn[pe]=kn[Gt]=kn[Kt]=kn[Jt]=kn[ee]=kn[ne]=kn[re]=kn[ie]=kn[he]=kn[me]=kn[ge]=kn[_e]=!0,kn[Ht]=kn[Xt]=kn[ae]=!1;var Dn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Sn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},In={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Tn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ln=parseFloat,Pn=parseInt,Mn="object"==typeof t&&t&&t.Object===Object&&t,$n="object"==typeof self&&self&&self.Object===Object&&self,Nn=Mn||$n||Function("return this")(),Rn="object"==typeof e&&e&&!e.nodeType&&e,On=Rn&&"object"==typeof r&&r&&!r.nodeType&&r,En=On&&On.exports===Rn,An=En&&Mn.process,jn=function(){try{var t=On&&On.require&&On.require("util").types;return t||An&&An.binding&&An.binding("util")}catch(t){}}(),zn=jn&&jn.isArrayBuffer,Un=jn&&jn.isDate,Yn=jn&&jn.isMap,Fn=jn&&jn.isRegExp,qn=jn&&jn.isSet,Bn=jn&&jn.isTypedArray,Vn=S("length"),Wn=I(Dn),Hn=I(Sn),Xn=I(In),Zn=function t(e){function n(t){if(rl(t)&&!hd(t)&&!(t instanceof _)){if(t instanceof i)return t;if(pc.call(t,"__wrapped__"))return ta(t)}return new i(t)}function r(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=it}function _(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=At,this.__views__=[]}function I(){var t=new _(this.__wrapped__);return t.__actions__=Ri(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ri(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ri(this.__views__),t}function G(){if(this.__filtered__){var t=new _(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function et(){var t=this.__wrapped__.value(),e=this.__dir__,n=hd(t),r=e<0,i=n?t.length:0,o=ko(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,f=c.length,d=0,v=Bc(l,this.__takeCount__);if(!n||!r&&i==l&&v==l)return gi(t,this.__actions__);var p=[];t:for(;l--&&d<v;){u+=e;for(var h=-1,m=t[u];++h<f;){var g=c[h],_=g.iteratee,y=g.type,b=_(m);if(y==$t)m=b;else if(!b){if(y==Mt)continue t;break t}}p[d++]=m}return p}function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Oe(){this.__data__=tf?tf(null):{},this.size=0}function ze(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Qe(t){var e=this.__data__;if(tf){var n=e[t];return n===ut?it:n}return pc.call(e,t)?e[t]:it}function Je(t){var e=this.__data__;return tf?e[t]!==it:pc.call(e,t)}function tn(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=tf&&e===it?ut:e,this}function en(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nn(){this.__data__=[],this.size=0}function rn(t){var e=this.__data__,n=Vn(e,t);return!(n<0)&&(n==e.length-1?e.pop():Tc.call(e,n,1),--this.size,!0)}function on(t){var e=this.__data__,n=Vn(e,t);return n<0?it:e[n][1]}function an(t){return Vn(this.__data__,t)>-1}function sn(t,e){var n=this.__data__,r=Vn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function ln(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function un(){this.size=0,this.__data__={hash:new nt,map:new(Gc||en),string:new nt}}function cn(t){var e=bo(this,t).delete(t);return this.size-=e?1:0,e}function fn(t){return bo(this,t).get(t)}function dn(t){return bo(this,t).has(t)}function vn(t,e){var n=bo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function pn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ln;++e<n;)this.add(t[e])}function gn(t){return this.__data__.set(t,ut),this}function _n(t){return this.__data__.has(t)}function yn(t){var e=this.__data__=new en(t);this.size=e.size}function bn(){this.__data__=new en,this.size=0}function Dn(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Sn(t){return this.__data__.get(t)}function In(t){return this.__data__.has(t)}function Tn(t,e){var n=this.__data__;if(n instanceof en){var r=n.__data__;if(!Gc||r.length<ot-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ln(r)}return n.set(t,e),this.size=n.size,this}function Mn(t,e){var n=hd(t),r=!n&&pd(t),i=!n&&!r&&gd(t),o=!n&&!r&&!i&&xd(t),a=n||r||i||o,s=a?M(t.length,sc):[],l=s.length;for(var u in t)!e&&!pc.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||$o(u,l))||s.push(u);return s}function $n(t){var e=t.length;return e?t[Qr(0,e-1)]:it}function Rn(t,e){return Go(Ri(t),er(e,0,t.length))}function On(t){return Go(Ri(t))}function An(t,e,n){(n===it||qs(t[e],n))&&(n!==it||e in t)||Jn(t,e,n)}function jn(t,e,n){var r=t[e];pc.call(t,e)&&qs(r,n)&&(n!==it||e in t)||Jn(t,e,n)}function Vn(t,e){for(var n=t.length;n--;)if(qs(t[n][0],e))return n;return-1}function Gn(t,e,n,r){return vf(t,function(t,i,o){e(r,t,n(t),o)}),r}function Kn(t,e){return t&&Oi(e,jl(e),t)}function Qn(t,e){return t&&Oi(e,zl(e),t)}function Jn(t,e,n){"__proto__"==e&&$c?$c(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function tr(t,e){for(var n=-1,r=e.length,i=tc(r),o=null==t;++n<r;)i[n]=o?it:Ol(t,e[n]);return i}function er(t,e,n){return t===t&&(n!==it&&(t=t<=n?t:n),e!==it&&(t=t>=e?t:e)),t}function nr(t,e,n,r,i,o){var a,l=e&dt,u=e&vt,c=e&pt;if(n&&(a=i?n(t,r,i,o):n(t)),a!==it)return a;if(!nl(t))return t;var f=hd(t);if(f){if(a=Io(t),!l)return Ri(t,a)}else{var d=Df(t),v=d==Xt||d==Zt;if(gd(t))return ki(t,l);if(d==Jt||d==Yt||v&&!i){if(a=u||v?{}:To(t),!l)return u?Ai(t,Qn(a,t)):Ei(t,Kn(a,t))}else{if(!kn[d])return i?t:{};a=Lo(t,d,l)}}o||(o=new yn);var p=o.get(t);if(p)return p;o.set(t,a),wd(t)?t.forEach(function(r){a.add(nr(r,e,n,r,t,o))}):yd(t)&&t.forEach(function(r,i){a.set(i,nr(r,e,n,i,t,o))});var h=c?u?mo:ho:u?zl:jl,m=f?it:h(t);return s(m||t,function(r,i){m&&(i=r,r=t[i]),jn(a,i,nr(r,e,n,i,t,o))}),a}function rr(t){var e=jl(t);return function(n){return ir(n,t,e)}}function ir(t,e,n){var r=n.length;if(null==t)return!r;for(t=oc(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===it&&!(i in t)||!o(a))return!1}return!0}function or(t,e,n){if("function"!=typeof t)throw new lc(st);return Tf(function(){t.apply(it,n)},e)}function ar(t,e,n,r){var i=-1,o=f,a=!0,s=t.length,l=[],u=e.length;if(!s)return l;n&&(e=v(e,R(n))),r?(o=d,a=!1):e.length>=ot&&(o=E,a=!1,e=new pn(e));t:for(;++i<s;){var c=t[i],p=null==n?c:n(c);if(c=r||0!==c?c:0,a&&p===p){for(var h=u;h--;)if(e[h]===p)continue t;l.push(c)}else o(e,p,r)||l.push(c)}return l}function sr(t,e){var n=!0;return vf(t,function(t,r,i){return n=!!e(t,r,i)}),n}function lr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===it?a===a&&!pl(a):n(a,s)))var s=a,l=o}return l}function ur(t,e,n,r){var i=t.length;for(n=bl(n),n<0&&(n=-n>i?0:i+n),r=r===it||r>i?i:bl(r),r<0&&(r+=i),r=n>r?0:wl(r);n<r;)t[n++]=e;return t}function cr(t,e){var n=[];return vf(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function fr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Mo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?fr(s,e-1,n,r,i):p(i,s):r||(i[i.length]=s)}return i}function dr(t,e){return t&&hf(t,e,jl)}function vr(t,e){return t&&mf(t,e,jl)}function pr(t,e){return c(e,function(e){return Js(t[e])})}function hr(t,e){e=xi(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[Ko(e[n++])];return n&&n==r?t:it}function mr(t,e,n){var r=e(t);return hd(t)?r:p(r,n(t))}function gr(t){return null==t?t===it?oe:Qt:Mc&&Mc in oc(t)?Co(t):qo(t)}function _r(t,e){return t>e}function yr(t,e){return null!=t&&pc.call(t,e)}function br(t,e){return null!=t&&e in oc(t)}function wr(t,e,n){return t>=Bc(e,n)&&t<qc(e,n)}function xr(t,e,n){for(var r=n?d:f,i=t[0].length,o=t.length,a=o,s=tc(o),l=1/0,u=[];a--;){var c=t[a];a&&e&&(c=v(c,R(e))),l=Bc(c.length,l),s[a]=!n&&(e||i>=120&&c.length>=120)?new pn(a&&c):it}c=t[0];var p=-1,h=s[0];t:for(;++p<i&&u.length<l;){var m=c[p],g=e?e(m):m;if(m=n||0!==m?m:0,!(h?E(h,g):r(u,g,n))){for(a=o;--a;){var _=s[a];if(!(_?E(_,g):r(t[a],g,n)))continue t}h&&h.push(g),u.push(m)}}return u}function Cr(t,e,n,r){return dr(t,function(t,i,o){e(r,n(t),i,o)}),r}function kr(t,e,n){e=xi(e,t),t=Vo(t,e);var r=null==t?t:t[Ko(ya(e))];return null==r?it:o(r,t,n)}function Dr(t){return rl(t)&&gr(t)==Yt}function Sr(t){return rl(t)&&gr(t)==le}function Ir(t){return rl(t)&&gr(t)==Vt}function Tr(t,e,n,r,i){return t===e||(null==t||null==e||!rl(t)&&!rl(e)?t!==t&&e!==e:Lr(t,e,n,r,Tr,i))}function Lr(t,e,n,r,i,o){var a=hd(t),s=hd(e),l=a?Ft:Df(t),u=s?Ft:Df(e);l=l==Yt?Jt:l,u=u==Yt?Jt:u;var c=l==Jt,f=u==Jt,d=l==u;if(d&&gd(t)){if(!gd(e))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new yn),a||xd(t)?co(t,e,n,r,i,o):fo(t,e,l,n,r,i,o);if(!(n&ht)){var v=c&&pc.call(t,"__wrapped__"),p=f&&pc.call(e,"__wrapped__");if(v||p){var h=v?t.value():t,m=p?e.value():e;return o||(o=new yn),i(h,m,n,r,o)}}return!!d&&(o||(o=new yn),vo(t,e,n,r,i,o))}function Pr(t){return rl(t)&&Df(t)==Gt}function Mr(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=oc(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var l=s[0],u=t[l],c=s[1];if(a&&s[2]){if(u===it&&!(l in t))return!1}else{var f=new yn;if(r)var d=r(u,c,l,t,e,f);if(!(d===it?Tr(c,u,ht|mt,r,f):d))return!1}}return!0}function $r(t){return!(!nl(t)||Ao(t))&&(Js(t)?bc:We).test(Qo(t))}function Nr(t){return rl(t)&&gr(t)==ee}function Rr(t){return rl(t)&&Df(t)==ne}function Or(t){return rl(t)&&el(t.length)&&!!Cn[gr(t)]}function Er(t){return"function"==typeof t?t:null==t?Tu:"object"==typeof t?hd(t)?Fr(t[0],t[1]):Yr(t):Eu(t)}function Ar(t){if(!jo(t))return Fc(t);var e=[];for(var n in oc(t))pc.call(t,n)&&"constructor"!=n&&e.push(n);return e}function jr(t){if(!nl(t))return Fo(t);var e=jo(t),n=[];for(var r in t)("constructor"!=r||!e&&pc.call(t,r))&&n.push(r);return n}function zr(t,e){return t<e}function Ur(t,e){var n=-1,r=Bs(t)?tc(t.length):[];return vf(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Yr(t){var e=wo(t);return 1==e.length&&e[0][2]?Uo(e[0][0],e[0][1]):function(n){return n===t||Mr(n,t,e)}}function Fr(t,e){return Ro(t)&&zo(e)?Uo(Ko(t),e):function(n){var r=Ol(n,t);return r===it&&r===e?Al(n,t):Tr(e,r,ht|mt)}}function qr(t,e,n,r,i){t!==e&&hf(e,function(o,a){if(i||(i=new yn),nl(o))Br(t,e,a,n,qr,r,i);else{var s=r?r(Ho(t,a),o,a+"",t,e,i):it;s===it&&(s=o),An(t,a,s)}},zl)}function Br(t,e,n,r,i,o,a){var s=Ho(t,n),l=Ho(e,n),u=a.get(l);if(u)return void An(t,n,u);var c=o?o(s,l,n+"",t,e,a):it,f=c===it;if(f){var d=hd(l),v=!d&&gd(l),p=!d&&!v&&xd(l);c=l,d||v||p?hd(s)?c=s:Vs(s)?c=Ri(s):v?(f=!1,c=ki(l,!0)):p?(f=!1,c=Li(l,!0)):c=[]:fl(l)||pd(l)?(c=s,pd(s)?c=Cl(s):nl(s)&&!Js(s)||(c=To(l))):f=!1}f&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),An(t,n,c)}function Vr(t,e){var n=t.length;if(n)return e+=e<0?n:0,$o(e,n)?t[e]:it}function Wr(t,e,n){e=e.length?v(e,function(t){return hd(t)?function(e){return hr(e,1===t.length?t[0]:t)}:t}):[Tu];var r=-1;return e=v(e,R(yo())),L(Ur(t,function(t,n,i){return{criteria:v(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return Mi(t,e,n)})}function Hr(t,e){return Xr(t,e,function(e,n){return Al(t,n)})}function Xr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=hr(t,a);n(s,a)&&ii(o,xi(a,t),s)}return o}function Zr(t){return function(e){return hr(e,t)}}function Gr(t,e,n,r){var i=r?C:x,o=-1,a=e.length,s=t;for(t===e&&(e=Ri(e)),n&&(s=v(t,R(n)));++o<a;)for(var l=0,u=e[o],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==t&&Tc.call(s,l,1),Tc.call(t,l,1);return t}function Kr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;$o(i)?Tc.call(t,i,1):pi(t,i)}}return t}function Qr(t,e){return t+Ac(Hc()*(e-t+1))}function Jr(t,e,n,r){for(var i=-1,o=qc(Ec((e-t)/(n||1)),0),a=tc(o);o--;)a[r?o:++i]=t,t+=n;return a}function ti(t,e){var n="";if(!t||e<1||e>Rt)return n;do{e%2&&(n+=t),(e=Ac(e/2))&&(t+=t)}while(e);return n}function ei(t,e){return Lf(Bo(t,e,Tu),t+"")}function ni(t){return $n(Kl(t))}function ri(t,e){var n=Kl(t);return Go(n,er(e,0,n.length))}function ii(t,e,n,r){if(!nl(t))return t;e=xi(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var l=Ko(e[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(i!=a){var c=s[l];u=r?r(c,l,s):it,u===it&&(u=nl(c)?c:$o(e[i+1])?[]:{})}jn(s,l,u),s=s[l]}return t}function oi(t){return Go(Kl(t))}function ai(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=tc(i);++r<i;)o[r]=t[r+e];return o}function si(t,e){var n;return vf(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function li(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=zt){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!pl(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ui(t,e,Tu,n)}function ui(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;e=n(e);for(var a=e!==e,s=null===e,l=pl(e),u=e===it;i<o;){var c=Ac((i+o)/2),f=n(t[c]),d=f!==it,v=null===f,p=f===f,h=pl(f);if(a)var m=r||p;else m=u?p&&(r||d):s?p&&d&&(r||!v):l?p&&d&&!v&&(r||!h):!v&&!h&&(r?f<=e:f<e);m?i=c+1:o=c}return Bc(o,jt)}function ci(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!qs(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function fi(t){return"number"==typeof t?t:pl(t)?Et:+t}function di(t){if("string"==typeof t)return t;if(hd(t))return v(t,di)+"";if(pl(t))return ff?ff.call(t):"";var e=t+"";return"0"==e&&1/t==-Nt?"-0":e}function vi(t,e,n){var r=-1,i=f,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=d;else if(o>=ot){var u=e?null:wf(t);if(u)return X(u);a=!1,i=E,l=new pn}else l=e?[]:s;t:for(;++r<o;){var c=t[r],v=e?e(c):c;if(c=n||0!==c?c:0,a&&v===v){for(var p=l.length;p--;)if(l[p]===v)continue t;e&&l.push(v),s.push(c)}else i(l,v,n)||(l!==s&&l.push(v),s.push(c))}return s}function pi(t,e){return e=xi(e,t),null==(t=Vo(t,e))||delete t[Ko(ya(e))]}function hi(t,e,n,r){return ii(t,e,n(hr(t,e)),r)}function mi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ai(t,r?0:o,r?o+1:i):ai(t,r?o+1:0,r?i:o)}function gi(t,e){var n=t;return n instanceof _&&(n=n.value()),h(e,function(t,e){return e.func.apply(e.thisArg,p([t],e.args))},n)}function _i(t,e,n){var r=t.length;if(r<2)return r?vi(t[0]):[];for(var i=-1,o=tc(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=ar(o[i]||a,t[s],e,n));return vi(fr(o,1),e,n)}function yi(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:it;n(a,t[r],s)}return a}function bi(t){return Vs(t)?t:[]}function wi(t){return"function"==typeof t?t:Tu}function xi(t,e){return hd(t)?t:Ro(t,e)?[t]:Pf(Dl(t))}function Ci(t,e,n){var r=t.length;return n=n===it?r:n,!e&&n>=r?t:ai(t,e,n)}function ki(t,e){if(e)return t.slice();var n=t.length,r=kc?kc(n):new t.constructor(n);return t.copy(r),r}function Di(t){var e=new t.constructor(t.byteLength);return new Cc(e).set(new Cc(t)),e}function Si(t,e){var n=e?Di(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Ii(t){var e=new t.constructor(t.source,qe.exec(t));return e.lastIndex=t.lastIndex,e}function Ti(t){return cf?oc(cf.call(t)):{}}function Li(t,e){var n=e?Di(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Pi(t,e){if(t!==e){var n=t!==it,r=null===t,i=t===t,o=pl(t),a=e!==it,s=null===e,l=e===e,u=pl(e);if(!s&&!u&&!o&&t>e||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function Mi(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=Pi(i[r],o[r]);if(l){if(r>=s)return l;return l*("desc"==n[r]?-1:1)}}return t.index-e.index}function $i(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,l=e.length,u=qc(o-a,0),c=tc(l+u),f=!r;++s<l;)c[s]=e[s];for(;++i<a;)(f||i<o)&&(c[n[i]]=t[i]);for(;u--;)c[s++]=t[i++];return c}function Ni(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,l=-1,u=e.length,c=qc(o-s,0),f=tc(c+u),d=!r;++i<c;)f[i]=t[i];for(var v=i;++l<u;)f[v+l]=e[l];for(;++a<s;)(d||i<o)&&(f[v+n[a]]=t[i++]);return f}function Ri(t,e){var n=-1,r=t.length;for(e||(e=tc(r));++n<r;)e[n]=t[n];return e}function Oi(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):it;l===it&&(l=t[s]),i?Jn(n,s,l):jn(n,s,l)}return n}function Ei(t,e){return Oi(t,Cf(t),e)}function Ai(t,e){return Oi(t,kf(t),e)}function ji(t,e){return function(n,r){var i=hd(n)?a:Gn,o=e?e():{};return i(n,t,yo(r,2),o)}}function zi(t){return ei(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:it,a=i>2?n[2]:it;for(o=t.length>3&&"function"==typeof o?(i--,o):it,a&&No(n[0],n[1],a)&&(o=i<3?it:o,i=1),e=oc(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Ui(t,e){return function(n,r){if(null==n)return n;if(!Bs(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=oc(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Yi(t){return function(e,n,r){for(var i=-1,o=oc(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}function Fi(t,e,n){function r(){return(this&&this!==Nn&&this instanceof r?o:t).apply(i?n:this,arguments)}var i=e&gt,o=Vi(t);return r}function qi(t){return function(e){e=Dl(e);var n=F(e)?J(e):it,r=n?n[0]:e.charAt(0),i=n?Ci(n,1).join(""):e.slice(1);return r[t]()+i}}function Bi(t){return function(e){return h(Cu(ru(e).replace(hn,"")),t,"")}}function Vi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=df(t.prototype),r=t.apply(n,e);return nl(r)?r:n}}function Wi(t,e,n){function r(){for(var a=arguments.length,s=tc(a),l=a,u=_o(r);l--;)s[l]=arguments[l];var c=a<3&&s[0]!==u&&s[a-1]!==u?[]:H(s,u);return(a-=c.length)<n?ro(t,e,Zi,r.placeholder,it,s,c,it,it,n-a):o(this&&this!==Nn&&this instanceof r?i:t,this,s)}var i=Vi(t);return r}function Hi(t){return function(e,n,r){var i=oc(e);if(!Bs(e)){var o=yo(n,3);e=jl(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:it}}function Xi(t){return po(function(e){var n=e.length,r=n,o=i.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new lc(st);if(o&&!s&&"wrapper"==go(a))var s=new i([],!0)}for(r=s?r:n;++r<n;){a=e[r];var l=go(a),u="wrapper"==l?xf(a):it;s=u&&Eo(u[0])&&u[1]==(kt|bt|xt|Dt)&&!u[4].length&&1==u[9]?s[go(u[0])].apply(s,u[3]):1==a.length&&Eo(a)?s[l]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&hd(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function Zi(t,e,n,r,i,o,a,s,l,u){function c(){for(var g=arguments.length,_=tc(g),y=g;y--;)_[y]=arguments[y];if(p)var b=_o(c),w=z(_,b);if(r&&(_=$i(_,r,i,p)),o&&(_=Ni(_,o,a,p)),g-=w,p&&g<u){var x=H(_,b);return ro(t,e,Zi,c.placeholder,n,_,x,s,l,u-g)}var C=d?n:this,k=v?C[t]:t;return g=_.length,s?_=Wo(_,s):h&&g>1&&_.reverse(),f&&l<g&&(_.length=l),this&&this!==Nn&&this instanceof c&&(k=m||Vi(k)),k.apply(C,_)}var f=e&kt,d=e&gt,v=e&_t,p=e&(bt|wt),h=e&St,m=v?it:Vi(t);return c}function Gi(t,e){return function(n,r){return Cr(n,t,e(r),{})}}function Ki(t,e){return function(n,r){var i;if(n===it&&r===it)return e;if(n!==it&&(i=n),r!==it){if(i===it)return r;"string"==typeof n||"string"==typeof r?(n=di(n),r=di(r)):(n=fi(n),r=fi(r)),i=t(n,r)}return i}}function Qi(t){return po(function(e){return e=v(e,R(yo())),ei(function(n){var r=this;return t(e,function(t){return o(t,r,n)})})})}function Ji(t,e){e=e===it?" ":di(e);var n=e.length;if(n<2)return n?ti(e,t):e;var r=ti(e,Ec(t/Q(e)));return F(e)?Ci(J(r),0,t).join(""):r.slice(0,t)}function to(t,e,n,r){function i(){for(var e=-1,l=arguments.length,u=-1,c=r.length,f=tc(c+l),d=this&&this!==Nn&&this instanceof i?s:t;++u<c;)f[u]=r[u];for(;l--;)f[u++]=arguments[++e];return o(d,a?n:this,f)}var a=e&gt,s=Vi(t);return i}function eo(t){return function(e,n,r){return r&&"number"!=typeof r&&No(e,n,r)&&(n=r=it),e=yl(e),n===it?(n=e,e=0):n=yl(n),r=r===it?e<n?1:-1:yl(r),Jr(e,n,r,t)}}function no(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=xl(e),n=xl(n)),t(e,n)}}function ro(t,e,n,r,i,o,a,s,l,u){var c=e&bt,f=c?a:it,d=c?it:a,v=c?o:it,p=c?it:o;e|=c?xt:Ct,(e&=~(c?Ct:xt))&yt||(e&=~(gt|_t));var h=[t,e,i,v,f,p,d,s,l,u],m=n.apply(it,h);return Eo(t)&&If(m,h),m.placeholder=r,Xo(m,t,e)}function io(t){var e=ic[t];return function(t,n){if(t=xl(t),(n=null==n?0:Bc(bl(n),292))&&Uc(t)){var r=(Dl(t)+"e").split("e");return r=(Dl(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function oo(t){return function(e){var n=Df(e);return n==Gt?V(e):n==ne?Z(e):$(e,t(e))}}function ao(t,e,n,r,i,o,a,s){var l=e&_t;if(!l&&"function"!=typeof t)throw new lc(st);var u=r?r.length:0;if(u||(e&=~(xt|Ct),r=i=it),a=a===it?a:qc(bl(a),0),s=s===it?s:bl(s),u-=i?i.length:0,e&Ct){var c=r,f=i;r=i=it}var d=l?it:xf(t),v=[t,e,n,r,i,c,f,o,a,s];if(d&&Yo(v,d),t=v[0],e=v[1],n=v[2],r=v[3],i=v[4],s=v[9]=v[9]===it?l?0:t.length:qc(v[9]-u,0),!s&&e&(bt|wt)&&(e&=~(bt|wt)),e&&e!=gt)p=e==bt||e==wt?Wi(t,e,s):e!=xt&&e!=(gt|xt)||i.length?Zi.apply(it,v):to(t,e,n,r);else var p=Fi(t,e,n);return Xo((d?gf:If)(p,v),t,e)}function so(t,e,n,r){return t===it||qs(t,fc[n])&&!pc.call(r,n)?e:t}function lo(t,e,n,r,i,o){return nl(t)&&nl(e)&&(o.set(e,t),qr(t,e,it,lo,o),o.delete(e)),t}function uo(t){return fl(t)?it:t}function co(t,e,n,r,i,o){var a=n&ht,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var f=-1,d=!0,v=n&mt?new pn:it;for(o.set(t,e),o.set(e,t);++f<s;){var p=t[f],h=e[f];if(r)var m=a?r(h,p,f,e,t,o):r(p,h,f,t,e,o);if(m!==it){if(m)continue;d=!1;break}if(v){if(!g(e,function(t,e){if(!E(v,e)&&(p===t||i(p,t,n,r,o)))return v.push(e)})){d=!1;break}}else if(p!==h&&!i(p,h,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function fo(t,e,n,r,i,o,a){switch(n){case ue:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case le:return!(t.byteLength!=e.byteLength||!o(new Cc(t),new Cc(e)));case Bt:case Vt:case Kt:return qs(+t,+e);case Ht:return t.name==e.name&&t.message==e.message;case ee:case re:return t==e+"";case Gt:var s=V;case ne:var l=r&ht;if(s||(s=X),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=mt,a.set(t,e);var c=co(s(t),s(e),r,i,o,a);return a.delete(t),c;case ie:if(cf)return cf.call(t)==cf.call(e)}return!1}function vo(t,e,n,r,i,o){var a=n&ht,s=ho(t),l=s.length;if(l!=ho(e).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in e:pc.call(e,c)))return!1}var f=o.get(t),d=o.get(e);if(f&&d)return f==e&&d==t;var v=!0;o.set(t,e),o.set(e,t);for(var p=a;++u<l;){c=s[u];var h=t[c],m=e[c];if(r)var g=a?r(m,h,c,e,t,o):r(h,m,c,t,e,o);if(!(g===it?h===m||i(h,m,n,r,o):g)){v=!1;break}p||(p="constructor"==c)}if(v&&!p){var _=t.constructor,y=e.constructor;_!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y)&&(v=!1)}return o.delete(t),o.delete(e),v}function po(t){return Lf(Bo(t,it,fa),t+"")}function ho(t){return mr(t,jl,Cf)}function mo(t){return mr(t,zl,kf)}function go(t){for(var e=t.name+"",n=nf[e],r=pc.call(nf,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function _o(t){return(pc.call(n,"placeholder")?n:t).placeholder}function yo(){var t=n.iteratee||Lu;return t=t===Lu?Er:t,arguments.length?t(arguments[0],arguments[1]):t}function bo(t,e){var n=t.__data__;return Oo(e)?n["string"==typeof e?"string":"hash"]:n.map}function wo(t){for(var e=jl(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,zo(i)]}return e}function xo(t,e){var n=Y(t,e);return $r(n)?n:it}function Co(t){var e=pc.call(t,Mc),n=t[Mc];try{t[Mc]=it;var r=!0}catch(t){}var i=gc.call(t);return r&&(e?t[Mc]=n:delete t[Mc]),i}function ko(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Bc(e,t+a);break;case"takeRight":t=qc(t,e-a)}}return{start:t,end:e}}function Do(t){var e=t.match(Ae);return e?e[1].split(je):[]}function So(t,e,n){e=xi(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=Ko(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&el(i)&&$o(a,i)&&(hd(t)||pd(t))}function Io(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&pc.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function To(t){return"function"!=typeof t.constructor||jo(t)?{}:df(Dc(t))}function Lo(t,e,n){var r=t.constructor;switch(e){case le:return Di(t);case Bt:case Vt:return new r(+t);case ue:return Si(t,n);case ce:case fe:case de:case ve:case pe:case he:case me:case ge:case _e:return Li(t,n);case Gt:return new r;case Kt:case re:return new r(t);case ee:return Ii(t);case ne:return new r;case ie:return Ti(t)}}function Po(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Ee,"{\n/* [wrapped with "+e+"] */\n")}function Mo(t){return hd(t)||pd(t)||!!(Lc&&t&&t[Lc])}function $o(t,e){var n=typeof t;return!!(e=null==e?Rt:e)&&("number"==n||"symbol"!=n&&Xe.test(t))&&t>-1&&t%1==0&&t<e}function No(t,e,n){if(!nl(n))return!1;var r=typeof e;return!!("number"==r?Bs(n)&&$o(e,n.length):"string"==r&&e in n)&&qs(n[e],t)}function Ro(t,e){if(hd(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!pl(t))||(Pe.test(t)||!Le.test(t)||null!=e&&t in oc(e))}function Oo(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Eo(t){var e=go(t),r=n[e];if("function"!=typeof r||!(e in _.prototype))return!1;if(t===r)return!0;var i=xf(r);return!!i&&t===i[0]}function Ao(t){return!!mc&&mc in t}function jo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||fc)}function zo(t){return t===t&&!nl(t)}function Uo(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==it||t in oc(n)))}}function Yo(t,e){var n=t[1],r=e[1],i=n|r,o=i<(gt|_t|kt),a=r==kt&&n==bt||r==kt&&n==Dt&&t[7].length<=e[8]||r==(kt|Dt)&&e[7].length<=e[8]&&n==bt;if(!o&&!a)return t;r&gt&&(t[2]=e[2],i|=n&gt?0:yt);var s=e[3];if(s){var l=t[3];t[3]=l?$i(l,s,e[4]):s,t[4]=l?H(t[3],ft):e[4]}return s=e[5],s&&(l=t[5],t[5]=l?Ni(l,s,e[6]):s,t[6]=l?H(t[5],ft):e[6]),s=e[7],s&&(t[7]=s),r&kt&&(t[8]=null==t[8]?e[8]:Bc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Fo(t){var e=[];if(null!=t)for(var n in oc(t))e.push(n);return e}function qo(t){return gc.call(t)}function Bo(t,e,n){return e=qc(e===it?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=qc(r.length-e,0),s=tc(a);++i<a;)s[i]=r[e+i];i=-1;for(var l=tc(e+1);++i<e;)l[i]=r[i];return l[e]=n(s),o(t,this,l)}}function Vo(t,e){return e.length<2?t:hr(t,ai(e,0,-1))}function Wo(t,e){for(var n=t.length,r=Bc(e.length,n),i=Ri(t);r--;){var o=e[r];t[r]=$o(o,n)?i[o]:it}return t}function Ho(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Xo(t,e,n){var r=e+"";return Lf(t,Po(r,Jo(Do(r),n)))}function Zo(t){var e=0,n=0;return function(){var r=Vc(),i=Pt-(r-n);if(n=r,i>0){if(++e>=Lt)return arguments[0]}else e=0;return t.apply(it,arguments)}}function Go(t,e){var n=-1,r=t.length,i=r-1;for(e=e===it?r:e;++n<e;){var o=Qr(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function Ko(t){if("string"==typeof t||pl(t))return t;var e=t+"";return"0"==e&&1/t==-Nt?"-0":e}function Qo(t){if(null!=t){try{return vc.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Jo(t,e){return s(Ut,function(n){var r="_."+n[0];e&n[1]&&!f(t,r)&&t.push(r)}),t.sort()}function ta(t){if(t instanceof _)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=Ri(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function ea(t,e,n){e=(n?No(t,e,n):e===it)?1:qc(bl(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=tc(Ec(r/e));i<r;)a[o++]=ai(t,i,i+=e);return a}function na(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function ra(){var t=arguments.length;if(!t)return[];for(var e=tc(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return p(hd(n)?Ri(n):[n],fr(e,1))}function ia(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:bl(e),ai(t,e<0?0:e,r)):[]}function oa(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:bl(e),e=r-e,ai(t,0,e<0?0:e)):[]}function aa(t,e){return t&&t.length?mi(t,yo(e,3),!0,!0):[]}function sa(t,e){return t&&t.length?mi(t,yo(e,3),!0):[]}function la(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&No(t,e,n)&&(n=0,r=i),ur(t,e,n,r)):[]}function ua(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:bl(n);return i<0&&(i=qc(r+i,0)),w(t,yo(e,3),i)}function ca(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==it&&(i=bl(n),i=n<0?qc(r+i,0):Bc(i,r-1)),w(t,yo(e,3),i,!0)}function fa(t){return(null==t?0:t.length)?fr(t,1):[]}function da(t){return(null==t?0:t.length)?fr(t,Nt):[]}function va(t,e){return(null==t?0:t.length)?(e=e===it?1:bl(e),fr(t,e)):[]}function pa(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function ha(t){return t&&t.length?t[0]:it}function ma(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:bl(n);return i<0&&(i=qc(r+i,0)),x(t,e,i)}function ga(t){return(null==t?0:t.length)?ai(t,0,-1):[]}function _a(t,e){return null==t?"":Yc.call(t,e)}function ya(t){var e=null==t?0:t.length;return e?t[e-1]:it}function ba(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==it&&(i=bl(n),i=i<0?qc(r+i,0):Bc(i,r-1)),e===e?K(t,e,i):w(t,k,i,!0)}function wa(t,e){return t&&t.length?Vr(t,bl(e)):it}function xa(t,e){return t&&t.length&&e&&e.length?Gr(t,e):t}function Ca(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,yo(n,2)):t}function ka(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,it,n):t}function Da(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=yo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Kr(t,i),n}function Sa(t){return null==t?t:Xc.call(t)}function Ia(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&No(t,e,n)?(e=0,n=r):(e=null==e?0:bl(e),n=n===it?r:bl(n)),ai(t,e,n)):[]}function Ta(t,e){return li(t,e)}function La(t,e,n){return ui(t,e,yo(n,2))}function Pa(t,e){var n=null==t?0:t.length;if(n){var r=li(t,e);if(r<n&&qs(t[r],e))return r}return-1}function Ma(t,e){return li(t,e,!0)}function $a(t,e,n){return ui(t,e,yo(n,2),!0)}function Na(t,e){if(null==t?0:t.length){var n=li(t,e,!0)-1;if(qs(t[n],e))return n}return-1}function Ra(t){return t&&t.length?ci(t):[]}function Oa(t,e){return t&&t.length?ci(t,yo(e,2)):[]}function Ea(t){var e=null==t?0:t.length;return e?ai(t,1,e):[]}function Aa(t,e,n){return t&&t.length?(e=n||e===it?1:bl(e),ai(t,0,e<0?0:e)):[]}function ja(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:bl(e),e=r-e,ai(t,e<0?0:e,r)):[]}function za(t,e){return t&&t.length?mi(t,yo(e,3),!1,!0):[]}function Ua(t,e){return t&&t.length?mi(t,yo(e,3)):[]}function Ya(t){return t&&t.length?vi(t):[]}function Fa(t,e){return t&&t.length?vi(t,yo(e,2)):[]}function qa(t,e){return e="function"==typeof e?e:it,t&&t.length?vi(t,it,e):[]}function Ba(t){if(!t||!t.length)return[];var e=0;return t=c(t,function(t){if(Vs(t))return e=qc(t.length,e),!0}),M(e,function(e){return v(t,S(e))})}function Va(t,e){if(!t||!t.length)return[];var n=Ba(t);return null==e?n:v(n,function(t){return o(e,it,t)})}function Wa(t,e){return yi(t||[],e||[],jn)}function Ha(t,e){return yi(t||[],e||[],ii)}function Xa(t){var e=n(t);return e.__chain__=!0,e}function Za(t,e){return e(t),t}function Ga(t,e){return e(t)}function Ka(){return Xa(this)}function Qa(){return new i(this.value(),this.__chain__)}function Ja(){this.__values__===it&&(this.__values__=_l(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?it:this.__values__[this.__index__++]}}function ts(){return this}function es(t){for(var e,n=this;n instanceof r;){var i=ta(n);i.__index__=0,i.__values__=it,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function ns(){var t=this.__wrapped__;if(t instanceof _){var e=t;return this.__actions__.length&&(e=new _(this)),e=e.reverse(),e.__actions__.push({func:Ga,args:[Sa],thisArg:it}),new i(e,this.__chain__)}return this.thru(Sa)}function rs(){return gi(this.__wrapped__,this.__actions__)}function is(t,e,n){var r=hd(t)?u:sr;return n&&No(t,e,n)&&(e=it),r(t,yo(e,3))}function os(t,e){return(hd(t)?c:cr)(t,yo(e,3))}function as(t,e){return fr(ds(t,e),1)}function ss(t,e){return fr(ds(t,e),Nt)}function ls(t,e,n){return n=n===it?1:bl(n),fr(ds(t,e),n)}function us(t,e){return(hd(t)?s:vf)(t,yo(e,3))}function cs(t,e){return(hd(t)?l:pf)(t,yo(e,3))}function fs(t,e,n,r){t=Bs(t)?t:Kl(t),n=n&&!r?bl(n):0;var i=t.length;return n<0&&(n=qc(i+n,0)),vl(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&x(t,e,n)>-1}function ds(t,e){return(hd(t)?v:Ur)(t,yo(e,3))}function vs(t,e,n,r){return null==t?[]:(hd(e)||(e=null==e?[]:[e]),n=r?it:n,hd(n)||(n=null==n?[]:[n]),Wr(t,e,n))}function ps(t,e,n){var r=hd(t)?h:T,i=arguments.length<3;return r(t,yo(e,4),n,i,vf)}function hs(t,e,n){var r=hd(t)?m:T,i=arguments.length<3;return r(t,yo(e,4),n,i,pf)}function ms(t,e){return(hd(t)?c:cr)(t,Ps(yo(e,3)))}function gs(t){return(hd(t)?$n:ni)(t)}function _s(t,e,n){return e=(n?No(t,e,n):e===it)?1:bl(e),(hd(t)?Rn:ri)(t,e)}function ys(t){return(hd(t)?On:oi)(t)}function bs(t){if(null==t)return 0;if(Bs(t))return vl(t)?Q(t):t.length;var e=Df(t);return e==Gt||e==ne?t.size:Ar(t).length}function ws(t,e,n){var r=hd(t)?g:si;return n&&No(t,e,n)&&(e=it),r(t,yo(e,3))}function xs(t,e){if("function"!=typeof e)throw new lc(st);return t=bl(t),function(){if(--t<1)return e.apply(this,arguments)}}function Cs(t,e,n){return e=n?it:e,e=t&&null==e?t.length:e,ao(t,kt,it,it,it,it,e)}function ks(t,e){var n;if("function"!=typeof e)throw new lc(st);return t=bl(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=it),n}}function Ds(t,e,n){e=n?it:e;var r=ao(t,bt,it,it,it,it,it,e);return r.placeholder=Ds.placeholder,r}function Ss(t,e,n){e=n?it:e;var r=ao(t,wt,it,it,it,it,it,e);return r.placeholder=Ss.placeholder,r}function Is(t,e,n){function r(e){var n=d,r=v;return d=v=it,_=e,h=t.apply(r,n)}function i(t){return _=t,m=Tf(s,e),y?r(t):h}function o(t){var n=t-g,r=t-_,i=e-n;return b?Bc(i,p-r):i}function a(t){var n=t-g,r=t-_;return g===it||n>=e||n<0||b&&r>=p}function s(){var t=rd();if(a(t))return l(t);m=Tf(s,o(t))}function l(t){return m=it,w&&d?r(t):(d=v=it,h)}function u(){m!==it&&bf(m),_=0,d=g=v=m=it}function c(){return m===it?h:l(rd())}function f(){var t=rd(),n=a(t);if(d=arguments,v=this,g=t,n){if(m===it)return i(g);if(b)return bf(m),m=Tf(s,e),r(g)}return m===it&&(m=Tf(s,e)),h}var d,v,p,h,m,g,_=0,y=!1,b=!1,w=!0;if("function"!=typeof t)throw new lc(st);return e=xl(e)||0,nl(n)&&(y=!!n.leading,b="maxWait"in n,p=b?qc(xl(n.maxWait)||0,e):p,w="trailing"in n?!!n.trailing:w),f.cancel=u,f.flush=c,f}function Ts(t){return ao(t,St)}function Ls(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new lc(st);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ls.Cache||ln),n}function Ps(t){if("function"!=typeof t)throw new lc(st);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Ms(t){return ks(2,t)}function $s(t,e){if("function"!=typeof t)throw new lc(st);return e=e===it?e:bl(e),ei(t,e)}function Ns(t,e){if("function"!=typeof t)throw new lc(st);return e=null==e?0:qc(bl(e),0),ei(function(n){var r=n[e],i=Ci(n,0,e);return r&&p(i,r),o(t,this,i)})}function Rs(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new lc(st);return nl(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Is(t,e,{leading:r,maxWait:e,trailing:i})}function Os(t){return Cs(t,1)}function Es(t,e){return ud(wi(e),t)}function As(){if(!arguments.length)return[];var t=arguments[0];return hd(t)?t:[t]}function js(t){return nr(t,pt)}function zs(t,e){return e="function"==typeof e?e:it,nr(t,pt,e)}function Us(t){return nr(t,dt|pt)}function Ys(t,e){return e="function"==typeof e?e:it,nr(t,dt|pt,e)}function Fs(t,e){return null==e||ir(t,e,jl(e))}function qs(t,e){return t===e||t!==t&&e!==e}function Bs(t){return null!=t&&el(t.length)&&!Js(t)}function Vs(t){return rl(t)&&Bs(t)}function Ws(t){return!0===t||!1===t||rl(t)&&gr(t)==Bt}function Hs(t){return rl(t)&&1===t.nodeType&&!fl(t)}function Xs(t){if(null==t)return!0;if(Bs(t)&&(hd(t)||"string"==typeof t||"function"==typeof t.splice||gd(t)||xd(t)||pd(t)))return!t.length;var e=Df(t);if(e==Gt||e==ne)return!t.size;if(jo(t))return!Ar(t).length;for(var n in t)if(pc.call(t,n))return!1;return!0}function Zs(t,e){return Tr(t,e)}function Gs(t,e,n){n="function"==typeof n?n:it;var r=n?n(t,e):it;return r===it?Tr(t,e,it,n):!!r}function Ks(t){if(!rl(t))return!1;var e=gr(t);return e==Ht||e==Wt||"string"==typeof t.message&&"string"==typeof t.name&&!fl(t)}function Qs(t){return"number"==typeof t&&Uc(t)}function Js(t){if(!nl(t))return!1;var e=gr(t);return e==Xt||e==Zt||e==qt||e==te}function tl(t){return"number"==typeof t&&t==bl(t)}function el(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Rt}function nl(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function rl(t){return null!=t&&"object"==typeof t}function il(t,e){return t===e||Mr(t,e,wo(e))}function ol(t,e,n){return n="function"==typeof n?n:it,Mr(t,e,wo(e),n)}function al(t){return cl(t)&&t!=+t}function sl(t){if(Sf(t))throw new nc(at);return $r(t)}function ll(t){return null===t}function ul(t){return null==t}function cl(t){return"number"==typeof t||rl(t)&&gr(t)==Kt}function fl(t){if(!rl(t)||gr(t)!=Jt)return!1;var e=Dc(t);if(null===e)return!0;var n=pc.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&vc.call(n)==_c}function dl(t){return tl(t)&&t>=-Rt&&t<=Rt}function vl(t){return"string"==typeof t||!hd(t)&&rl(t)&&gr(t)==re}function pl(t){return"symbol"==typeof t||rl(t)&&gr(t)==ie}function hl(t){return t===it}function ml(t){return rl(t)&&Df(t)==ae}function gl(t){return rl(t)&&gr(t)==se}function _l(t){if(!t)return[];if(Bs(t))return vl(t)?J(t):Ri(t);if(Pc&&t[Pc])return B(t[Pc]());var e=Df(t);return(e==Gt?V:e==ne?X:Kl)(t)}function yl(t){if(!t)return 0===t?t:0;if((t=xl(t))===Nt||t===-Nt){return(t<0?-1:1)*Ot}return t===t?t:0}function bl(t){var e=yl(t),n=e%1;return e===e?n?e-n:e:0}function wl(t){return t?er(bl(t),0,At):0}function xl(t){if("number"==typeof t)return t;if(pl(t))return Et;if(nl(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=nl(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=N(t);var n=Ve.test(t);return n||He.test(t)?Pn(t.slice(2),n?2:8):Be.test(t)?Et:+t}function Cl(t){return Oi(t,zl(t))}function kl(t){return t?er(bl(t),-Rt,Rt):0===t?t:0}function Dl(t){return null==t?"":di(t)}function Sl(t,e){var n=df(t);return null==e?n:Kn(n,e)}function Il(t,e){return b(t,yo(e,3),dr)}function Tl(t,e){return b(t,yo(e,3),vr)}function Ll(t,e){return null==t?t:hf(t,yo(e,3),zl)}function Pl(t,e){return null==t?t:mf(t,yo(e,3),zl)}function Ml(t,e){return t&&dr(t,yo(e,3))}function $l(t,e){return t&&vr(t,yo(e,3))}function Nl(t){return null==t?[]:pr(t,jl(t))}function Rl(t){return null==t?[]:pr(t,zl(t))}function Ol(t,e,n){var r=null==t?it:hr(t,e);return r===it?n:r}function El(t,e){return null!=t&&So(t,e,yr)}function Al(t,e){return null!=t&&So(t,e,br)}function jl(t){return Bs(t)?Mn(t):Ar(t)}function zl(t){return Bs(t)?Mn(t,!0):jr(t)}function Ul(t,e){var n={};return e=yo(e,3),dr(t,function(t,r,i){Jn(n,e(t,r,i),t)}),n}function Yl(t,e){var n={};return e=yo(e,3),dr(t,function(t,r,i){Jn(n,r,e(t,r,i))}),n}function Fl(t,e){return ql(t,Ps(yo(e)))}function ql(t,e){if(null==t)return{};var n=v(mo(t),function(t){return[t]});return e=yo(e),Xr(t,n,function(t,n){return e(t,n[0])})}function Bl(t,e,n){e=xi(e,t);var r=-1,i=e.length;for(i||(i=1,t=it);++r<i;){var o=null==t?it:t[Ko(e[r])];o===it&&(r=i,o=n),t=Js(o)?o.call(t):o}return t}function Vl(t,e,n){return null==t?t:ii(t,e,n)}function Wl(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:ii(t,e,n,r)}function Hl(t,e,n){var r=hd(t),i=r||gd(t)||xd(t);if(e=yo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:nl(t)&&Js(o)?df(Dc(t)):{}}return(i?s:dr)(t,function(t,r,i){return e(n,t,r,i)}),n}function Xl(t,e){return null==t||pi(t,e)}function Zl(t,e,n){return null==t?t:hi(t,e,wi(n))}function Gl(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:hi(t,e,wi(n),r)}function Kl(t){return null==t?[]:O(t,jl(t))}function Ql(t){return null==t?[]:O(t,zl(t))}function Jl(t,e,n){return n===it&&(n=e,e=it),n!==it&&(n=xl(n),n=n===n?n:0),e!==it&&(e=xl(e),e=e===e?e:0),er(xl(t),e,n)}function tu(t,e,n){return e=yl(e),n===it?(n=e,e=0):n=yl(n),t=xl(t),wr(t,e,n)}function eu(t,e,n){if(n&&"boolean"!=typeof n&&No(t,e,n)&&(e=n=it),n===it&&("boolean"==typeof e?(n=e,e=it):"boolean"==typeof t&&(n=t,t=it)),t===it&&e===it?(t=0,e=1):(t=yl(t),e===it?(e=t,t=0):e=yl(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Hc();return Bc(t+i*(e-t+Ln("1e-"+((i+"").length-1))),e)}return Qr(t,e)}function nu(t){return Xd(Dl(t).toLowerCase())}function ru(t){return(t=Dl(t))&&t.replace(Ze,Wn).replace(mn,"")}function iu(t,e,n){t=Dl(t),e=di(e);var r=t.length;n=n===it?r:er(bl(n),0,r);var i=n;return(n-=e.length)>=0&&t.slice(n,i)==e}function ou(t){return t=Dl(t),t&&De.test(t)?t.replace(Ce,Hn):t}function au(t){return t=Dl(t),t&&Ne.test(t)?t.replace($e,"\\$&"):t}function su(t,e,n){t=Dl(t),e=bl(e);var r=e?Q(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Ji(Ac(i),n)+t+Ji(Ec(i),n)}function lu(t,e,n){t=Dl(t),e=bl(e);var r=e?Q(t):0;return e&&r<e?t+Ji(e-r,n):t}function uu(t,e,n){t=Dl(t),e=bl(e);var r=e?Q(t):0;return e&&r<e?Ji(e-r,n)+t:t}function cu(t,e,n){return n||null==e?e=0:e&&(e=+e),Wc(Dl(t).replace(Re,""),e||0)}function fu(t,e,n){return e=(n?No(t,e,n):e===it)?1:bl(e),ti(Dl(t),e)}function du(){var t=arguments,e=Dl(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function vu(t,e,n){return n&&"number"!=typeof n&&No(t,e,n)&&(e=n=it),(n=n===it?At:n>>>0)?(t=Dl(t),t&&("string"==typeof e||null!=e&&!bd(e))&&!(e=di(e))&&F(t)?Ci(J(t),0,n):t.split(e,n)):[]}function pu(t,e,n){return t=Dl(t),n=null==n?0:er(bl(n),0,t.length),e=di(e),t.slice(n,n+e.length)==e}function hu(t,e,r){var i=n.templateSettings;r&&No(t,e,r)&&(e=it),t=Dl(t),e=Id({},e,i,so);var o,a,s=Id({},e.imports,i.imports,so),l=jl(s),u=O(s,l),c=0,f=e.interpolate||Ge,d="__p += '",v=ac((e.escape||Ge).source+"|"+f.source+"|"+(f===Te?Fe:Ge).source+"|"+(e.evaluate||Ge).source+"|$","g"),p="//# sourceURL="+(pc.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xn+"]")+"\n";t.replace(v,function(e,n,r,i,s,l){return r||(r=i),d+=t.slice(c,l).replace(Ke,U),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+e.length,e}),d+="';\n";var h=pc.call(e,"variable")&&e.variable;if(h){if(Ue.test(h))throw new nc(lt)}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(ye,""):d).replace(be,"$1").replace(we,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Zd(function(){return rc(l,p+"return "+d).apply(it,u)});if(m.source=d,Ks(m))throw m;return m}function mu(t){return Dl(t).toLowerCase()}function gu(t){return Dl(t).toUpperCase()}function _u(t,e,n){if((t=Dl(t))&&(n||e===it))return N(t);if(!t||!(e=di(e)))return t;var r=J(t),i=J(e);return Ci(r,A(r,i),j(r,i)+1).join("")}function yu(t,e,n){if((t=Dl(t))&&(n||e===it))return t.slice(0,tt(t)+1);if(!t||!(e=di(e)))return t;var r=J(t);return Ci(r,0,j(r,J(e))+1).join("")}function bu(t,e,n){if((t=Dl(t))&&(n||e===it))return t.replace(Re,"");if(!t||!(e=di(e)))return t;var r=J(t);return Ci(r,A(r,J(e))).join("")}function wu(t,e){var n=It,r=Tt;if(nl(e)){var i="separator"in e?e.separator:i;n="length"in e?bl(e.length):n,r="omission"in e?di(e.omission):r}t=Dl(t);var o=t.length;if(F(t)){var a=J(t);o=a.length}if(n>=o)return t;var s=n-Q(r);if(s<1)return r;var l=a?Ci(a,0,s).join(""):t.slice(0,s);if(i===it)return l+r;if(a&&(s+=l.length-s),bd(i)){if(t.slice(s).search(i)){var u,c=l;for(i.global||(i=ac(i.source,Dl(qe.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var f=u.index;l=l.slice(0,f===it?s:f)}}else if(t.indexOf(di(i),s)!=s){var d=l.lastIndexOf(i);d>-1&&(l=l.slice(0,d))}return l+r}function xu(t){return t=Dl(t),t&&ke.test(t)?t.replace(xe,Xn):t}function Cu(t,e,n){return t=Dl(t),e=n?it:e,e===it?q(t)?rt(t):y(t):t.match(e)||[]}function ku(t){var e=null==t?0:t.length,n=yo();return t=e?v(t,function(t){if("function"!=typeof t[1])throw new lc(st);return[n(t[0]),t[1]]}):[],ei(function(n){for(var r=-1;++r<e;){var i=t[r];if(o(i[0],this,n))return o(i[1],this,n)}})}function Du(t){return rr(nr(t,dt))}function Su(t){return function(){return t}}function Iu(t,e){return null==t||t!==t?e:t}function Tu(t){return t}function Lu(t){return Er("function"==typeof t?t:nr(t,dt))}function Pu(t){return Yr(nr(t,dt))}function Mu(t,e){return Fr(t,nr(e,dt))}function $u(t,e,n){var r=jl(e),i=pr(e,r);null!=n||nl(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=pr(e,jl(e)));var o=!(nl(n)&&"chain"in n&&!n.chain),a=Js(t);return s(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Ri(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,p([this.value()],arguments))})}),t}function Nu(){return Nn._===this&&(Nn._=yc),this}function Ru(){}function Ou(t){return t=bl(t),ei(function(e){return Vr(e,t)})}function Eu(t){return Ro(t)?S(Ko(t)):Zr(t)}function Au(t){return function(e){return null==t?it:hr(t,e)}}function ju(){return[]}function zu(){return!1}function Uu(){return{}}function Yu(){return""}function Fu(){return!0}function qu(t,e){if((t=bl(t))<1||t>Rt)return[];var n=At,r=Bc(t,At);e=yo(e),t-=At;for(var i=M(r,e);++n<t;)e(n);return i}function Bu(t){return hd(t)?v(t,Ko):pl(t)?[t]:Ri(Pf(Dl(t)))}function Vu(t){var e=++hc;return Dl(t)+e}function Wu(t){return t&&t.length?lr(t,Tu,_r):it}function Hu(t,e){return t&&t.length?lr(t,yo(e,2),_r):it}function Xu(t){return D(t,Tu)}function Zu(t,e){return D(t,yo(e,2))}function Gu(t){return t&&t.length?lr(t,Tu,zr):it}function Ku(t,e){return t&&t.length?lr(t,yo(e,2),zr):it}function Qu(t){return t&&t.length?P(t,Tu):0}function Ju(t,e){return t&&t.length?P(t,yo(e,2)):0}e=null==e?Nn:Zn.defaults(Nn.Object(),e,Zn.pick(Nn,wn));var tc=e.Array,ec=e.Date,nc=e.Error,rc=e.Function,ic=e.Math,oc=e.Object,ac=e.RegExp,sc=e.String,lc=e.TypeError,uc=tc.prototype,cc=rc.prototype,fc=oc.prototype,dc=e["__core-js_shared__"],vc=cc.toString,pc=fc.hasOwnProperty,hc=0,mc=function(){var t=/[^.]+$/.exec(dc&&dc.keys&&dc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gc=fc.toString,_c=vc.call(oc),yc=Nn._,bc=ac("^"+vc.call(pc).replace($e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wc=En?e.Buffer:it,xc=e.Symbol,Cc=e.Uint8Array,kc=wc?wc.allocUnsafe:it,Dc=W(oc.getPrototypeOf,oc),Sc=oc.create,Ic=fc.propertyIsEnumerable,Tc=uc.splice,Lc=xc?xc.isConcatSpreadable:it,Pc=xc?xc.iterator:it,Mc=xc?xc.toStringTag:it,$c=function(){try{var t=xo(oc,"defineProperty");return t({},"",{}),t}catch(t){}}(),Nc=e.clearTimeout!==Nn.clearTimeout&&e.clearTimeout,Rc=ec&&ec.now!==Nn.Date.now&&ec.now,Oc=e.setTimeout!==Nn.setTimeout&&e.setTimeout,Ec=ic.ceil,Ac=ic.floor,jc=oc.getOwnPropertySymbols,zc=wc?wc.isBuffer:it,Uc=e.isFinite,Yc=uc.join,Fc=W(oc.keys,oc),qc=ic.max,Bc=ic.min,Vc=ec.now,Wc=e.parseInt,Hc=ic.random,Xc=uc.reverse,Zc=xo(e,"DataView"),Gc=xo(e,"Map"),Kc=xo(e,"Promise"),Qc=xo(e,"Set"),Jc=xo(e,"WeakMap"),tf=xo(oc,"create"),ef=Jc&&new Jc,nf={},rf=Qo(Zc),of=Qo(Gc),af=Qo(Kc),sf=Qo(Qc),lf=Qo(Jc),uf=xc?xc.prototype:it,cf=uf?uf.valueOf:it,ff=uf?uf.toString:it,df=function(){function t(){}return function(e){if(!nl(e))return{};if(Sc)return Sc(e);t.prototype=e;var n=new t;return t.prototype=it,n}}();n.templateSettings={escape:Se,evaluate:Ie,interpolate:Te,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=df(r.prototype),i.prototype.constructor=i,_.prototype=df(r.prototype),_.prototype.constructor=_,nt.prototype.clear=Oe,nt.prototype.delete=ze,nt.prototype.get=Qe,nt.prototype.has=Je,nt.prototype.set=tn,en.prototype.clear=nn,en.prototype.delete=rn,en.prototype.get=on,en.prototype.has=an,en.prototype.set=sn,ln.prototype.clear=un,ln.prototype.delete=cn,ln.prototype.get=fn,ln.prototype.has=dn,ln.prototype.set=vn,pn.prototype.add=pn.prototype.push=gn,pn.prototype.has=_n,yn.prototype.clear=bn,yn.prototype.delete=Dn,yn.prototype.get=Sn,yn.prototype.has=In,yn.prototype.set=Tn;var vf=Ui(dr),pf=Ui(vr,!0),hf=Yi(),mf=Yi(!0),gf=ef?function(t,e){return ef.set(t,e),t}:Tu,_f=$c?function(t,e){return $c(t,"toString",{configurable:!0,enumerable:!1,value:Su(e),writable:!0})}:Tu,yf=ei,bf=Nc||function(t){return Nn.clearTimeout(t)},wf=Qc&&1/X(new Qc([,-0]))[1]==Nt?function(t){return new Qc(t)}:Ru,xf=ef?function(t){return ef.get(t)}:Ru,Cf=jc?function(t){return null==t?[]:(t=oc(t),c(jc(t),function(e){return Ic.call(t,e)}))}:ju,kf=jc?function(t){for(var e=[];t;)p(e,Cf(t)),t=Dc(t);return e}:ju,Df=gr;(Zc&&Df(new Zc(new ArrayBuffer(1)))!=ue||Gc&&Df(new Gc)!=Gt||Kc&&"[object Promise]"!=Df(Kc.resolve())||Qc&&Df(new Qc)!=ne||Jc&&Df(new Jc)!=ae)&&(Df=function(t){var e=gr(t),n=e==Jt?t.constructor:it,r=n?Qo(n):"";if(r)switch(r){case rf:return ue;case of:return Gt;case af:return"[object Promise]";case sf:return ne;case lf:return ae}return e});var Sf=dc?Js:zu,If=Zo(gf),Tf=Oc||function(t,e){return Nn.setTimeout(t,e)},Lf=Zo(_f),Pf=function(t){var e=Ls(t,function(t){return n.size===ct&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Me,function(t,n,r,i){e.push(r?i.replace(Ye,"$1"):n||t)}),e}),Mf=ei(function(t,e){return Vs(t)?ar(t,fr(e,1,Vs,!0)):[]}),$f=ei(function(t,e){var n=ya(e);return Vs(n)&&(n=it),Vs(t)?ar(t,fr(e,1,Vs,!0),yo(n,2)):[]}),Nf=ei(function(t,e){var n=ya(e);return Vs(n)&&(n=it),Vs(t)?ar(t,fr(e,1,Vs,!0),it,n):[]}),Rf=ei(function(t){var e=v(t,bi);return e.length&&e[0]===t[0]?xr(e):[]}),Of=ei(function(t){var e=ya(t),n=v(t,bi);return e===ya(n)?e=it:n.pop(),n.length&&n[0]===t[0]?xr(n,yo(e,2)):[]}),Ef=ei(function(t){var e=ya(t),n=v(t,bi);return e="function"==typeof e?e:it,e&&n.pop(),n.length&&n[0]===t[0]?xr(n,it,e):[]}),Af=ei(xa),jf=po(function(t,e){var n=null==t?0:t.length,r=tr(t,e);return Kr(t,v(e,function(t){return $o(t,n)?+t:t}).sort(Pi)),r}),zf=ei(function(t){return vi(fr(t,1,Vs,!0))}),Uf=ei(function(t){var e=ya(t);return Vs(e)&&(e=it),vi(fr(t,1,Vs,!0),yo(e,2))}),Yf=ei(function(t){var e=ya(t);return e="function"==typeof e?e:it,vi(fr(t,1,Vs,!0),it,e)}),Ff=ei(function(t,e){return Vs(t)?ar(t,e):[]}),qf=ei(function(t){return _i(c(t,Vs))}),Bf=ei(function(t){var e=ya(t);return Vs(e)&&(e=it),_i(c(t,Vs),yo(e,2))}),Vf=ei(function(t){var e=ya(t);return e="function"==typeof e?e:it,_i(c(t,Vs),it,e)}),Wf=ei(Ba),Hf=ei(function(t){var e=t.length,n=e>1?t[e-1]:it;return n="function"==typeof n?(t.pop(),n):it,Va(t,n)}),Xf=po(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return tr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof _&&$o(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:Ga,args:[o],thisArg:it}),new i(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(it),t})):this.thru(o)}),Zf=ji(function(t,e,n){pc.call(t,n)?++t[n]:Jn(t,n,1)}),Gf=Hi(ua),Kf=Hi(ca),Qf=ji(function(t,e,n){pc.call(t,n)?t[n].push(e):Jn(t,n,[e])}),Jf=ei(function(t,e,n){var r=-1,i="function"==typeof e,a=Bs(t)?tc(t.length):[];return vf(t,function(t){a[++r]=i?o(e,t,n):kr(t,e,n)}),a}),td=ji(function(t,e,n){Jn(t,n,e)}),ed=ji(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),nd=ei(function(t,e){if(null==t)return[];var n=e.length;return n>1&&No(t,e[0],e[1])?e=[]:n>2&&No(e[0],e[1],e[2])&&(e=[e[0]]),Wr(t,fr(e,1),[])}),rd=Rc||function(){return Nn.Date.now()},id=ei(function(t,e,n){var r=gt;if(n.length){var i=H(n,_o(id));r|=xt}return ao(t,r,e,n,i)}),od=ei(function(t,e,n){var r=gt|_t;if(n.length){var i=H(n,_o(od));r|=xt}return ao(e,r,t,n,i)}),ad=ei(function(t,e){return or(t,1,e)}),sd=ei(function(t,e,n){return or(t,xl(e)||0,n)});Ls.Cache=ln;var ld=yf(function(t,e){e=1==e.length&&hd(e[0])?v(e[0],R(yo())):v(fr(e,1),R(yo()));var n=e.length;return ei(function(r){for(var i=-1,a=Bc(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return o(t,this,r)})}),ud=ei(function(t,e){var n=H(e,_o(ud));return ao(t,xt,it,e,n)}),cd=ei(function(t,e){var n=H(e,_o(cd));return ao(t,Ct,it,e,n)}),fd=po(function(t,e){return ao(t,Dt,it,it,it,e)}),dd=no(_r),vd=no(function(t,e){return t>=e}),pd=Dr(function(){return arguments}())?Dr:function(t){return rl(t)&&pc.call(t,"callee")&&!Ic.call(t,"callee")},hd=tc.isArray,md=zn?R(zn):Sr,gd=zc||zu,_d=Un?R(Un):Ir,yd=Yn?R(Yn):Pr,bd=Fn?R(Fn):Nr,wd=qn?R(qn):Rr,xd=Bn?R(Bn):Or,Cd=no(zr),kd=no(function(t,e){return t<=e}),Dd=zi(function(t,e){if(jo(e)||Bs(e))return void Oi(e,jl(e),t);for(var n in e)pc.call(e,n)&&jn(t,n,e[n])}),Sd=zi(function(t,e){Oi(e,zl(e),t)}),Id=zi(function(t,e,n,r){Oi(e,zl(e),t,r)}),Td=zi(function(t,e,n,r){Oi(e,jl(e),t,r)}),Ld=po(tr),Pd=ei(function(t,e){t=oc(t);var n=-1,r=e.length,i=r>2?e[2]:it;for(i&&No(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=zl(o),s=-1,l=a.length;++s<l;){var u=a[s],c=t[u];(c===it||qs(c,fc[u])&&!pc.call(t,u))&&(t[u]=o[u])}return t}),Md=ei(function(t){return t.push(it,lo),o(Ed,it,t)}),$d=Gi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=gc.call(e)),t[e]=n},Su(Tu)),Nd=Gi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=gc.call(e)),pc.call(t,e)?t[e].push(n):t[e]=[n]},yo),Rd=ei(kr),Od=zi(function(t,e,n){qr(t,e,n)}),Ed=zi(function(t,e,n,r){qr(t,e,n,r)}),Ad=po(function(t,e){var n={};if(null==t)return n;var r=!1;e=v(e,function(e){return e=xi(e,t),r||(r=e.length>1),e}),Oi(t,mo(t),n),r&&(n=nr(n,dt|vt|pt,uo));for(var i=e.length;i--;)pi(n,e[i]);return n}),jd=po(function(t,e){return null==t?{}:Hr(t,e)}),zd=oo(jl),Ud=oo(zl),Yd=Bi(function(t,e,n){return e=e.toLowerCase(),t+(n?nu(e):e)}),Fd=Bi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),qd=Bi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Bd=qi("toLowerCase"),Vd=Bi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Wd=Bi(function(t,e,n){return t+(n?" ":"")+Xd(e)}),Hd=Bi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Xd=qi("toUpperCase"),Zd=ei(function(t,e){try{return o(t,it,e)}catch(t){return Ks(t)?t:new nc(t)}}),Gd=po(function(t,e){return s(e,function(e){e=Ko(e),Jn(t,e,id(t[e],t))}),t}),Kd=Xi(),Qd=Xi(!0),Jd=ei(function(t,e){return function(n){return kr(n,t,e)}}),tv=ei(function(t,e){return function(n){return kr(t,n,e)}}),ev=Qi(v),nv=Qi(u),rv=Qi(g),iv=eo(),ov=eo(!0),av=Ki(function(t,e){return t+e},0),sv=io("ceil"),lv=Ki(function(t,e){return t/e},1),uv=io("floor"),cv=Ki(function(t,e){return t*e},1),fv=io("round"),dv=Ki(function(t,e){return t-e},0);return n.after=xs,n.ary=Cs,n.assign=Dd,n.assignIn=Sd,n.assignInWith=Id,n.assignWith=Td,n.at=Ld,n.before=ks,n.bind=id,n.bindAll=Gd,n.bindKey=od,n.castArray=As,n.chain=Xa,n.chunk=ea,n.compact=na,n.concat=ra,n.cond=ku,n.conforms=Du,n.constant=Su,n.countBy=Zf,n.create=Sl,n.curry=Ds,n.curryRight=Ss,n.debounce=Is,n.defaults=Pd,n.defaultsDeep=Md,n.defer=ad,n.delay=sd,n.difference=Mf,n.differenceBy=$f,n.differenceWith=Nf,n.drop=ia,n.dropRight=oa,n.dropRightWhile=aa,n.dropWhile=sa,n.fill=la,n.filter=os,n.flatMap=as,n.flatMapDeep=ss,n.flatMapDepth=ls,n.flatten=fa,n.flattenDeep=da,n.flattenDepth=va,n.flip=Ts,n.flow=Kd,n.flowRight=Qd,n.fromPairs=pa,n.functions=Nl,n.functionsIn=Rl,n.groupBy=Qf,n.initial=ga,n.intersection=Rf,n.intersectionBy=Of,n.intersectionWith=Ef,n.invert=$d,n.invertBy=Nd,n.invokeMap=Jf,n.iteratee=Lu,n.keyBy=td,n.keys=jl,n.keysIn=zl,n.map=ds,n.mapKeys=Ul,n.mapValues=Yl,n.matches=Pu,n.matchesProperty=Mu,n.memoize=Ls,n.merge=Od,n.mergeWith=Ed,n.method=Jd,n.methodOf=tv,n.mixin=$u,n.negate=Ps,n.nthArg=Ou,n.omit=Ad,n.omitBy=Fl,n.once=Ms,n.orderBy=vs,n.over=ev,n.overArgs=ld,n.overEvery=nv,n.overSome=rv,n.partial=ud,n.partialRight=cd,n.partition=ed,n.pick=jd,n.pickBy=ql,n.property=Eu,n.propertyOf=Au,n.pull=Af,n.pullAll=xa,n.pullAllBy=Ca,n.pullAllWith=ka,n.pullAt=jf,n.range=iv,n.rangeRight=ov,n.rearg=fd,n.reject=ms,n.remove=Da,n.rest=$s,n.reverse=Sa,n.sampleSize=_s,n.set=Vl,n.setWith=Wl,n.shuffle=ys,n.slice=Ia,n.sortBy=nd,n.sortedUniq=Ra,n.sortedUniqBy=Oa,n.split=vu,n.spread=Ns,n.tail=Ea,n.take=Aa,n.takeRight=ja,n.takeRightWhile=za,n.takeWhile=Ua,n.tap=Za,n.throttle=Rs,n.thru=Ga,n.toArray=_l,n.toPairs=zd,n.toPairsIn=Ud,n.toPath=Bu,n.toPlainObject=Cl,n.transform=Hl,n.unary=Os,n.union=zf,n.unionBy=Uf,n.unionWith=Yf,n.uniq=Ya,n.uniqBy=Fa,n.uniqWith=qa,n.unset=Xl,n.unzip=Ba,n.unzipWith=Va,n.update=Zl,n.updateWith=Gl,n.values=Kl,n.valuesIn=Ql,n.without=Ff,n.words=Cu,n.wrap=Es,n.xor=qf,n.xorBy=Bf,n.xorWith=Vf,n.zip=Wf,n.zipObject=Wa,n.zipObjectDeep=Ha,n.zipWith=Hf,n.entries=zd,n.entriesIn=Ud,n.extend=Sd,n.extendWith=Id,$u(n,n),n.add=av,n.attempt=Zd,n.camelCase=Yd,n.capitalize=nu,n.ceil=sv,n.clamp=Jl,n.clone=js,n.cloneDeep=Us,n.cloneDeepWith=Ys,n.cloneWith=zs,n.conformsTo=Fs,n.deburr=ru,n.defaultTo=Iu,n.divide=lv,n.endsWith=iu,n.eq=qs,n.escape=ou,n.escapeRegExp=au,n.every=is,n.find=Gf,n.findIndex=ua,n.findKey=Il,n.findLast=Kf,n.findLastIndex=ca,n.findLastKey=Tl,n.floor=uv,n.forEach=us,n.forEachRight=cs,n.forIn=Ll,n.forInRight=Pl,n.forOwn=Ml,n.forOwnRight=$l,n.get=Ol,n.gt=dd,n.gte=vd,n.has=El,n.hasIn=Al,n.head=ha,n.identity=Tu,n.includes=fs,n.indexOf=ma,n.inRange=tu,n.invoke=Rd,n.isArguments=pd,n.isArray=hd,n.isArrayBuffer=md,n.isArrayLike=Bs,n.isArrayLikeObject=Vs,n.isBoolean=Ws,n.isBuffer=gd,n.isDate=_d,n.isElement=Hs,n.isEmpty=Xs,n.isEqual=Zs,n.isEqualWith=Gs,n.isError=Ks,n.isFinite=Qs,n.isFunction=Js,n.isInteger=tl,n.isLength=el,n.isMap=yd,n.isMatch=il,n.isMatchWith=ol,n.isNaN=al,n.isNative=sl,n.isNil=ul,n.isNull=ll,n.isNumber=cl,n.isObject=nl,n.isObjectLike=rl,n.isPlainObject=fl,n.isRegExp=bd,n.isSafeInteger=dl,n.isSet=wd,n.isString=vl,n.isSymbol=pl,n.isTypedArray=xd,n.isUndefined=hl,n.isWeakMap=ml,n.isWeakSet=gl,n.join=_a,n.kebabCase=Fd,n.last=ya,n.lastIndexOf=ba,n.lowerCase=qd,n.lowerFirst=Bd,n.lt=Cd,n.lte=kd,n.max=Wu,n.maxBy=Hu,n.mean=Xu,n.meanBy=Zu,n.min=Gu,n.minBy=Ku,n.stubArray=ju,n.stubFalse=zu,n.stubObject=Uu,n.stubString=Yu,n.stubTrue=Fu,n.multiply=cv,n.nth=wa,n.noConflict=Nu,n.noop=Ru,n.now=rd,n.pad=su,n.padEnd=lu,n.padStart=uu,n.parseInt=cu,n.random=eu,n.reduce=ps,n.reduceRight=hs,n.repeat=fu,n.replace=du,n.result=Bl,n.round=fv,n.runInContext=t,n.sample=gs,n.size=bs,n.snakeCase=Vd,n.some=ws,n.sortedIndex=Ta,n.sortedIndexBy=La,n.sortedIndexOf=Pa,n.sortedLastIndex=Ma,n.sortedLastIndexBy=$a,n.sortedLastIndexOf=Na,n.startCase=Wd,n.startsWith=pu,n.subtract=dv,n.sum=Qu,n.sumBy=Ju,n.template=hu,n.times=qu,n.toFinite=yl,n.toInteger=bl,n.toLength=wl,n.toLower=mu,n.toNumber=xl,n.toSafeInteger=kl,n.toString=Dl,n.toUpper=gu,n.trim=_u,n.trimEnd=yu,n.trimStart=bu,n.truncate=wu,n.unescape=xu,n.uniqueId=Vu,n.upperCase=Hd,n.upperFirst=Xd,n.each=us,n.eachRight=cs,n.first=ha,$u(n,function(){var t={};return dr(n,function(e,r){pc.call(n.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),n.VERSION="4.17.21",s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),s(["drop","take"],function(t,e){_.prototype[t]=function(n){n=n===it?1:qc(bl(n),0);var r=this.__filtered__&&!e?new _(this):this.clone();return r.__filtered__?r.__takeCount__=Bc(n,r.__takeCount__):r.__views__.push({size:Bc(n,At),type:t+(r.__dir__<0?"Right":"")}),r},_.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),s(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==Mt||3==n;_.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:yo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),s(["head","last"],function(t,e){var n="take"+(e?"Right":"");_.prototype[t]=function(){return this[n](1).value()[0]}}),s(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");_.prototype[t]=function(){return this.__filtered__?new _(this):this[n](1)}}),_.prototype.compact=function(){return this.filter(Tu)},_.prototype.find=function(t){return this.filter(t).head()},_.prototype.findLast=function(t){return this.reverse().find(t)},_.prototype.invokeMap=ei(function(t,e){return"function"==typeof t?new _(this):this.map(function(n){return kr(n,t,e)})}),_.prototype.reject=function(t){return this.filter(Ps(yo(t)))},_.prototype.slice=function(t,e){t=bl(t);var n=this;return n.__filtered__&&(t>0||e<0)?new _(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==it&&(e=bl(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},_.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},_.prototype.toArray=function(){return this.take(At)},dr(_.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),a=n[o?"take"+("last"==e?"Right":""):e],s=o||/^find/.test(e);a&&(n.prototype[e]=function(){var e=this.__wrapped__,l=o?[1]:arguments,u=e instanceof _,c=l[0],f=u||hd(e),d=function(t){var e=a.apply(n,p([t],l));return o&&v?e[0]:e};f&&r&&"function"==typeof c&&1!=c.length&&(u=f=!1);var v=this.__chain__,h=!!this.__actions__.length,m=s&&!v,g=u&&!h;if(!s&&f){e=g?e:new _(this);var y=t.apply(e,l);return y.__actions__.push({func:Ga,args:[d],thisArg:it}),new i(y,v)}return m&&g?t.apply(this,l):(y=this.thru(d),m?o?y.value()[0]:y.value():y)})}),s(["pop","push","shift","sort","splice","unshift"],function(t){var e=uc[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(hd(n)?n:[],t)}return this[r](function(n){return e.apply(hd(n)?n:[],t)})}}),dr(_.prototype,function(t,e){var r=n[e];if(r){var i=r.name+"";pc.call(nf,i)||(nf[i]=[]),nf[i].push({name:e,func:r})}}),nf[Zi(it,_t).name]=[{name:"wrapper",func:it}],_.prototype.clone=I,_.prototype.reverse=G,_.prototype.value=et,n.prototype.at=Xf,n.prototype.chain=Ka,n.prototype.commit=Qa,n.prototype.next=Ja,n.prototype.plant=es,n.prototype.reverse=ns,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=rs,n.prototype.first=n.prototype.head,Pc&&(n.prototype[Pc]=ts),n}();Nn._=Zn,(i=function(){return Zn}.call(e,n,e,r))!==it&&(r.exports=i)}).call(this)}).call(e,n("DuR2"),n("3IRH")(t))},MR46:function(t,e,n){"use strict";function r(t){n("VpQU")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("1XML"),o=n.n(i),a=n("zskV"),s=n("VU/8"),l=r,u=s(o.a,a.a,l,"data-v-339212b6",null);e.default=u.exports},N4cQ:function(t,e,n){var r=n("j60P");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("3de93ad6",r,!0)},NM5q:function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.selector=e,this.elements=[],this.version="1.3.0",this.vp=this.getViewportSize(),this.body=document.querySelector("body"),this.options={wrap:n.wrap||!1,wrapWith:n.wrapWith||"<span></span>",marginTop:n.marginTop||0,marginBottom:n.marginBottom||0,stickyFor:n.stickyFor||0,stickyClass:n.stickyClass||null,stickyContainer:n.stickyContainer||"body"},this.updateScrollTopPosition=this.updateScrollTopPosition.bind(this),this.updateScrollTopPosition(),window.addEventListener("load",this.updateScrollTopPosition),window.addEventListener("scroll",this.updateScrollTopPosition),this.run()}return o(t,[{key:"run",value:function(){var t=this,e=setInterval(function(){if("complete"===document.readyState){clearInterval(e);var n=document.querySelectorAll(t.selector);t.forEach(n,function(e){return t.renderElement(e)})}},10)}},{key:"renderElement",value:function(t){var e=this;t.sticky={},t.sticky.active=!1,t.sticky.marginTop=parseInt(t.getAttribute("data-margin-top"))||this.options.marginTop,t.sticky.marginBottom=parseInt(t.getAttribute("data-margin-bottom"))||this.options.marginBottom,t.sticky.stickyFor=parseInt(t.getAttribute("data-sticky-for"))||this.options.stickyFor,t.sticky.stickyClass=t.getAttribute("data-sticky-class")||this.options.stickyClass,t.sticky.wrap=!!t.hasAttribute("data-sticky-wrap")||this.options.wrap,t.sticky.stickyContainer=this.options.stickyContainer,t.sticky.container=this.getStickyContainer(t),t.sticky.container.rect=this.getRectangle(t.sticky.container),t.sticky.rect=this.getRectangle(t),"img"===t.tagName.toLowerCase()&&(t.onload=function(){return t.sticky.rect=e.getRectangle(t)}),t.sticky.wrap&&this.wrapElement(t),this.activate(t)}},{key:"wrapElement",value:function(t){t.insertAdjacentHTML("beforebegin",t.getAttribute("data-sticky-wrapWith")||this.options.wrapWith),t.previousSibling.appendChild(t)}},{key:"activate",value:function(t){t.sticky.rect.top+t.sticky.rect.height<t.sticky.container.rect.top+t.sticky.container.rect.height&&t.sticky.stickyFor<this.vp.width&&!t.sticky.active&&(t.sticky.active=!0),this.elements.indexOf(t)<0&&this.elements.push(t),t.sticky.resizeEvent||(this.initResizeEvents(t),t.sticky.resizeEvent=!0),t.sticky.scrollEvent||(this.initScrollEvents(t),t.sticky.scrollEvent=!0),this.setPosition(t)}},{key:"initResizeEvents",value:function(t){var e=this;t.sticky.resizeListener=function(){return e.onResizeEvents(t)},window.addEventListener("resize",t.sticky.resizeListener)}},{key:"destroyResizeEvents",value:function(t){window.removeEventListener("resize",t.sticky.resizeListener)}},{key:"onResizeEvents",value:function(t){this.vp=this.getViewportSize(),t.sticky.rect=this.getRectangle(t),t.sticky.container.rect=this.getRectangle(t.sticky.container),t.sticky.rect.top+t.sticky.rect.height<t.sticky.container.rect.top+t.sticky.container.rect.height&&t.sticky.stickyFor<this.vp.width&&!t.sticky.active?t.sticky.active=!0:(t.sticky.rect.top+t.sticky.rect.height>=t.sticky.container.rect.top+t.sticky.container.rect.height||t.sticky.stickyFor>=this.vp.width&&t.sticky.active)&&(t.sticky.active=!1),this.setPosition(t)}},{key:"initScrollEvents",value:function(t){var e=this;t.sticky.scrollListener=function(){return e.onScrollEvents(t)},window.addEventListener("scroll",t.sticky.scrollListener)}},{key:"destroyScrollEvents",value:function(t){window.removeEventListener("scroll",t.sticky.scrollListener)}},{key:"onScrollEvents",value:function(t){t.sticky&&t.sticky.active&&this.setPosition(t)}},{key:"setPosition",value:function(t){this.css(t,{position:"",width:"",top:"",left:""}),this.vp.height<t.sticky.rect.height||!t.sticky.active||(t.sticky.rect.width||(t.sticky.rect=this.getRectangle(t)),t.sticky.wrap&&this.css(t.parentNode,{display:"block",width:t.sticky.rect.width+"px",height:t.sticky.rect.height+"px"}),0===t.sticky.rect.top&&t.sticky.container===this.body?(this.css(t,{position:"fixed",top:t.sticky.rect.top+"px",left:t.sticky.rect.left+"px",width:t.sticky.rect.width+"px"}),t.sticky.stickyClass&&t.classList.add(t.sticky.stickyClass)):this.scrollTop>t.sticky.rect.top-t.sticky.marginTop?(this.css(t,{position:"fixed",width:t.sticky.rect.width+"px",left:t.sticky.rect.left+"px"}),this.scrollTop+t.sticky.rect.height+t.sticky.marginTop>t.sticky.container.rect.top+t.sticky.container.offsetHeight-t.sticky.marginBottom?(t.sticky.stickyClass&&t.classList.remove(t.sticky.stickyClass),this.css(t,{top:t.sticky.container.rect.top+t.sticky.container.offsetHeight-(this.scrollTop+t.sticky.rect.height+t.sticky.marginBottom)+"px"})):(t.sticky.stickyClass&&t.classList.add(t.sticky.stickyClass),this.css(t,{top:t.sticky.marginTop+"px"}))):(t.sticky.stickyClass&&t.classList.remove(t.sticky.stickyClass),this.css(t,{position:"",width:"",top:"",left:""}),t.sticky.wrap&&this.css(t.parentNode,{display:"",width:"",height:""})))}},{key:"update",value:function(){var t=this;this.forEach(this.elements,function(e){e.sticky.rect=t.getRectangle(e),e.sticky.container.rect=t.getRectangle(e.sticky.container),t.activate(e),t.setPosition(e)})}},{key:"destroy",value:function(){var t=this;window.removeEventListener("load",this.updateScrollTopPosition),window.removeEventListener("scroll",this.updateScrollTopPosition),this.forEach(this.elements,function(e){t.destroyResizeEvents(e),t.destroyScrollEvents(e),delete e.sticky})}},{key:"getStickyContainer",value:function(t){for(var e=t.parentNode;!e.hasAttribute("data-sticky-container")&&!e.parentNode.querySelector(t.sticky.stickyContainer)&&e!==this.body;)e=e.parentNode;return e}},{key:"getRectangle",value:function(t){this.css(t,{position:"",width:"",top:"",left:""});var e=Math.max(t.offsetWidth,t.clientWidth,t.scrollWidth),n=Math.max(t.offsetHeight,t.clientHeight,t.scrollHeight),r=0,i=0;do{r+=t.offsetTop||0,i+=t.offsetLeft||0,t=t.offsetParent}while(t);return{top:r,left:i,width:e,height:n}}},{key:"getViewportSize",value:function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}}},{key:"updateScrollTopPosition",value:function(){this.scrollTop=(window.pageYOffset||document.scrollTop)-(document.clientTop||0)||0}},{key:"forEach",value:function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n])}},{key:"css",value:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n])}}]),t}();!function(e,n){t.exports=n}(0,a)},OObi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ElTimeline",props:{reverse:{type:Boolean,default:!1}},provide:function(){return{timeline:this}},render:function(){var t=arguments[0],e=this.reverse,n={"el-timeline":!0,"is-reverse":e},r=this.$slots.default||[];return e&&(r=r.reverse()),t("ul",{class:n},[r])}}},OPN8:function(t,e,n){e=t.exports=n("FZ+f")(void 0),e.push([t.i,".upload-dlg .modal-dialog .modal-body{overflow:hidden}.upload-dlg .modal-dialog .modal-body .el-upload{display:block}.upload-dlg .modal-dialog .modal-body .el-upload .el-upload-dragger{margin:0 auto}",""])},Pxhv:function(t,e,n){var r=n("/WSL");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("0332816b",r,!0)},RUmD:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var o=n("A9K1"),a=r(o),s=n("0iPh"),l=r(s);e.default={data:function(){return{bImport:!1,bLoading:!1,devices:[],form:this.defForm()}},components:{FormDlg:a.default},computed:{title:function(){return this.form.add?this.bImport?"导入设备":"新建节点":"编辑节点"},codePlaceholder:function(){return this.form.add?!this.form.serial||this.form.serial.length<4?"1~20位数字":"1~20位数字, 推荐使用行政编号, 如: "+this.form.serial.substring(0,4):""}},methods:{defForm:function(){return{id:"",serial:"",code:"",name:"",custom_name:"",parent_id:"",parent_name:"根节点",add:!1,virtual:!1,import_serial:""}},onHide:function(){this.form=this.defForm(),this.bLoading=!1,this.bImport=!1,this.devices=[],this.$emit("hide")},onShow:function(){this.errors.clear(),this.$emit("show")},onSubmit:function(){var t=this;return i(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$validator.validateAll();case 2:if(n=e.sent){e.next=8;break}return r=t.errors.items[0],t.$message({type:"error",message:r.msg}),(0,l.default)("[name="+r.field+"]").focus(),e.abrupt("return");case 8:t.form.virtual&&t.form.add?l.default.get("/api/v1/channel/virtual/add",{serial:t.form.serial,code:t.form.code,name:t.form.custom_name,parent_id:t.form.parent_id}).then(function(e){t.$refs.dlg.hide(),t.$emit("submit")}):l.default.get("/api/v1/channel/save",{serial:t.form.serial,code:t.form.code,name:t.form.custom_name,parent_id:t.form.parent_id,add:t.form.add,import_serial:t.form.import_serial}).then(function(e){t.$refs.dlg.hide(),t.$emit("submit")});case 9:case"end":return e.stop()}},e,t)}))()},show:function(t){var e=this;this.errors.clear(),t&&(this.bImport=!!t.import,this.form.add=!!t.add,this.form.id=t.id,this.form.serial=t.serial,this.form.code=t.code,this.form.name=t.name,this.form.custom_name=t.customName,t.custom&&(this.form.custom_name=t.name,this.form.name=""),t.parent&&(this.form.parent_id=t.parent.code,this.form.parent_name=t.parent.customName||t.parent.name||t.parent.id,this.form.virtual="virtual"===t.parent.manufacturer)),this.bImport&&this.loadDevice(),this.$nextTick(function(){e.$refs.dlg.show()})},loadDevice:function(t){var e=this;this.bLoading=!0,l.default.get("/api/v1/device/list",{q:t,limit:10}).then(function(t){e.devices=t.DeviceList||[]}).always(function(){e.$nextTick(function(){e.bLoading=!1})})},changeDevice:function(t){var e=this;t?(this.form.code=t,this.form.import_serial=t,this.$nextTick(function(){e.form.custom_name=e.$refs.selectDevice.selectedLabel})):(this.form.code="",this.form.custom_name="",this.form.import_serial="")},clearDevice:function(){this.form.code="",this.form.custom_name="",this.form.import_serial="",this.loadDevice()}}}},Ra6S:function(t,e,n){var r=n("bSrL");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("20ae1bb8",r,!0)},TTNq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("OObi"),i=n.n(r),o=n("VU/8"),a=o(i.a,null,null,null,null);e.default=a.exports},UFy2:function(t,e,n){e=t.exports=n("FZ+f")(void 0),e.push([t.i,"label.el-switch[data-v-5eba259c]{margin-bottom:-10px}",""])},UKht:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormDlg",{ref:"dlg",attrs:{title:"编辑设备",disabled:t.errors.any(),size:"modal-lgg"},on:{hide:t.onHide,show:t.onShow,submit:t.onSubmit}},[n("div",{staticClass:"col-md-6"},[n("div",{class:{"form-group":!0,"has-error":t.errors.has("serial")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-serial"}},[t._v("设备编号\n                "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.serial,expression:"form.serial",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",readonly:"readonly",id:"input-serial",name:"serial","data-vv-as":"设备编号"},domProps:{value:t.form.serial},on:{input:function(e){e.target.composing||t.$set(t.form,"serial",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("name")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-name"}},[t._v("设备名称\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.name,expression:"form.name",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"input-name",name:"name","data-vv-as":"设备名称"},domProps:{value:t.form.name},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.$el.querySelector("#input-password").focus()},input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.useSeparateDevicePassword,expression:"useSeparateDevicePassword"}],class:{"form-group":!0,"has-error":t.errors.has("password")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-password"}},[t._v("接入密码\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.password,expression:"form.password",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"input-password",name:"password",placeholder:"默认使用 livecms.ini > sip > device_password","data-vv-as":"接入密码"},domProps:{value:t.form.password},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.$el.querySelector("#input-contact-ip").focus()},input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("contact_ip")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-contact-ip"}},[t._v("信令联络 IP\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.contact_ip,expression:"form.contact_ip",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"input-contact-ip",name:"contact_ip",placeholder:"默认使用 livecms.ini > sip > host","data-vv-as":"信令联络 IP"},domProps:{value:t.form.contact_ip},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.$el.querySelector("#input-recv-stream-ip").focus()},input:function(e){e.target.composing||t.$set(t.form,"contact_ip",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("sms_id")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-sms-id"}},[t._v("SMS ID\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.sms_id,expression:"form.sms_id",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{id:"input-sms-id",name:"sms_id","data-vv-as":"SMS"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"sms_id",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("自动选择负载最小")]),t._v(" "),t._l(t.smsList,function(e,r){return n("option",{key:r,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2)])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("sms_group_id")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-sms-group-id"}},[t._v("SMS 分组\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.sms_group_id,expression:"form.sms_group_id",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{id:"input-sms-group-id",name:"sms_group_id","data-vv-as":"SMSGroup"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"sms_group_id",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("自动选择负载最小")]),t._v(" "),t._l(t.smsGroupList,function(e,r){return n("option",{key:r,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2)])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("recv_stream_ip")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-recv-stream-ip"}},[t._v("收流 IP\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.recv_stream_ip,expression:"form.recv_stream_ip",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"input-recv-stream-ip",name:"recv_stream_ip",placeholder:"默认使用 livesms.ini > sip > host","data-vv-as":"收流 IP"},domProps:{value:t.form.recv_stream_ip},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.$el.querySelector("#input-catalog-interval").focus()},input:function(e){e.target.composing||t.$set(t.form,"recv_stream_ip",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("drop_channel_type")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-drop-channel-type"}},[t._v("过滤通道类型")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("el-select",{staticStyle:{width:"100%"},attrs:{id:"input-drop-channel-type",size:"medium",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选填, 需要丢弃的通道类型"},model:{value:t.dropChannelTypes,callback:function(e){t.dropChannelTypes="string"==typeof e?e.trim():e},expression:"dropChannelTypes"}},t._l(t.innerChannelTypes,function(t,e){return n("el-option",{key:e,attrs:{label:e+" - "+t,value:e}})}))],1)]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.ctrl&&t.alt||t.showPosition,expression:"(ctrl && alt) || showPosition"}],class:{"form-group":!0,"has-error":t.errors.has("longitude")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-position-longitude"}},[t._v("位置经度\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"validate",rawName:"v-validate",value:"decimal",expression:"'decimal'"},{name:"model",rawName:"v-model.trim",value:t.form.longitude,expression:"form.longitude",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"input-position-longitude",name:"longitude","data-vv-as":"经度"},domProps:{value:t.form.longitude},on:{input:function(e){e.target.composing||t.$set(t.form,"longitude",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.ctrl&&t.alt||t.showPosition,expression:"(ctrl && alt) || showPosition"}],class:{"form-group":!0,"has-error":t.errors.has("latitude")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-position-latitude"}},[t._v("位置纬度\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"validate",rawName:"v-validate",value:"decimal",expression:"'decimal'"},{name:"model",rawName:"v-model.trim",value:t.form.latitude,expression:"form.latitude",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"input-position-latitude",name:"latitude","data-vv-as":"纬度"},domProps:{value:t.form.latitude},on:{input:function(e){e.target.composing||t.$set(t.form,"latitude",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])])]),t._v(" "),n("div",{staticClass:"col-md-6"},[n("div",{class:{"form-group":!0,"has-error":t.errors.has("catalog_interval")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-catalog-interval"}},[t._v("通道更新周期(秒)\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.catalog_interval,expression:"form.catalog_interval",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"numeric",expression:"'numeric'"}],staticClass:"form-control",attrs:{type:"text",id:"input-catalog-interval",name:"catalog_interval",placeholder:"3600"},domProps:{value:t.form.catalog_interval},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.$el.querySelector("#input-subscribe-interval").focus()},input:function(e){e.target.composing||t.$set(t.form,"catalog_interval",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.ctrl&&t.alt||t.showSubscribeInterval,expression:"(ctrl && alt) || showSubscribeInterval"}],class:{"form-group":!0,"has-error":t.errors.has("subscribe_interval")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-subscribe-interval"}},[t._v("订阅周期(秒)\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.subscribe_interval,expression:"form.subscribe_interval",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"integer",expression:"'integer'"}],staticClass:"form-control",attrs:{type:"text",id:"input-subscribe-interval",name:"subscribe_interval",placeholder:"默认使用全局订阅配置, 负数不订阅"},domProps:{value:t.form.subscribe_interval},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.onSubmit(e)},input:function(e){e.target.composing||t.$set(t.form,"subscribe_interval",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("charset")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-charset"}},[t._v("字符集\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.charset,expression:"form.charset",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{id:"input-charset",name:"charset","data-vv-as":"字符集"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"charset",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("自动识别")]),t._v(" "),n("option",{attrs:{value:"GB2312"}},[t._v("GB2312")]),t._v(" "),n("option",{attrs:{value:"UTF-8"}},[t._v("UTF-8")])])])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("stream_mode")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-stream-mode"}},[t._v("码流索引\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("el-select",{staticStyle:{width:"100%"},attrs:{id:"input-stream-mode",size:"medium",clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"自动选择"},model:{value:t.form.stream_mode,callback:function(e){t.$set(t.form,"stream_mode","string"==typeof e?e.trim():e)},expression:"form.stream_mode"}},t._l(t.innerStreamModes,function(t,e){return n("el-option",{key:e,attrs:{label:e?e+" - "+t:""+t,value:e}})}))],1)]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("media_transport")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-media-transport"}},[t._v("流传输模式\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("el-radio-group",{attrs:{size:"mini"},on:{change:t.onMediaTransportChange},model:{value:t.form.media_transport,callback:function(e){t.$set(t.form,"media_transport","string"==typeof e?e.trim():e)},expression:"form.media_transport"}},[n("el-radio-button",{attrs:{label:"TCP"}}),t._v(" "),n("el-radio-button",{attrs:{label:"UDP"}})],1),t._v("\n                  \n                "),n("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:"TCP"==t.form.media_transport,expression:"form.media_transport == 'TCP'"}],attrs:{size:"mini"},model:{value:t.form.media_transport_mode,callback:function(e){t.$set(t.form,"media_transport_mode","string"==typeof e?e.trim():e)},expression:"form.media_transport_mode"}},[n("el-radio-button",{attrs:{label:"passive"}},[t._v("被动")]),t._v(" "),n("el-radio-button",{attrs:{label:"active"}},[t._v("主动")])],1)],1)]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("subscribe_items")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-subscribe-items"}},[t._v("订阅项目\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7 checkbox"},[n("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"catalog_subscribe",disabled:t.form.subscribe_interval<0},model:{value:t.form.catalog_subscribe,callback:function(e){t.$set(t.form,"catalog_subscribe","string"==typeof e?e.trim():e)},expression:"form.catalog_subscribe"}},[t._v("\n                    目录订阅  \n                ")]),t._v(" "),n("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"alarm_subscribe",disabled:t.form.subscribe_interval<0},model:{value:t.form.alarm_subscribe,callback:function(e){t.$set(t.form,"alarm_subscribe","string"==typeof e?e.trim():e)},expression:"form.alarm_subscribe"}},[t._v("\n                    报警订阅  \n                ")]),t._v(" "),n("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"position_subscribe",disabled:t.form.subscribe_interval<0},model:{value:t.form.position_subscribe,callback:function(e){t.$set(t.form,"position_subscribe","string"==typeof e?e.trim():e)},expression:"form.position_subscribe"}},[t._v("\n                    位置订阅\n                ")])],1)]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("record")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-record"}},[t._v("设备录像\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7 checkbox"},[n("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"record_center"},model:{value:t.form.record_center,callback:function(e){t.$set(t.form,"record_center","string"==typeof e?e.trim():e)},expression:"form.record_center"}},[t._v("\n                    中心检索  \n                ")]),t._v(" "),n("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"record_indistinct"},model:{value:t.form.record_indistinct,callback:function(e){t.$set(t.form,"record_indistinct","string"==typeof e?e.trim():e)},expression:"form.record_indistinct"}},[t._v("\n                    模糊查询\n                ")])],1)]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("catalog")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-catalog"}},[t._v("目录结构\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-7 checkbox"},[n("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"civil_code_first"},model:{value:t.form.civil_code_first,callback:function(e){t.$set(t.form,"civil_code_first","string"==typeof e?e.trim():e)},expression:"form.civil_code_first"}},[t._v("\n                    行政区域优先\n                ")])],1)])]),t._v(" "),n("div",{staticClass:"clearfix"}),t._v(" "),n("template",{attrs:{slot:"footer"},slot:"footer"},[t.alertMsg?n("div",{staticClass:"inline text-orange"},[n("small",[n("strong",[n("i",{staticClass:"fa fa-info-circle"}),t._v(" 提示 :   ")]),t._v("\n                "+t._s(t.alertMsg)+"\n                  \n            ")])]):t._e()])],2)},i=[],o={render:r,staticRenderFns:i};e.a=o},VMXz:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("AU86"),i=n.n(r),o=n("hFPp"),a=n("VU/8"),s=a(i.a,o.a,null,null,null);e.default=s.exports},VpQU:function(t,e,n){var r=n("1h83");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("3dbabe02",r,!0)},WEd6:function(t,e,n){"use strict";function r(t){n("GxIr")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("49HP"),o=n.n(i),a=n("8Xyl"),s=n("VU/8"),l=r,u=s(o.a,a.a,l,null,null);e.default=u.exports},WehN:function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n("M4fF"),a=(r(o),n("PJh5")),s=r(a),l=n("WEd6"),u=r(l),c=n("5aEn"),f=r(c),d=n("ENv+"),v=r(d),p=n("NYxO");e.default={props:{devid:{type:String,default:""},channel:{type:String,default:""},mode:{type:String,default:"list"},day:{type:String,default:function(){return(0,s.default)().format("YYYYMMDD")}}},data:function(){return{timerange:[(0,s.default)(this.day,"YYYYMMDD").startOf("hour").toDate(),(0,s.default)(this.day,"YYYYMMDD").startOf("hour").toDate()],loading:!1,center:"",indistinct:"",records:[]}},components:{PlaybackVideoDlg:f.default,PlaybackDownloadDlg:v.default,DatePicker:u.default},computed:i({},(0,p.mapState)(["userInfo","serverInfo"])),methods:{ready:function(){this.$watch("day",function(t,e){this.timerange=[(0,s.default)(this.day,"YYYYMMDD").startOf("hour").toDate(),(0,s.default)(this.day,"YYYYMMDD").startOf("hour").toDate()]}),this.$watch("center",function(t,e){this.timerange=[(0,s.default)(this.day,"YYYYMMDD").startOf("hour").toDate(),(0,s.default)(this.day,"YYYYMMDD").startOf("hour").toDate()]}),this.$watch("indistinct",function(t,e){this.timerange=[(0,s.default)(this.day,"YYYYMMDD").startOf("hour").toDate(),(0,s.default)(this.day,"YYYYMMDD").startOf("hour").toDate()]}),console.log(this.devid,this.channel,this.day),this.getRecords(!0)},keyDown:function(t){27==t.keyCode&&this.$el.querySelector(".fa-chevron-left").click()},isMobile:function(){return videojs.browser.IS_IOS||videojs.browser.IS_ANDROID},showDatePicker:function(){t(this.$refs.datePicker.$el).focus()},updateDay:function(t){var e=this;this.$nextTick(function(){e.$router.replace({path:"/devices/playback/"+e.mode+"/"+e.devid+"/"+e.channel+"/"+t,query:Object.assign({},e.$route.query,{center:e.center,indistinct:e.indistinct})})})},nextTimeRange:function(){var t=(0,s.default)(this.day,"YYYYMMDD").endOf("day"),e=(0,s.default)().startOf("second");t.isAfter(e,"second")&&(t=e);var n=(0,s.default)(this.timerange[1]);if(n.isSameOrAfter(t,"second"))return!1;var r=(0,s.default)(this.timerange[1]).add(6,"hours");return r.isAfter(t)&&(r=t),!r.clone().startOf("minute").isSameOrBefore(n.clone().startOf("minute"),"second")&&(console.log(n.format("YY-MM-DD HH:mm:ss"),"~",r.format("YY-MM-DD HH:mm:ss"),"loading..."),this.timerange=[n.toDate(),r.toDate()],!0)},getRecords:function(e){var n=this;if(e&&(this.loading=!0,this.records=[]),!this.nextTimeRange())return void this.$nextTick(function(){n.loading=!1});t.ajax("/api/v1/playback/recordlist",{type:"get",global:!1,data:{timeout:this.serverInfo.RecordListTimeout||5,serial:this.devid,code:this.channel,center:this.center,indistinct:this.indistinct,starttime:(0,s.default)(this.timerange[0]).format("YYYY-MM-DDTHH:mm:ss"),endtime:(0,s.default)(this.timerange[1]).format("YYYY-MM-DDTHH:mm:ss")}}).then(function(t){var e=t.RecordList||[];n.records=n.records.concat(e.filter(function(t){return!!(t&&t.StartTime&&t.EndTime)&&(!n.records.some(function(e){return e.StartTime===t.StartTime&&e.EndTime===t.EndTime})||(console.log("repeat",t.StartTime,"~",t.EndTime),!1))}))}).always(function(){n.$nextTick(function(){n.getRecords(!1)})})},formatName:function(t,e,n){return n||"-"},downloadPlayback:function(e){var n=this;this.loading=!0,this.$set(e,"Starting",!0),t.get("/api/v1/playback/start",{serial:this.devid,code:this.channel,starttime:e.StartTime,endtime:e.EndTime,download:!0}).then(function(t){n.$refs.playbackDownloadDlg.download(e.StartTime+" - "+e.EndTime,t.StreamID)}).always(function(){n.$nextTick(function(){n.loading=!1}),n.$delete(e,"Starting")})},startPlayback:function(e){var n=this;this.loading=!0,this.$set(e,"Starting",!0),t.get("/api/v1/playback/start",{serial:this.devid,code:this.channel,starttime:e.StartTime,endtime:e.EndTime}).then(function(t){var r=n.isMobile()?t.HLS:t.RTMP,i=n.isMobile()?"HLS":"RTMP";switch(n.flvSupported()&&(i=n.isIE()?"WS_FLV":"FLV",r=n.isIE()?t.WS_FLV:t.FLV),String(n.serverInfo.PreferStreamFmt).toUpperCase()){case"WEBRTC":n.rtcSupported()&&(r=t.WEBRTC,i="WEBRTC");break;case"FLV":n.flvSupported()&&!n.isIE()&&(r=t.FLV,i="FLV");break;case"WS_FLV":case"WS-FLV":n.flvSupported()&&(r=t.WS_FLV,i="WS_FLV");break;case"HLS":r=t.HLS,i="HLS";break;case"RTMP":r=t.RTMP,i="RTMP"}var o="RTMP"==i?"":e.Snap||"";n.$refs.playbackVideoDlg.play(r,e.Name||e.DeviceID,o,n.devid,n.channel,t.StreamID)}).always(function(){n.$nextTick(function(){n.loading=!1}),n.$delete(e,"Starting")})},toTimeView:function(){this.$router.replace({path:"/devices/playback/timebox/"+this.devid+"/"+this.channel+"/"+this.day,query:Object.assign({},this.$route.query,{center:this.center,indistinct:this.indistinct})})}},mounted:function(){},beforeDestroy:function(){},beforeRouteEnter:function(t,e,n){n(function(e){e.center=t.query.center,e.indistinct=t.query.indistinct,e.ready()})},beforeRouteUpdate:function(t,e,n){var r=this;this.center=t.query.center,this.indistinct=t.query.indistinct,n(),this.$nextTick(function(){r.loading||(console.log(r.devid,r.channel,r.day),r.getRecords(!0))})}}}).call(e,n("0iPh"))},XCs1:function(t,e,n){var r=n("NM5q");t.exports=r},"Xtk+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("toVl"),i=n.n(r),o=n("b3UA"),a=n("VU/8"),s=a(i.a,o.a,null,null,null);e.default=s.exports},Xv6o:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n("PJh5"),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{timeCursorX:0,timeDayX:0,bMoving:!1}},props:{minutesPerUnit:{default:5,type:Number},videos:{default:function(){return[]}},start:{default:0,type:Number},end:{default:0,type:Number}},mounted:function(){function e(e){var n=t(o).data("originPageX"),r=e.pageX-n;s.timeCursorX=t(o).position().left+r,t(o).data("originPageX",e.pageX)}function n(e){var n=e.originalEvent.targetTouches[0],r=t(o).data("originPageX"),i=n.pageX-r;s.timeCursorX=t(o).position().left+i,t(o).data("originPageX",n.pageX)}function r(e){var n=t(a).data("originPageX"),r=e.pageX-n;s.timeDayX=t(a).position().left+r,t(a).data("originPageX",e.pageX)}function i(e){var n=e.originalEvent.targetTouches[0],r=t(a).data("originPageX"),i=n.pageX-r;s.timeDayX=t(a).position().left+i,t(a).data("originPageX",n.pageX)}var o=this.$refs.cursor,a=this.$refs.day,s=(this.$el,this);t(o).on("mousedown",function(n){t(o).data("originPageX",n.pageX),s.bMoving=!0,t(document).on("mousemove",e).one("mouseup",function(n){t(document).off("mousemove",e),t(o).removeData("originPageX"),s.triggerTimeChange(),s.bMoving=!1})}).on("touchstart",function(e){var r=e.originalEvent.targetTouches[0];t(o).data("originPageX",r.pageX),s.bMoving=!0,t(document).on("touchmove",n).one("touchend",function(e){t(document).off("touchmove",n),t(o).removeData("originPageX"),s.triggerTimeChange(),s.bMoving=!1})}),t(a).on("mousedown",function(e){if(t(e.target).hasClass("time-minute"))return!1;t(a).data("originPageX",e.pageX),s.bMoving=!0,t(document).on("mousemove",r).one("mouseup",function(e){t(document).off("mousemove",r),t(a).removeData("originPageX"),s.triggerTimeChange(),s.bMoving=!1})}).on("touchstart",function(e){if(t(e.target).hasClass("time-minute"))return!1;var n=e.originalEvent.targetTouches[0];t(a).data("originPageX",n.pageX),s.bMoving=!0,t(document).on("touchmove",i).one("touchend",function(e){t(document).off("touchmove",i),t(a).removeData("originPageX"),s.triggerTimeChange(),s.bMoving=!1})})},watch:{videos:function(t){this.triggerTimeChange()}},methods:{hourText:function(t){return(0,i.default)().hour(t).minute(0).second(0).format("HH:mm")},minuteActiveClass:function(t){var e=(0,i.default)().hour(0).minute(t),n=e.format("HH:mm");return Object.keys(this.activeMinutes).indexOf(n)>=0?"active":""},minuteTitle:function(t){var e=(0,i.default)().hour(0).minute(t),n=e.format("HH:mm");return Object.keys(this.activeMinutes).indexOf(n)>=0?n:""},clickMinute:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.bMoving||(this.timeCursorX=t+this.timeDayX,e&&this.triggerTimeChange())},triggerTimeChange:function(){this.$emit("timeChange",this.activeMinutes[this.timeCursorText])}},computed:{timeCursorText:function(){this.timeCursorX>=t(this.$el).innerWidth()&&(this.timeCursorX=t(this.$el).innerWidth()-1),this.timeCursorX<0&&(this.timeCursorX=0),this.timeDayX<t(this.$el).innerWidth()-t(this.$refs.day).outerWidth()&&(this.timeDayX=t(this.$el).innerWidth()-t(this.$refs.day).outerWidth()),this.timeDayX>0&&(this.timeDayX=0),this.timeCursorX-this.timeDayX>=1440&&(this.timeDayX=t(this.$el).innerWidth()-t(this.$refs.day).outerWidth(),this.timeCursorX=t(this.$el).innerWidth()-1);var e=parseInt((this.timeCursorX-this.timeDayX)/this.minutesPerUnit)*this.minutesPerUnit;return(0,i.default)().hour(0).minute(e).format("HH:mm")},activeMinutes:function(){var t={},e=0,n=!0,r=!1,o=void 0;try{for(var a,s=this.videos[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,u=(0,i.default)(l.StartTime,"YYYY-MM-DDTHH:mm:ss"),c=(0,i.default)(l.EndTime,"YYYY-MM-DDTHH:mm:ss");u.isSame(c,"day")||(0==e?u=(0,i.default)(c).startOf("day"):c=(0,i.default)(u).endOf("day"));var f,d,v=(0,i.default)(u).startOf("hour");this.start&&(f=(0,i.default)(u).startOf("day").add(this.start,"minute")),this.end&&(d=(0,i.default)(u).startOf("day").add(this.end,"minute"));for(var p=0;;p+=this.minutesPerUnit){var h=(0,i.default)(v).add(p,"minute");if(!h.isBefore(u,"minute")){if(h.isAfter(c,"minute"))break;if(!f||!h.isBefore(f,"minute")){if(d&&h.isAfter(d,"minute"))break;t[h.format("HH:mm")]=Object.assign({},l,{StartTime:h.format("YYYY-MM-DDTHH:mm:ss")})}}}e++}}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return t}}}}).call(e,n("0iPh"))},aV5U:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["modal",{fade:t.fade}],attrs:{"data-keyboard":"true","data-backdrop":"static",tabindex:"-1"}},[n("div",{staticClass:"modal-dialog modal-lg"},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),n("h4",{staticClass:"modal-title text-primary text-center"},[n("span",[t._v(t._s(t.videoTitle))])])]),t._v(" "),n("div",{staticClass:"modal-body"},[t.bShow?n("LivePlayer",{directives:[{name:"loading",rawName:"v-loading",value:t.bLoading,expression:"bLoading"}],attrs:{videoUrl:t.videoUrl,snapUrl:t.snapUrl,live:t.live,muted:"",hideBigPlayButton:!!t.serverInfo.HideBigPlayButton,loading:t.bLoading,"element-loading-text":"加载中","element-loading-background":"#000"},on:{message:t.$message,"update:loading":function(e){t.bLoading=e}}}):t._e(),t._v(" "),t.isDemoUser(t.serverInfo,t.userInfo)?n("div",{staticClass:"text-center text-gray"},[n("br"),t._v("\n                  提示: 演示系统限制匿名登录播放时间, 若需测试长时间播放, 请"),n("a",{attrs:{target:"_blank",href:"//www.liveqing.com/docs/download/LiveGBS.html"}},[t._v("下载使用")])]):t._e()],1),t._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.scale(1)}}},[t._v("x1")]),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.scale(2)}}},[t._v("x2")]),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.scale(4)}}},[t._v("x4")]),t._v(" "),n("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")])])])])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],o={render:r,staticRenderFns:i};e.a=o},b3UA:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("div",{staticClass:"box box-primary"},[n("div",{staticClass:"box-header"},[n("h4",{staticClass:"text-primary text-center"},[t._v("设备录像时间轴("+t._s(t.devid)+"-"+t._s(t.channel)+")")])]),t._v(" "),n("div",{staticClass:"box-body"},[n("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},[n("div",{staticClass:"form-group form-group-sm"},["no"!=t.$getQueryString("menu")?n("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.$router.go(-1)}}},[n("i",{staticClass:"fa fa-chevron-left"}),t._v(" 返回\n            ")]):t._e()]),t._v(" "),n("div",{staticClass:"form-group pull-right"},[n("div",{staticClass:"input-group input-group-sm"},[n("DatePicker",{ref:"datePicker",staticClass:"form-control",attrs:{day:t.day},on:{"update:day":t.updateDay}}),t._v(" "),n("div",{staticClass:"input-group-btn"},[n("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.showDatePicker(e)}}},[n("i",{staticClass:"fa fa-calendar"})]),t._v(" "),n("button",{staticClass:"btn btn-default btn-sm",on:{click:function(e){e.preventDefault(),t.toListView(e)}}},[n("i",{staticClass:"fa fa-hand-o-right"}),t._v(" 列表视图\n                      ")])])],1)])]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"clearfix"}),t._v(" "),n("LivePlayer",{directives:[{name:"loading",rawName:"v-loading",value:t.videoLoading,expression:"videoLoading"}],staticStyle:{margin:"0 auto","max-width":"700px"},attrs:{live:"",muted:"",videoUrl:t.videoUrl,currentTime:t.currentTime,hideBigPlayButton:!!t.serverInfo.HideBigPlayButton,loading:t.videoLoading,"element-loading-text":"加载中","element-loading-background":"#000"},on:{ended:t.onVideoEnd,error:t.onVideoError,timeupdate:t.onVideoTimeUpdate,"update:loading":function(e){t.videoLoading=e}}}),t._v(" "),t.isDemoUser(t.serverInfo,t.userInfo)?n("div",{staticClass:"text-center text-gray"},[n("br"),t._v("\n          提示: 演示系统限制匿名登录播放时间, 若需测试长时间播放, 请"),n("a",{attrs:{target:"_blank",href:"//www.liveqing.com/docs/download/LiveGBS.html"}},[t._v("下载使用")])]):t._e(),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("TimeRule",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"timeRule",attrs:{videos:t.videos},on:{timeChange:t.onTimeChange}}),t._v(" "),n("div",{staticClass:"clearfix"}),t._v(" "),n("br")],1)])])},i=[],o={render:r,staticRenderFns:i};e.a=o},bSrL:function(t,e,n){e=t.exports=n("FZ+f")(void 0),e.push([t.i,".opt-group .cell{overflow:visible}",""])},crqA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("WehN"),i=n.n(r),o=n("Igbz"),a=n("VU/8"),s=a(i.a,o.a,null,null,null);e.default=s.exports},etei:function(t,e,n){"use strict";function r(t){n("y+T/"),n("N4cQ")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("irhb"),o=n.n(i),a=n("GXnK"),s=n("VU/8"),l=r,u=s(o.a,a.a,l,"data-v-68785699",null);e.default=u.exports},hFPp:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormDlg",{ref:"dlg",attrs:{title:"导出通道列表",disabled:t.errors.any()},on:{hide:t.onHide,show:t.onShow,submit:t.onSubmit}},[t.devid?n("div",{class:{"form-group":!0}},[n("div",{staticClass:"col-sm-12 checkbox text-center"},[n("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},model:{value:t.downloadThisDev,callback:function(e){t.downloadThisDev="string"==typeof e?e.trim():e},expression:"downloadThisDev"}},[t._v("\n                只导出当前设备("+t._s(t.devid)+")的通道\n            ")])],1)]):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showPage,expression:"showPage"}],class:{"form-group":!0,"has-error":t.errors.has("start")}},[n("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input-start"}},[t._v("开始\n            "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.start,expression:"start",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"numeric|min_value:0",expression:"'numeric|min_value:0'"}],staticClass:"form-control",attrs:{type:"text",id:"input-start",name:"start","data-vv-as":"开始"},domProps:{value:t.start},on:{input:function(e){e.target.composing||(t.start=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showPage,expression:"showPage"}],class:{"form-group":!0,"has-error":t.errors.has("limit")}},[n("label",{staticClass:"col-sm-3 control-label",attrs:{for:"input-limit"}},[t._v("上限\n            "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.limit,expression:"limit",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"numeric|min_value:100",expression:"'numeric|min_value:100'"}],staticClass:"form-control",attrs:{type:"text",id:"input-limit",name:"limit","data-vv-as":"上限"},domProps:{value:t.limit},on:{input:function(e){e.target.composing||(t.limit=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])])])},i=[],o={render:r,staticRenderFns:i};e.a=o},irhb:function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n("XCs1"),a=r(o),s=n("M4fF"),l=(r(s),n("UZ5h")),u=(r(l),n("NYxO")),c=n("eAMf"),f=r(c),d=n("81Pc"),v=n("/aob"),p=r(v),h=n("wZh5"),m=r(h);e.default={props:{},data:function(){var t=this;return{q:"",loading:!1,showTree:!0,showGroupTree:!0,playerIdx:0,playersLength:4,players:[],pnode:null,contextMenuTarget:null,contextMenuVisible:!1,contextMenuNodeData:null,treeProps:{label:function(e,n){n.serial=e.serial,n.code=e.code;var r=e.customName||e.name||e.id;return!t.treeLeaf(e)&&e.subCount>0&&(r+=" ["+e.onlineSubCount+"/"+e.subCount+"]"),r},isLeaf:function(e,n){return t.treeLeaf(e)},disabled:function(e,n){return t.treeLeaf(e)&&"ON"!=e.status}},customListDlgTitle:"选择通道",sticky:null}},components:{LivePlayer:f.default,VueContextMenu:d.component,DeviceTreeNodeEditDlg:p.default,ChannelCustomListDlg:m.default},computed:i({},(0,u.mapState)(["userInfo","serverInfo"]),{playing:function(){return!!(this.players[this.playerIdx]||{}).url},canPTZ:function(){var t=this.players[this.playerIdx]||{};return!!t.url&&(0===t.ptzType||1===t.ptzType)}}),mounted:function(){this.setPlayersLength(this.playersLength),this.contextMenuTarget=document.querySelector("#tab-tree-wrapper"),t(document).on("mouseup touchend",this.ctrlStop),t(document).on("expanded.pushMenu collapsed.pushMenu",this.updateSticky),this.sticky=new a.default("#dev-tree-right")},beforeDestroy:function(){this.ctrlStop(),t(document).off("mouseup touchend",this.ctrlStop),t(document).off("expanded.pushMenu collapsed.pushMenu",this.updateSticky),this.clearVideos(),this.sticky&&(this.sticky.destroy(),this.sticky=null)},beforeRouteLeave:function(t,e,n){this.ctrlStop(),this.clearVideos(),n()},beforeRouteUpdate:function(t,e,n){this.ctrlStop(),this.clearVideos(),n()},watch:{q:function(t,e){this.$refs.devTree.filter(t),this.$refs.groupTree.filter(t)}},methods:{treeLoad:function(e,n){var r=this,i=e.serial||"",o=e.code||"";t.get("/api/v1/device/channeltree",{serial:i,pcode:o}).then(function(t){n((t||[]).map(function(t){return Object.assign(t,{key:t.id})})),r.$refs.devTree.filter(r.q)})},groupTreeLoad:function(e,n){var r=this,i=e.serial||"",o=e.code||"";t.get("/api/v1/device/grouptree",{serial:i,pcode:o}).then(function(t){n((t||[]).map(function(t){return Object.assign(t,{key:t.id})})),r.$refs.groupTree.filter(r.q)})},treeFilter:function(t,e){return!t||(-1!==e.name.indexOf(t)||-1!==e.customName.indexOf(t)||-1!==e.id.indexOf(t))},treeNodeRefresh:function(t){var e=this.$refs.devTree.getNode(t);e&&(e.loaded=!1,e.expand())},treeNodeRightClick:function(t,e,n,r){if(this.hasAnyRole(this.serverInfo,this.userInfo,"管理员")){this.contextMenuNodeData=e,this.pnode=n.parent;var i;"function"==typeof MouseEvent?i=new MouseEvent(t.type,t):(i=document.createEvent("MouseEvents"),i.initMouseEvent(t.type,!0,!0,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t)),this.contextMenuTarget.dispatchEvent(i)}},treeNodeClick:function(e,n,r){var i=this;if(this.contextMenuNodeData=null,this.treeLeaf(e)&&"ON"===e.status){var o=this.players[this.playerIdx]||{};if(o.bLoading)return;this.closeVideo(o),o.serial=e.serial,o.code=e.code,o.ptzType=e.ptzType,o.bLoading=!0,t.get("/api/v1/stream/start",{serial:e.serial,code:e.code}).then(function(t){t=t||{};var e=i.isMobile()?t.HLS:t.RTMP,n=i.isMobile()?"HLS":"RTMP";i.flvSupported()&&(t.WS_FLV?(e=t.WS_FLV,n="WS_FLV"):t.FLV&&(e=t.FLV,n="FLV")),o.protocol=n,o.poster="RTMP"==n?"":t.SnapURL,i.$nextTick(function(){o.url=e||""})}).fail(function(){i.$nextTick(function(){o.bLoading=!1})}),this.setPlayerIdx(this.playerIdx+1)}},showNodeEditDlg:function(){this.contextMenuVisible=!1;var t=Object.assign({},this.contextMenuNodeData,{parent:this.getParentData(),add:!1});this.$refs.nodeEditDlg.show(t)},showNodeAddDlg:function(){this.contextMenuVisible=!1;var t=Object.assign({serial:this.contextMenuNodeData.serial||"",code:"",name:"",customName:""},{parent:this.contextMenuNodeData,add:!0});this.$refs.nodeEditDlg.show(t)},showCustomListDlg:function(){this.contextMenuVisible=!1,this.customListDlgTitle="选择通道("+(this.contextMenuNodeData.customName||this.contextMenuNodeData.name||this.contextMenuNodeData.code)+")",this.$refs.customListDlg.show(this.contextMenuNodeData.code)},removeCustomNode:function(){var e=this;if(this.contextMenuVisible=!1,this.contextMenuNodeData){var n=this.contextMenuNodeData.customName||this.contextMenuNodeData.name||this.contextMenuNodeData.id;this.$confirm("确认删除 "+n,"提示").then(function(){t.get("/api/v1/channel/remove",{serial:e.contextMenuNodeData.serial,code:e.contextMenuNodeData.code}).always(function(){e.treeNodeRefresh(e.pnode)})}).catch(function(){})}},treeRefresh:function(){var t=this;if(this.contextMenuVisible=!1,this.pnode)return void this.treeNodeRefresh(this.pnode);this.showTree=!1,this.$nextTick(function(){t.showTree=!0})},treeLeaf:function(t){if(t&&0==t.subCount&&t.serial&&t.code&&!t.custom){if(this.serverInfo.StrictChannelParental&&t.parental)return!1;if(this.serverInfo.StrictChannelCode&&20!=t.code.length)return!1;if((!t.parental||"LiveQing"!=t.manufacturer)&&(20!=t.code.length||"216"!=t.code.substring(10,13)&&"215"!=t.code.substring(10,13)))return!0}return!1},getParentData:function(){if(!this.contextMenuNodeData)return null;if(!this.$refs.devTree)return null;var t=this.$refs.devTree.getNode(this.contextMenuNodeData);return t&&t.parent?t.parent.data:null},resetCloseTimer:function(t){t&&(t.bCloseShow=!0,t.closeTimer&&clearTimeout(t.closeTimer),t.closeTimer=setTimeout(function(){t.bCloseShow=!1},2e3))},closeVideo:function(t){t&&(t.bLoading=!1,t.bCloseShow=!1,t.poster="",t.url="")},clearVideos:function(){for(var t in this.players)this.closeVideo(this.players[t])},setPlayersLength:function(t){if(t!=this.players.length){this.clearVideos(),this.players=[],this.playersLength=t;for(var e=0;e<t;e++)this.players.push({serial:"",code:"",url:"",protocol:"",poster:"",bLoading:!1,bCloseShow:!1})}},setPlayerIdx:function(t){this.ctrlStop(),this.playerIdx=t%this.players.length},clickPlayer:function(e,n,r){t(r.target).hasClass("video-close")||this.setPlayerIdx(n)},ptzControl:function(e){var n=this.players[this.playerIdx];if(n&&n.serial&&n.code){var r=t(e.currentTarget);t.get("/api/v1/control/ptz",{serial:n.serial,code:n.code,command:r.attr("command")}),r.addClass("active")}},ptzStop:function(){var e=this.players[this.playerIdx];e&&e.serial&&e.code&&t(this.$el).find(".ptz-cell.active").length>0&&(t.get("/api/v1/control/ptz",{serial:e.serial,code:e.code,command:"stop"}),t(this.$el).find(".ptz-cell.active").removeClass("active"))},talkStart:function(e){var n=this;if(!this.ws){var r=this.wsTalkURL();if(!r)return;var i=new WebSocket(r);i.onopen=function(t){console.log("ws talk open"),n.ws=i},i.onclose=function(t){console.log("ws talk close")},i.onerror=function(t){console.log("ws talk error",t)}}var o=t(e.currentTarget);if(this.recorder)return o.addClass("active"),void this.recorder.start();LiveRecorder.get(function(t,e){if(e)return void alert(e);o.addClass("active"),n.recorder=t,n.recorder.start()},{sampleBits:16,sampleRate:8e3,pcmCallback:function(t){var e=new window.FileReader;e.onloadend=function(){var t=e.result,t=t.split(",")[1];n.ws&&n.ws.send(t)},e.readAsDataURL(t)}})},talkStop:function(){this.recorder&&(this.recorder.stop(),t(this.$el).find(".fa-microphone.active").removeClass("active")),this.ws&&(this.ws.close(),this.ws=null)},ctrlStop:function(){this.talkStop(),this.ptzStop()},wsTalkURL:function(){var t=this.players[this.playerIdx];if(!t||!t.serial||!t.code)return"";var e="ws:";return location.protocol.startsWith("https")&&(e="wss:"),e+"//"+location.host+"/api/v1/control/ws-talk/"+t.serial+"/"+t.code+"?format=pcm"},resetTreeMaxHeight:function(){var e=t("#dev-tree, #group-tree");this.isMobile()?e.css("max-height",200):this.$nextTick(function(){var n=t("#dev-tree-player").height()-90,r=t(window).height()-450,i=r>n?r:n;e.css("max-height",i)})},updateSticky:function(){this.sticky&&this.sticky.update()}}}}).call(e,n("0iPh"))},j60P:function(t,e,n){e=t.exports=n("FZ+f")(void 0),e.push([t.i,"#dev-tree-player .view-list .video-show .video{border:1px solid #fff}#dev-tree-player .view-list .video-show .video.active .video-inner{border:2px solid red}#dev-tree-player .view-list .video-show .col-sm-12:first-child{border:0}#dev-tree-player .view-list .video-show .col-sm-6:first-child,#dev-tree-player .view-list .video-show .col-sm-6:nth-child(2){border-top-color:transparent}#dev-tree-player .view-list .video-show .col-sm-6:nth-child(2),#dev-tree-player .view-list .video-show .col-sm-6:nth-child(4){border-right-color:transparent}#dev-tree-player .view-list .video-show .col-sm-6:first-child,#dev-tree-player .view-list .video-show .col-sm-6:nth-child(3){border-left-color:transparent}#dev-tree-player .view-list .video-show .col-sm-6:nth-child(3),#dev-tree-player .view-list .video-show .col-sm-6:nth-child(4){border-bottom-color:transparent}#dev-tree-player .view-list .video-show .col-sm-4:first-child,#dev-tree-player .view-list .video-show .col-sm-4:nth-child(2),#dev-tree-player .view-list .video-show .col-sm-4:nth-child(3){border-top-color:transparent}#dev-tree-player .view-list .video-show .col-sm-4:nth-child(3),#dev-tree-player .view-list .video-show .col-sm-4:nth-child(6),#dev-tree-player .view-list .video-show .col-sm-4:nth-child(9){border-right-color:transparent}#dev-tree-player .view-list .video-show .col-sm-4:nth-child(7),#dev-tree-player .view-list .video-show .col-sm-4:nth-child(8),#dev-tree-player .view-list .video-show .col-sm-4:nth-child(9){border-bottom-color:transparent}#dev-tree-player .view-list .video-show .col-sm-4:first-child,#dev-tree-player .view-list .video-show .col-sm-4:nth-child(4),#dev-tree-player .view-list .video-show .col-sm-4:nth-child(7){border-left-color:transparent}#dev-tree-player .view-list .video-show .col-sm-3:first-child,#dev-tree-player .view-list .video-show .col-sm-3:nth-child(2),#dev-tree-player .view-list .video-show .col-sm-3:nth-child(3),#dev-tree-player .view-list .video-show .col-sm-3:nth-child(4){border-top-color:transparent}#dev-tree-player .view-list .video-show .col-sm-3:nth-child(4),#dev-tree-player .view-list .video-show .col-sm-3:nth-child(8),#dev-tree-player .view-list .video-show .col-sm-3:nth-child(12),#dev-tree-player .view-list .video-show .col-sm-3:nth-child(16){border-right-color:transparent}#dev-tree-player .view-list .video-show .col-sm-3:nth-child(13),#dev-tree-player .view-list .video-show .col-sm-3:nth-child(14),#dev-tree-player .view-list .video-show .col-sm-3:nth-child(15),#dev-tree-player .view-list .video-show .col-sm-3:nth-child(16){border-bottom-color:transparent}#dev-tree-player .view-list .video-show .col-sm-3:first-child,#dev-tree-player .view-list .video-show .col-sm-3:nth-child(5),#dev-tree-player .view-list .video-show .col-sm-3:nth-child(9),#dev-tree-player .view-list .video-show .col-sm-3:nth-child(13){border-left-color:transparent}",""])},jlJA:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal fade upload-dlg",attrs:{"data-backdrop":"static","data-keyboard":"true",tabindex:"-1"}},[n("div",{staticClass:"modal-dialog"},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),n("h4",{staticClass:"modal-title text-center text-info"},[n("span",[t._v(t._s(t.title))])])]),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("header"),t._v(" "),n("el-upload",{ref:"uploader",attrs:{drag:t.drag,action:t.url,multiple:t.multiple,"show-file-list":t.showFileList,limit:1,"on-success":t.onSuccess,"on-progress":t.onProgress,"on-error":t.onError,"on-remove":t.onRemove,accept:t.accept,"before-upload":t.beforeUpload,"auto-upload":t.autoUpload}},[n("i",{staticClass:"el-icon-upload"}),t._v(" "),n("div",{staticClass:"el-upload__text"},[t._v("将配置数据拖到此处，或 "),n("em",[t._v("点击上传")])]),t._v(" "),n("div",{staticClass:"el-upload__tip text-center",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.tip)),n("span",{staticStyle:{color:"red"}},[t._v(" *上传成功会自动删除原有数据，请注意导出备份*")])])]),t._v(" "),t._t("footer")],2),t._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal",disabled:t.bProgress}},[t._v("关闭")])])])])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],o={render:r,staticRenderFns:i};e.a=o},kW5H:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"el-timeline-item"},[n("div",{staticClass:"el-timeline-item__tail"}),t._v(" "),t.$slots.dot?t._e():n("div",{staticClass:"el-timeline-item__node",class:["el-timeline-item__node--"+(t.size||""),"el-timeline-item__node--"+(t.type||"")],style:{backgroundColor:t.color}},[t.icon?n("i",{staticClass:"el-timeline-item__icon",class:t.icon}):t._e()]),t._v(" "),t.$slots.dot?n("div",{staticClass:"el-timeline-item__dot"},[t._t("dot")],2):t._e(),t._v(" "),n("div",{staticClass:"el-timeline-item__wrapper"},[t.hideTimestamp||"top"!==t.placement?t._e():n("div",{staticClass:"el-timeline-item__timestamp is-top"},[t._v("\n      "+t._s(t.timestamp)+"\n    ")]),t._v(" "),n("div",{staticClass:"el-timeline-item__content"},[t._t("default")],2),t._v(" "),t.hideTimestamp||"bottom"!==t.placement?t._e():n("div",{staticClass:"el-timeline-item__timestamp is-bottom"},[t._v("\n      "+t._s(t.timestamp)+"\n    ")])])])},i=[],o={render:r,staticRenderFns:i};e.a=o},kyfW:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormDlg",{ref:"dlg",attrs:{title:"编辑通道名称",disabled:t.errors.any()},on:{hide:t.onHide,show:t.onShow,submit:t.onSubmit}},[n("div",{class:{"form-group":!0,"has-error":t.errors.has("serial")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-serial"}},[t._v("设备编号\n            "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{staticClass:"form-control",attrs:{type:"text",readonly:"readonly",id:"input-serial",name:"serial","data-vv-as":"设备编号"},domProps:{value:t.form.serial}})])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("code")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-code"}},[t._v("通道编号\n            "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{staticClass:"form-control",attrs:{type:"text",readonly:"readonly",id:"input-code",name:"code","data-vv-as":"通道编号"},domProps:{value:t.form.code}})])]),t._v(" "),n("div",{class:{"form-group":!0,"has-error":t.errors.has("name")}},[n("label",{staticClass:"col-sm-4 control-label",attrs:{for:"input-name"}},[t._v("自定义名称\n        ")]),t._v(" "),n("div",{staticClass:"col-sm-7"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.customName,expression:"form.customName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"input-name",name:"name",placeholder:t.form.name||"-","data-vv-as":"自定义名称"},domProps:{value:t.form.customName},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.onSubmit(e)},input:function(e){e.target.composing||t.$set(t.form,"customName",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])])])},i=[],o={render:r,staticRenderFns:i};e.a=o},lN7H:function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n("M4fF"),a=r(o),s=n("VMXz"),l=r(s),u=n("5gxX"),c=r(u),f=n("IaS+"),d=r(f),v=n("sJmG"),p=r(v),h=n("jjQp"),m=r(h),g=n("MR46"),_=r(g),y=n("NYxO");e.default={props:{devid:{type:String,default:""},name:{type:String,default:""}},data:function(){return{q:"",online:"",devOnline:!1,channel_type:"",dir_serial:"",total:0,pageSize:10,currentPage:1,sort:"Channel",order:"asc",loading:!1,timer:0,channels:[],uploadThisDev:!1}},computed:i({},(0,y.mapState)(["userInfo","serverInfo"]),{uploadURL:function(){return this.uploadThisDev&&this.devid?"/api/v1/channel/import?serial="+this.devid:"/api/v1/channel/import"}}),components:{ChannelExportDlg:l.default,UploadDlg:c.default,ChannelNameEditDlg:d.default,ChannelPositionEditDlg:p.default,VideoDlg:m.default,DeviceLogDlg:_.default},mounted:function(){},beforeDestroy:function(){this.timer&&(clearInterval(this.timer),this.timer=0)},methods:{ready:function(){var t=this;this.unWatchQ=this.$watch("q",function(t,e){this.doDelaySearch()}),this.unWatchOnline=this.$watch("online",function(t,e){this.doSearch()}),this.unWatchChannelType=this.$watch("channel_type",function(t,e){this.doSearch()}),this.unWatchDirSerial=this.$watch("dir_serial",function(t,e){this.doSearch()}),this.unWatchCurrentPage=this.$watch("currentPage",function(t,e){this.doSearch(t)}),this.timer=setInterval(function(){t.getChannels(!1)},3e3)},undoReady:function(){this.unWatchQ&&(this.unWatchQ(),this.unWatchQ=null),this.unWatchOnline&&(this.unWatchOnline(),this.unWatchOnline=null),this.unWatchChannelType&&(this.unWatchChannelType(),this.unWatchChannelType=null),this.unWatchDirSerial&&(this.unWatchDirSerial(),this.unWatchDirSerial=null),this.unWatchCurrentPage&&(this.unWatchCurrentPage(),this.unWatchCurrentPage=null),this.timer&&(clearInterval(this.timer),this.timer=0)},keyDown:function(t){27==t.keyCode&&this.$el.querySelector(".fa-chevron-left").click()},isMobile:function(){return videojs.browser.IS_IOS||videojs.browser.IS_ANDROID},doSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e={};this.q&&(e.q=this.q),this.online&&(e.online=this.online),this.channel_type&&(e.channel_type=this.channel_type),this.dir_serial&&(e.dir_serial=this.dir_serial),this.$router.replace({path:"/devices/channels/"+this.devid+"/"+t,query:e})},doDelaySearch:a.default.debounce(function(){this.doSearch()},800),getChannels:function(){var e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n&&(this.loading=!0),t.ajax({method:"GET",url:"/api/v1/device/channellist",global:n,data:{serial:this.devid,q:this.q,start:(this.currentPage-1)*this.pageSize,limit:this.pageSize,online:this.online,channel_type:this.channel_type,dir_serial:this.dir_serial,sort:this.sort,order:this.order}}).then(function(t){e.total=t.ChannelCount,e.channels=t.ChannelList}).always(function(){n&&e.$nextTick(function(){e.loading=!1})})},uploaded:function(){this.$message({type:"success",message:"上传成功！"}),this.getChannels(),this.$refs.uploadDlg.hide()},sortChange:function(t){this.sort=t.prop,this.order="ascending"==t.order?"asc":"desc",this.getChannels()},canPlay:function(t){if(t&&t.DeviceOnline&&"ON"==(t.CustomStatus||t.Status)&&!t.Custom&&0==t.SubCount){if(this.serverInfo.StrictChannelParental&&1==t.Parental)return!1;if(this.serverInfo.StrictChannelCode&&20!=t.ID.length)return!1;if((1!=t.Parental||"LiveQing"!=t.Manufacturer)&&(20!=t.ID.length||"216"!=t.ID.substring(10,13)&&"215"!=t.ID.substring(10,13)))return!0}return!1},canPlayback:function(t){if(t&&t.DeviceOnline&&!t.Custom&&0==t.SubCount){if(this.serverInfo.StrictChannelParental&&1==t.Parental)return!1;if(this.serverInfo.StrictChannelCode&&20!=t.ID.length)return!1;if((1!=t.Parental||"LiveQing"!=t.Manufacturer)&&(20!=t.ID.length||"216"!=t.ID.substring(10,13)&&"215"!=t.ID.substring(10,13)))return!0}return!1},isDir:function(t){if(t){if(t.SubCount>0)return!0;if(this.serverInfo.StrictChannelParental&&1==t.Parental)return!0;if(this.serverInfo.StrictChannelCode&&t.ID.length<=10)return!0;if(1==t.Parental&&"LiveQing"==t.Manufacturer)return!0;if(20==t.ID.length&&("216"==t.ID.substring(10,13)||"215"==t.ID.substring(10,13)))return!0}return!1},canFetchCatalog:function(t){return!(!this.isDir(t)||!t.DeviceOnline||t.ID==this.devid)},formatName:function(t,e,n){return t.CustomName||t.Name||"-"},formatPTZType:function(t,e,n){var r="未知";switch(t.CustomPTZType||t.PTZType){case 1:r="球机";break;case 2:r="半球";break;case 3:r="固定枪机";break;case 4:r="遥控枪机"}return r},formatPosition:function(t,e,n){var r="-";return t.CustomLongitude||t.CustomLatitude?r=t.CustomLongitude+","+t.CustomLatitude:(t.Longitude||t.Latitude)&&(r=t.Longitude+","+t.Latitude),r},setPTZType:function(e){var n=e.PTZType;n===e.row.PTZType&&(n=0),e.row.CustomPTZType=n,t.get("/api/v1/device/setchannelptztype",{serial:e.row.DeviceID,code:e.row.ID,ptz_type:n})},toggleAudio:function(e){t.get("/api/v1/device/setchannelaudio",{serial:e.DeviceID,code:e.ID,audio:!e.AudioEnable}).then(function(){e.AudioEnable=!e.AudioEnable})},editChannelName:function(t){this.$refs.channelNameEditDlg.show({serial:t.DeviceID,code:t.ID,name:t.Name,custom:t.Custom,customName:t.CustomName})},editChannelPosition:function(t){this.$refs.channelPositionEditDlg.show({serial:t.DeviceID,code:t.ID,name:t.CustomName||t.Name,custom:t.Custom,longitude:t.Longitude,latitude:t.Latitude,customLongitude:t.CustomLongitude,customLatitude:t.CustomLatitude})},toggleOndemand:function(e){t.get("/api/v1/device/setchannelondemand",{serial:e.DeviceID,code:e.ID,ondemand:!e.Ondemand}).then(function(){e.Ondemand=!e.Ondemand})},toggleCloudRecord:function(e){var n=e.CloudRecord?"关闭云端录像, 是否同时设置 开启 按需直播?":"开启云端录像, 是否同时设置 关闭 按需直播?";this.$confirm(n,"提示",{distinguishCancelAndClose:!0,cancelButtonText:"不设置"}).then(function(){t.get("/api/v1/device/setchannelcloudrecord",{serial:e.DeviceID,code:e.ID,cloudrecord:!e.CloudRecord,ondemand:e.CloudRecord}).always(function(){e.Ondemand=e.CloudRecord,e.CloudRecord=!e.CloudRecord})}).catch(function(n){"cancel"===n&&t.get("/api/v1/device/setchannelcloudrecord",{serial:e.DeviceID,code:e.ID,cloudrecord:!e.CloudRecord}).then(function(){e.CloudRecord=!e.CloudRecord})})},toggleShared:function(e){t.get("/api/v1/device/setchannelshared",{serial:e.DeviceID,code:e.ID,shared:!e.Shared}).then(function(){e.Shared=!e.Shared})},playStream:function(e){var n=this;this.loading=!0,this.$set(e,"Locked",!0),t.get("/api/v1/stream/start",{serial:e.DeviceID,code:e.ID}).then(function(t){n.loading=!1,n.$nextTick(function(){n.$refs.videoDlg.play(e.CustomName||e.Name||e.ID,e.DeviceID,e.ID,t)})}).always(function(){n.$delete(e,"Locked"),n.$nextTick(function(){n.loading=!1})})},stopStream:function(e){var n=this;this.$confirm("确认停止直播 "+(e.Name||e.ID)+" ?","提示").then(function(){t.get("/api/v1/stream/stop",{serial:n.devid,code:e.ID}).always(function(){n.getChannels()})}).catch(function(){})},fetchCatalog:function(e){var n=this;t.ajax({method:"GET",url:"/api/v1/device/fetchcatalog",global:!1,data:{serial:this.devid,code:e.ID}}).then(function(){n.$message({type:"success",message:"更新通道信息成功"})}).fail(function(t){t&&console.log("fetch catalog ajax error: "+t.status+" "+t.responseText)})},removeVirtual:function(e){var n=this;this.$confirm("确认删除虚拟通道 "+(e.Name||e.ID)+" ?","提示").then(function(){t.get("/api/v1/channel/virtual/remove",{serial:n.devid,code:e.ID}).always(function(){n.getChannels()})}).catch(function(){})},showDeviceLog:function(t){this.$refs.deviceLogDlg.show("通道("+t.ID+")",t.DeviceID,t.ID)},showStatusLog:function(t){this.$refs.deviceLogDlg.showStatusLog("通道("+t.ID+")",t.DeviceID,t.ID)},showStreamLog:function(t){this.$refs.deviceLogDlg.showStreamLog("通道("+t.ID+")",t.DeviceID,t.ID)}},beforeRouteEnter:function(t,e,n){n(function(e){e.q=t.query.q||"",e.online=t.query.online||"",e.channel_type=t.query.channel_type||"",e.dir_serial=t.query.dir_serial||"",e.currentPage=parseInt(t.params.page)||1,e.ready()})},beforeRouteLeave:function(t,e,n){this.timer&&(clearInterval(this.timer),this.timer=0),n()},beforeRouteUpdate:function(t,e,n){var r=this;this.undoReady(),n(),this.$nextTick(function(){r.q=t.query.q||"",r.online=t.query.online||"",r.channel_type=t.query.channel_type||"",r.dir_serial=t.query.dir_serial||"",r.currentPage=parseInt(t.params.page)||1,r.channels=[],r.total=0,r.getChannels(),r.ready()})}}}).call(e,n("0iPh"))},lgdx:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{bShow:!1,timer:0,title:"",streamID:"",progress:0,fileUrl:""}},props:{fade:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{btnText:function(){return this.fileUrl?"下载":"关闭"}},mounted:function(){var e=this;t(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),t(this.$el).on("shown.bs.modal",function(){e.bShow=!0,e.$emit("show"),e.streamID&&(e.timer=setInterval(function(){t.ajax({type:"GET",url:"/api/v1/playback/streaminfo",data:{streamid:e.streamID},global:!1}).then(function(t){e.progress=Math.ceil(100*t.Progress),e.fileUrl=t.PlaybackFileURL}).fail(function(){e.progress=100})},3e3))}).on("hidden.bs.modal",function(){e.bShow=!1,e.$emit("hide"),e.timer&&(clearInterval(e.timer),e.timer=0),e.streamID&&t.get("/api/v1/playback/stop",{streamid:e.streamID}).then(function(){}).always(function(){e.fileUrl&&(window.open(e.fileUrl,"_blank"),e.fileUrl=""),e.streamID="",e.progress=0})})},beforeDestroy:function(){this.timer&&(clearInterval(this.timer),this.timer=0)},methods:{show:function(){t(this.$el).modal("show")},hide:function(){t(this.$el).modal("hide")},doSubmit:function(){this.$emit("submit")},download:function(e,n){this.title=e,this.streamID=n,this.fileUrl="",this.progress=0,t(this.$el).modal("show")},scale:function(e){t.get("/api/v1/playback/control",{streamid:this.streamID,command:"scale",scale:e})}}}}).call(e,n("0iPh"))},mDIj:function(t,e,n){e=t.exports=n("FZ+f")(void 0),e.push([t.i,".modal-title[data-v-721c7667]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}",""])},mLC9:function(t,e,n){var r=n("OPN8");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("18a08af2",r,!0)},mZnh:function(t,e,n){"use strict";function r(t){n("Ra6S")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("lN7H"),o=n.n(i),a=n("Gbjb"),s=n("VU/8"),l=r,u=s(o.a,a.a,l,null,null);e.default=u.exports},mgt0:function(t,e,n){var r=n("n/Ai");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("586b3c19",r,!0)},"n/Ai":function(t,e,n){e=t.exports=n("FZ+f")(void 0),e.push([t.i,".time-rule[data-v-3f3180a4]{overflow:hidden;position:relative;height:50px;margin:0 auto;width:100%;font-size:12px;max-width:1440px;background-color:#ccc}.time-day[data-v-3f3180a4]{position:absolute;left:0;top:0;height:100%;width:1440px;cursor:pointer;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.time-minute[data-v-3f3180a4]{float:left;height:8px;margin:0;cursor:default}.time-minute.active[data-v-3f3180a4]{background-color:#404d59;cursor:pointer}.time-text-first[data-v-3f3180a4],.time-text[data-v-3f3180a4]{float:left;width:60px;border-left:1px solid #999;border-top:1px solid #999;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;text-align:center;height:25px;line-height:25px}.time-text-first[data-v-3f3180a4]{border-left:0}.time-cursor[data-v-3f3180a4]{position:absolute;left:0;top:0;height:30px;width:2px;background-color:red;text-align:center}.time-cursor-text[data-v-3f3180a4]{position:absolute;padding:0 5px;width:60px;left:-30px;top:30px;border:1px solid red;height:15px;line-height:15px;cursor:move;background-color:#fff;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}",""])},pVOQ:function(t,e,n){e=t.exports=n("FZ+f")(void 0),e.push([t.i,".datepicker{z-index:9999!important}",""])},qb8i:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("F8S1");var r=n("0iPh"),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={props:{title:{default:"上传"},url:{type:String,default:""},multiple:{type:Boolean,default:!0},drag:{type:Boolean,default:!0},showFileList:{type:Boolean,default:!0},accept:{default:".xlsx"},tip:{default:"仅限上传.xlsx"},limit:{type:Number,default:0},autoUpload:{type:Boolean,default:!0}},data:function(){return{bShow:!1,bProgress:!1}},mounted:function(){var t=this;(0,i.default)(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),(0,i.default)(this.$el).on("shown.bs.modal",function(){t.$emit("show"),t.bShow=!0}).on("hidden.bs.modal",function(){t.$emit("hide"),t.bShow=!1,t.$refs.uploader.clearFiles()}).on("hide.bs.modal",function(){if(t.bProgress)return t.$message({type:"error",message:"正在上传, 请稍后..."}),!1})},methods:{show:function(){(0,i.default)(this.$el).modal("show")},hide:function(){(0,i.default)(this.$el).modal("hide")},beforeUpload:function(t){return!(this.limit&&t.size>this.limit)||(this.$message({type:"error",message:"文件["+t.name+"]大小超过限制["+this.limit+"], 不能上传!"}),!1)},onSuccess:function(t,e,n){var r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(100!=l.percentage&&0!==l.percentage)return void(this.bProgress=!0)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}this.bProgress=!1,this.$emit("uploaded",e)},onProgress:function(t,e,n){this.bProgress=!0},onError:function(t,e,n){t&&this.$message({type:"error",message:t+""});var r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(100!=l.percentage&&0!==l.percentage)return void(this.bProgress=!0)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}this.bProgress=!1},onRemove:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(100!=s.percentage&&0!==s.percentage)return void(this.bProgress=!0)}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}this.bProgress=!1}}}},sJmG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("2xaA"),i=n.n(r),o=n("KWIQ"),a=n("VU/8"),s=a(i.a,o.a,null,null,null);e.default=s.exports},sv1C:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"time-rule"},[n("div",{ref:"day",staticClass:"time-day",style:{left:t.timeDayX+"px"}},[t._l(1440/t.minutesPerUnit,function(e){return n("div",{key:e,class:["time-minute",t.minuteActiveClass((e-1)*t.minutesPerUnit)],style:{width:t.minutesPerUnit+"px"},attrs:{title:t.minuteTitle((e-1)*t.minutesPerUnit)},on:{click:function(n){n.preventDefault(),t.clickMinute((e-1)*t.minutesPerUnit)}}})}),t._v(" "),t._l(24,function(e){return n("div",{key:e,class:[1==e?"time-text-first":"time-text"]},[t._v(t._s(t.hourText(e-1)))])})],2),t._v(" "),n("div",{ref:"cursor",staticClass:"time-cursor",style:{left:t.timeCursorX+"px"}},[n("div",{staticClass:"time-cursor-text"},[t._v(t._s(t.timeCursorText))])])])},i=[],o={render:r,staticRenderFns:i};e.a=o},toVl:function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n("M4fF"),s=(r(a),n("PJh5")),l=r(s),u=n("WEd6"),c=r(u),f=n("+ABx"),d=r(f),v=n("eAMf"),p=r(v),h=n("NYxO");e.default={props:{devid:{type:String,default:""},channel:{type:String,default:""},mode:{type:String,default:"timebox"},day:{type:String,default:function(){return(0,l.default)().format("YYYYMMDD")}}},data:function(){return{timerange:[(0,l.default)(this.day,"YYYYMMDD").startOf("hour").toDate(),(0,l.default)(this.day,"YYYYMMDD").startOf("hour").toDate()],videoLoading:!1,loading:!1,center:"",indistinct:"",records:[],currentTime:null,videos:[],video:null,videoUrl:"",streamID:"",touchTimer:0,switchTimer:0}},computed:o({},(0,h.mapState)(["userInfo","serverInfo"])),components:{DatePicker:c.default,LivePlayer:p.default,TimeRule:d.default},methods:{ready:function(){this.$watch("day",function(t,e){this.timerange=[(0,l.default)(this.day,"YYYYMMDD").startOf("hour").toDate(),(0,l.default)(this.day,"YYYYMMDD").startOf("hour").toDate()]}),this.$watch("center",function(t,e){this.timerange=[(0,l.default)(this.day,"YYYYMMDD").startOf("hour").toDate(),(0,l.default)(this.day,"YYYYMMDD").startOf("hour").toDate()]}),this.$watch("indistinct",function(t,e){this.timerange=[(0,l.default)(this.day,"YYYYMMDD").startOf("hour").toDate(),(0,l.default)(this.day,"YYYYMMDD").startOf("hour").toDate()]}),this.$watch("video",function(t,e){t&&t!=e?this.startPlayback():this.stopPlayback()});var e=(0,l.default)(),n=e.diff(e.clone().startOf("day"),"minutes");n-=10,n<0&&(n=0),this.$refs.timeRule.clickMinute(n),console.log(this.devid,this.channel,this.day),this.getRecords(!0),t(window).on("beforeunload",this.beforeUnload)},keyDown:function(t){27==t.keyCode&&this.$el.querySelector(".fa-chevron-left").click()},isMobile:function(){return videojs.browser.IS_IOS||videojs.browser.IS_ANDROID},showDatePicker:function(){t(this.$refs.datePicker.$el).focus()},updateDay:function(t){var e=this;this.$nextTick(function(){e.$router.replace({path:"/devices/playback/"+e.mode+"/"+e.devid+"/"+e.channel+"/"+t,query:Object.assign({},e.$route.query,{center:e.center,indistinct:e.indistinct})})})},nextTimeRange:function(){var t=(0,l.default)(this.day,"YYYYMMDD").endOf("day"),e=(0,l.default)().startOf("second");t.isAfter(e,"second")&&(t=e);var n=(0,l.default)(this.timerange[1]);if(n.isSameOrAfter(t,"second"))return!1;var r=(0,l.default)(this.timerange[1]).add(6,"hours");return r.isAfter(t)&&(r=t),!r.clone().startOf("minute").isSameOrBefore(n.clone().startOf("minute"),"second")&&(console.log(n.format("YY-MM-DD HH:mm:ss"),"~",r.format("YY-MM-DD HH:mm:ss"),"loading..."),this.timerange=[n.toDate(),r.toDate()],!0)},getRecords:function(e){var n=this;if(e&&(this.loading=!0,this.records=[]),!this.nextTimeRange())return this.videos=this.records,void this.$nextTick(function(){n.loading=!1});t.ajax({method:"GET",url:"/api/v1/playback/recordlist",global:!1,data:{timeout:this.serverInfo.RecordListTimeout||5,serial:this.devid,code:this.channel,center:this.center,indistinct:this.indistinct,starttime:(0,l.default)(this.timerange[0]).format("YYYY-MM-DDTHH:mm:ss"),endtime:(0,l.default)(this.timerange[1]).format("YYYY-MM-DDTHH:mm:ss")}}).then(function(t){var e=t.RecordList||[];n.records=n.records.concat(e.filter(function(t){return!!(t&&t.StartTime&&t.EndTime)&&(!n.records.some(function(e){return e.StartTime===t.StartTime&&e.EndTime===t.EndTime})||(console.log("repeat",t.StartTime,"~",t.EndTime),!1))}))}).always(function(){n.$nextTick(function(){n.getRecords(!1)})})},stopPlayback:function(){var e=this;return new Promise(function(n,r){if(e.switchTimer&&(clearTimeout(e.switchTimer),e.switchTimer=0),e.videoUrl="",e.touchTimer&&(clearInterval(e.touchTimer),e.touchTimer=0),!e.streamID)return void n();t.ajax({method:"GET",url:"/api/v1/playback/stop",global:!1,data:{streamid:e.streamID}}).always(function(){n()}),e.streamID=""})},beforeUnload:function(t){this.stopPlayback(),t.preventDefault(),t.returnValue=""},startPlayback:function(){var e=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.stopPlayback();case 2:if(e.video){n.next=4;break}return n.abrupt("return");case 4:e.videoLoading=!0,t.get("/api/v1/playback/start",{serial:e.devid,code:e.channel,starttime:e.video.StartTime,endtime:e.video.EndTime}).then(function(t){var n=e.isMobile()?t.HLS:t.RTMP;switch(e.flvSupported()&&(n=e.isIE()?t.WS_FLV:t.FLV),String(e.serverInfo.PreferStreamFmt).toUpperCase()){case"WEBRTC":e.rtcSupported()&&(n=t.WEBRTC);break;case"FLV":e.flvSupported()&&!e.isIE()&&(n=t.FLV);break;case"WS_FLV":case"WS-FLV":e.flvSupported()&&(n=t.WS_FLV);break;case"HLS":n=t.HLS;break;case"RTMP":n=t.RTMP}e.streamID=t.StreamID,e.videoUrl=n}).fail(function(){e.$nextTick(function(){e.videoLoading=!1})});case 6:case"end":return n.stop()}},n,e)}))()},touchPlayback:function(){this.streamID&&t.get("/api/v1/playback/touch",{streamid:this.streamID})},toListView:function(){this.$router.replace({path:"/devices/playback/list/"+this.devid+"/"+this.channel+"/"+this.day,query:Object.assign({},this.$route.query,{center:this.center,indistinct:this.indistinct})})},onTimeChange:function(t){this.video=t},onVideoEnd:function(){},onVideoError:function(t){if(this.video){var e=(0,l.default)(this.video.EndTime,"YYYY-MM-DDTHH:mm:ss");e.add(5,"minutes");var n=e.diff(e.clone().startOf("day"),"minutes");this.$refs.timeRule.clickMinute(n)}},onVideoTimeUpdate:function(t){var e=this;if(this.video){var n=(0,l.default)(this.video.StartTime,"YYYY-MM-DDTHH:mm:ss");n.add(t,"seconds");var r=n.diff(n.clone().startOf("day"),"minutes");this.$refs.timeRule.clickMinute(r,!1);var i=(0,l.default)(this.video.EndTime,"YYYY-MM-DDTHH:mm:ss");i.diff(n,"seconds")-t<3&&!this.switchTimer&&(this.switchTimer=setTimeout(function(){i.add(5,"minutes");var t=i.diff(i.clone().startOf("day"),"minutes");e.$refs.timeRule.clickMinute(t)},3e3))}}},mounted:function(){},beforeDestroy:function(){t(window).off("beforeunload",this.beforeUnload),this.stopPlayback()},beforeRouteLeave:function(t,e,n){this.stopPlayback(),n()},beforeRouteEnter:function(t,e,n){n(function(e){e.center=t.query.center,e.indistinct=t.query.indistinct,e.ready()})},beforeRouteUpdate:function(t,e,n){var r=this;this.center=t.query.center,this.indistinct=t.query.indistinct,this.stopPlayback(),n(),this.$nextTick(function(){r.loading||(console.log(r.devid,r.channel,r.day),r.getRecords(!0))})}}}).call(e,n("0iPh"))},tviW:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var o=n("A9K1"),a=r(o),s=n("0iPh"),l=r(s);e.default={props:{useSeparateDevicePassword:{type:Boolean,default:!1}},data:function(){return{form:this.defForm(),smsList:[],smsGroupList:[],dropChannelTypes:[],innerChannelTypes:{134:"报警输入",135:"报警输出",136:"语音输入",137:"语音输出",200:"中心信令",215:"业务分组",216:"虚拟组织"},innerStreamModes:{"":"自动选择","stream:0":"主码流","stream:1":"子码流","streamMode:MAIN":"主码流","streamMode:SUB":"子码流","streamprofile:0":"主码流","streamprofile:1":"子码流"},ctrl:!1,alt:!1,showSubscribeInterval:!1,showPosition:!1}},components:{FormDlg:a.default},computed:{alertMsg:function(){var t=[];this.form.stream_mode&&t.push("码流索引, 需要下级支持");var e="";return t.length>0&&(e=t.join(", ")),e}},methods:{defForm:function(){return{serial:"",name:"",media_transport:"UDP",media_transport_mode:"passive",stream_mode:"",sms_id:"",sms_group_id:"",recv_stream_ip:"",contact_ip:"",charset:"",catalog_interval:3600,subscribe_interval:0,catalog_subscribe:!1,alarm_subscribe:!1,position_subscribe:!1,record_center:!1,record_indistinct:!1,civil_code_first:!1,password:"",drop_channel_type:"",longitude:0,latitude:0}},onHide:function(){this.ctrl=!1,this.alt=!1,this.showSubscribeInterval=!1,this.showPosition=!1,this.form=this.defForm(),this.dropChannelTypes=[],this.$emit("hide"),(0,l.default)(this.$el).off("keydown",this.keyDown).off("keyup",this.keyUp)},onShow:function(){this.errors.clear(),this.$emit("show"),(0,l.default)(this.$el).on("keydown",this.keyDown).on("keyup",this.keyUp)},keyDown:function(t){17==t.keyCode&&(this.ctrl=!0),18==t.keyCode&&(this.alt=!0)},keyUp:function(t){},onMediaTransportChange:function(t){"UDP"==t&&(this.form.media_transport_mode="passive")},fetchSMSList:function(){return new Promise(function(t,e){l.default.get("/api/v1/sms/list").then(function(e){t(e.map(function(t){return{id:t.Serial||"",name:t.Serial||"",group:t.GroupID||""}}))}).fail(function(){t([])})})},onSubmit:function(){var t=this;return i(regeneratorRuntime.mark(function e(){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$validator.validateAll();case 2:if(n=e.sent){e.next=8;break}return r=t.errors.items[0],t.$message({type:"error",message:r.msg}),(0,l.default)("[name="+r.field+"]").focus(),e.abrupt("return");case 8:i=Object.assign({},t.form),i.drop_channel_type=t.dropChannelTypes.join(","),i.longitude||(i.longitude=0),i.latitude||(i.latitude=0),l.default.get("/api/v1/device/setinfo",i).then(function(e){t.$refs.dlg.hide(),t.$emit("submit")});case 13:case"end":return e.stop()}},e,t)}))()},show:function(t){var e=this;return i(regeneratorRuntime.mark(function n(){var r,i,o,a,s,l,u,c,f,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.errors.clear(),t&&Object.assign(e.form,t),e.form.drop_channel_type&&(e.dropChannelTypes=e.form.drop_channel_type.split(",")),e.form.subscribe_interval<0&&(e.showSubscribeInterval=!0),(e.form.longitude||e.form.latitude)&&(e.showPosition=!0),r=[],n.next=8,e.fetchSMSList();case 8:for(i=n.sent,o=!0,a=!1,s=void 0,n.prev=12,l=i[Symbol.iterator]();!(o=(u=l.next()).done);o=!0)c=u.value,c.group&&!r.some(function(t){return t.id==c.group})&&r.push({id:c.group,name:c.group});n.next=20;break;case 16:n.prev=16,n.t0=n.catch(12),a=!0,s=n.t0;case 20:n.prev=20,n.prev=21,!o&&l.return&&l.return();case 23:if(n.prev=23,!a){n.next=26;break}throw s;case 26:return n.finish(23);case 27:return n.finish(20);case 28:f=e.form.sms_id,f&&!i.some(function(t){return t.id==f})&&i.push({id:f,name:f+"(not found)"}),d=e.form.sms_group_id,d&&!r.some(function(t){return t.id==d})&&r.push({id:d,name:d+"(not found)"}),e.smsList=i,e.smsGroupList=r,e.form.subscribe_interval||(e.form.subscribe_interval=""),e.form.longitude||(e.form.longitude=""),e.form.latitude||(e.form.latitude=""),e.$nextTick(function(){e.$refs.dlg.show()});case 38:case"end":return n.stop()}},n,e,[[12,16,20,28],[21,,23,27]])}))()}}}},vy5B:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["modal",{fade:t.fade}],attrs:{"data-keyboard":"true","data-backdrop":"static",tabindex:"-1"}},[n("div",{staticClass:"modal-dialog modal-md"},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),n("h4",{staticClass:"modal-title text-primary text-center"},[n("span",[t._v(t._s(t.title))])])]),t._v(" "),n("div",{staticClass:"modal-body"},[n("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:t.progress}})],1),t._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.scale(1)}}},[t._v("x1")]),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.scale(2)}}},[t._v("x2")]),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.scale(4)}}},[t._v("x4")]),t._v(" "),n("button",{staticClass:"btn btn-default",attrs:{type:"button",disabled:t.disabled},on:{click:function(e){e.preventDefault(),t.hide(e)}}},[t._v(t._s(t.btnText))])])])])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],o={render:r,staticRenderFns:i};e.a=o},wQCP:function(t,e,n){var r=n("mDIj");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("4d654f07",r,!0)},wZh5:function(t,e,n){"use strict";function r(t){n("GiIX")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("xi4u"),o=n.n(i),a=n("7fJx"),s=n("VU/8"),l=r,u=s(o.a,a.a,l,"data-v-5eba259c",null);e.default=u.exports},xi4u:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),n("F8S1");var i=n("0iPh"),o=r(i),a=n("M4fF"),s=r(a);e.default={props:{title:{default:""},size:{type:String,default:""},fade:{type:Boolean,default:!1}},data:function(){return{q:"",channel_type:"",total:0,relateCnt:0,pageSize:10,currentPage:1,sort:"",order:"",related:!1,loading:!1,channels:[],selection:[],bak:{},pcode:""}},watch:{q:function(t,e){this.doDelaySearch()},channel_type:function(t,e){this.doSearch()},related:function(t,e){this.doSearch()},currentPage:function(t,e){this.doSearch(t)},pageSize:function(t,e){this.doSearch()}},mounted:function(){var t=this;(0,o.default)(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),(0,o.default)(this.$el).on("shown.bs.modal",function(){t.$emit("show")}).on("hidden.bs.modal",function(){t.errors.clear(),t.reset(),t.$emit("hide")})},methods:{sortChange:function(t){this.sort=t.prop,this.order="ascending"==t.order?"asc":"desc",this.getChannels()},select:function(t,e){var n=this;if(t.indexOf(e)>=0)o.default.get("/api/v1/channel/setcustomparent",{customs:[e.DeviceID+":"+e.ID+":"+this.pcode]}).then(function(){n.bak[e.DeviceID+":"+e.ID]=e.CustomParentID||""}).always(function(){n.getChannels()});else{var r=this.bak[e.DeviceID+":"+e.ID]||"";o.default.get("/api/v1/channel/setcustomparent",{customs:[e.DeviceID+":"+e.ID+":"+r]}).always(function(){n.getChannels()})}},selectAll:function(t){var e=this,n=[],r={};if(t.length){var i=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;this.selection.indexOf(c)<0&&(n.push(c.DeviceID+":"+c.ID+":"+this.pcode),r[c.DeviceID+":"+c.ID]=c.CustomParentID||"")}}catch(t){a=!0,s=t}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}o.default.get("/api/v1/channel/setcustomparent",{customs:n}).then(function(){e.bak=Object.assign(e.bak,r)}).always(function(){e.getChannels()})}else{var f=!0,d=!1,v=void 0;try{for(var p,h=this.selection[Symbol.iterator]();!(f=(p=h.next()).done);f=!0){var c=p.value,m=this.bak[c.DeviceID+":"+c.ID]||"";n.push(c.DeviceID+":"+c.ID+":"+m)}}catch(t){d=!0,v=t}finally{try{!f&&h.return&&h.return()}finally{if(d)throw v}}o.default.get("/api/v1/channel/setcustomparent",{customs:n}).always(function(){e.getChannels()})}},doSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=t,this.getChannels()},doDelaySearch:s.default.debounce(function(){this.doSearch()},800),formatName:function(t,e,n){return t.CustomName||t.Name||"-"},formatManufacturer:function(t,e,n){return n||"-"},selectable:function(t,e){return!0},getChannels:function(){var t=this;this.pcode&&(this.loading=!0,o.default.get("/api/v1/channel/customlist",{pcode:this.pcode,q:this.q,start:(this.currentPage-1)*this.pageSize,limit:this.pageSize,channel_type:this.channel_type,related:this.related,sort:this.sort,order:this.order}).then(function(e){t.$refs.channelTable.clearSelection(),t.total=e.ChannelCount,t.relateCnt=e.ChannelRelateCount,t.channels=e.ChannelList||[],t.selection=[],t.$nextTick(function(){t.channels.forEach(function(e){var n=e.CustomParentID==t.pcode;t.$refs.channelTable.toggleRowSelection(e,n),n&&t.selection.push(e)})})}).always(function(){t.$nextTick(function(){t.loading=!1})}))},reset:function(){this.pcode="",this.$refs.channelTable.clearSelection(),this.channels=[],this.selection=[],this.bak={},this.q="",this.channel_type="",this.related=!1,this.currentPage=1,this.pageSize=10},show:function(t){this.pcode=t,(0,o.default)(this.$el).modal("show"),this.getChannels()},hide:function(){(0,o.default)(this.$el).modal("hide")}}}},"y+T/":function(t,e,n){var r=n("Cml9");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("21229474",r,!0)},zskV:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["modal",{fade:t.fade}],attrs:{"data-backdrop":"static","data-disable":"false","data-keyboard":"true",tabindex:"-1"}},[n("div",{class:["modal-dialog",t.size]},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),n("h4",{staticClass:"modal-title text-center text-primary"},[n("span",[t._v(t._s(t.title))])])]),t._v(" "),n("div",{staticClass:"modal-body"},[n("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.tabName,callback:function(e){t.tabName=e},expression:"tabName"}},[n("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.bStatusLogLoading,expression:"bStatusLogLoading"}],attrs:{name:"status","element-loading-text":"加载中..."}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"fa fa-list-ul"}),t._v(" 状态记录")]),t._v(" "),t.statusLogs.length>0?n("el-timeline",{staticStyle:{"margin-top":"10px","min-height":"200px","max-height":"450px","overflow-y":"auto"}},t._l(t.statusLogs,function(e,r){return n("el-timeline-item",{key:r,attrs:{type:t.statusTimeLineType(e),timestamp:e.CreatedAt}},[t._v("\n                                "+t._s(e.Description)+"\n                            ")])})):n("p",{staticClass:"text-center"},[n("br"),t._v(" "),t.bStatusLogLoading?n("span",[t._v("暂无数据")]):t.statusDays&&t.statusDays>0?n("span",[t._v("最近"+t._s(t.statusDays)+"天没有状态变更记录")]):n("span",[t._v("未找到最近的状态变更记录")])])],1),t._v(" "),n("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.bStreamLogLoading,expression:"bStreamLogLoading"}],attrs:{name:"stream","element-loading-text":"加载中..."}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"fa fa-bar-chart"}),t._v(" 流量统计")]),t._v(" "),n("br"),t._v(" "),n("el-radio-group",{attrs:{size:"mini"},on:{change:t.changeStreamLogType},model:{value:t.streamLogType,callback:function(e){t.streamLogType=e},expression:"streamLogType"}},[n("el-radio-button",{attrs:{label:"today"}},[t._v("今天")]),t._v(" "),n("el-radio-button",{attrs:{label:"yesterday"}},[t._v("昨天")]),t._v(" "),n("el-radio-button",{attrs:{label:"week"}},[t._v("最近7天")]),t._v(" "),n("el-radio-button",{attrs:{label:"month"}},[t._v("最近30天")])],1),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("ve-line",{ref:"streamChart",attrs:{height:"300px",colors:t.chartColors,data:t.streamLogs,extend:t.streamLogExtend,settings:t.streamLogSettings,"legend-position":"bottom","legend-visible":!0,title:{text:"流量使用",left:"center"}}})],1),t._v(" "),n("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.bPositionLogLoading,expression:"bPositionLogLoading"}],attrs:{name:"position","element-loading-text":"加载中..."}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"fa fa-location-arrow"}),t._v(" 移动轨迹")]),t._v(" "),t.positionLogs.length>0?n("el-timeline",{staticStyle:{"margin-top":"10px","min-height":"200px","max-height":"450px","overflow-y":"auto"}},t._l(t.positionLogs,function(e,r){return n("el-timeline-item",{key:r,attrs:{type:t.positionTimeLineType(e),timestamp:e.CreatedAt}},[t._v("\n                                "+t._s(e.Method)+" "+t._s(e.Longitude)+", "+t._s(e.Latitude)+"\n                            ")])})):n("p",{staticClass:"text-center"},[n("br"),t._v(" "),t.bPositionLogLoading?n("span",[t._v("暂无数据")]):t.positionDays&&t.positionDays>0?n("span",[t._v("最近"+t._s(t.positionDays)+"天没有位置变更记录")]):n("span",[t._v("未找到最近的位置变更记录")])])],1)],1),t._v(" "),t._m(1)],1),t._v(" "),t._m(2)])])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-content"},[n("div",{staticClass:"tab-pane active",attrs:{id:"status-log"}}),t._v(" "),n("div",{staticClass:"tab-pane",attrs:{id:"stream-log"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")])])}],o={render:r,staticRenderFns:i};e.a=o}});